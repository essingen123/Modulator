{"version":3,"sources":["webpack:///webpack/bootstrap 06bc1569a3ce8fa4d8dd","webpack:///./ts/utils/modern.ts","webpack:///./ts/utils/file.ts","webpack:///./ts/synth/synth.ts","webpack:///./ts/utils/popups.ts","webpack:///./ts/synth/notes.ts","webpack:///./ts/synth/palette.ts","webpack:///./ts/synth/customNodes.ts","webpack:///./ts/synth/timer.ts","webpack:///./ts/synth/instrument.ts","webpack:///./ts/main.ts","webpack:///./ts/synthUI/synthUI.ts","webpack:///./ts/synthUI/graph.ts","webpack:///./ts/synthUI/paramsUI.ts","webpack:///./ts/synthUI/analyzer.ts","webpack:///./ts/piano/noteInputs.ts","webpack:///./ts/piano/keyboard.ts","webpack:///./ts/piano/midi.ts","webpack:///./ts/piano/piano.ts","webpack:///./ts/piano/arpeggiator.ts","webpack:///./ts/synthUI/presets.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;AC7DA;AAAA;;;;;GAKG;AAYG,4BAA6B,CAAQ,EAAE,CAAM;IAClD,MAAM,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACzB,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;QAAC,MAAM,CAAC,KAAK,CAAC,CAAC,YAAY;IACvC,CAAC,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;IACjB,MAAM,CAAC,IAAI,CAAC;AACb,CAAC;AAED,MAAM,QAAQ,GAAG,CAAC,CAAC;AAEnB,mBAAmB,IAAY,EAAE,CAAS;IACzC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACrC,CAAC;AAEK,oBAAqB,KAAa,EAAE,GAAW,EAAE,GAAW;IACjE,MAAM,QAAQ,GAAG,SAAS,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;IACpD,MAAM,CAAC,SAAS,CAAC,QAAQ,EAAE,KAAK,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,QAAQ,CAAC;AACxD,CAAC;AAEK,oBAAqB,KAAa,EAAE,GAAW,EAAE,GAAW;IACjE,MAAM,QAAQ,GAAG,SAAS,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;IACpD,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;AACvD,CAAC;AAEK,mBAAoB,IAAwB;IACjD,OAAO,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC;QACvC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,MAAM;QACrC,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC;IAC3B,MAAM,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC;AAC9B,CAAC;;;;;;;;;;;;;AC7CD;AAAA,+DAA+D;AAEzD,6BAA8B,MAAgB;IACnD,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,IAAI,KAAK,GAAG,IAAI,UAAU,CAAC,MAAM,CAAC,CAAC;IACnC,IAAI,GAAG,GAAG,KAAK,CAAC,UAAU,CAAC;IAC3B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;QAC9B,MAAM,IAAI,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IACzC,CAAC;IACD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC5B,CAAC;AAEK,6BAA8B,MAAc;IACjD,IAAI,aAAa,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACxC,IAAI,GAAG,GAAG,aAAa,CAAC,MAAM,CAAC;IAC/B,IAAI,KAAK,GAAG,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC;IAChC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;QAC9B,KAAK,CAAC,CAAC,CAAC,GAAG,aAAa,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACxC,CAAC;IACD,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC;AACrB,CAAC;AAGD,uDAAuD;AAEjD;IACL,MAAM,CAAC,CAAO,MAAO,CAAC,YAAY,IAAI,UAAU,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AACjE,CAAC;AAEK,kBAAmB,QAAgB,EAAE,QAAgB;IAC1D,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;IACnB,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;IAC7B,CAAC,CAAC,IAAI,CAAC,MAAM,EACZ,uCAAuC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC3D,MAAM,UAAU,GAAG,IAAI,UAAU,CAAC,OAAO,EACxC,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC;IACrD,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAChC,CAAC;AAOK,oBAAqB,KAAmB,EAAE,EAAkB;IACjE,MAAM,CAAC,KAAK,EAAE,EAAE,EAAE,YAAY,CAAC,CAAC;AACjC,CAAC;AAEK,2BAA4B,KAAmB,EAAE,EAAkB;IACxE,MAAM,CAAC,KAAK,EAAE,EAAE,EAAE,mBAAmB,CAAC,CAAC;AACxC,CAAC;AAED,gBAAgB,KAAmB,EAAE,EAAkB,EAAE,QAAgB;IACxE,IAAI,KAAK,GAAS,KAAK,CAAC,MAAO,CAAC,KAAK;IACrC,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC;QAAC,MAAM,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACnD,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;IACtB,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;IAChC,MAAM,CAAC,MAAM,GAAG,CAAC,OAAY,EAAG,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IAC7D,MAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC;AAC/B,CAAC;;;;;;;;;;;;;AC3DmD;AACoB;AACF;AAC9B;AACF;AAGtC,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAC,EAAE,CAAC,CAAC;AACnC,MAAM,EAAE,GAAG,EAAE,CAAC;AAEd;;GAEG;AACG;IAAN;QAWC,qCAAqC;QACrC,UAAK,GAAY,KAAK,CAAC;IAOxB,CAAC;IAJA,iCAAiC;IACjC,SAAS;QACR,MAAM,2DAA2D,CAAC;IACnE,CAAC;CACD;AAAA;AAAA;AAED;;GAEG;AACG;IAAN;QACC,SAAI,GAAG,CAAC,CAAC;QACT,UAAK,GAAG,CAAC,CAAC;IACX,CAAC;CAAA;AAAA;AAAA;AAUD;;;;GAIG;AACG;IAQL,YAAY,EAAgB;QAN5B,gBAAW,GAAgC,EAAE,CAAC;QAC9C,kBAAa,GAAoC,EAAE,CAAC;QAEpD,iBAAY,GAAkB,EAAE,CAAC;QACjC,eAAU,GAAG,IAAI,UAAU,EAAE,CAAC;QAG7B,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,OAAO,GAAG,yDAAO,CAAC;QACvB,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,0DAAW,CAAC,CAAC;QACnD,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE,oEAAqB,CAAC,CAAC;QAC9D,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,EAAE,wEAAyB,CAAC,CAAC;QACtE,IAAI,CAAC,kBAAkB,CAAC,cAAc,EAAE,gEAAiB,CAAC,CAAC;QAC3D,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE,6DAAc,CAAC,CAAC;QACzD,IAAI,CAAC,oBAAoB,CAAC,mBAAmB,EAAE,IAAI,iBAAiB,EAAE,CAAC,CAAC;QACxE,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,EAAE,IAAI,gBAAgB,EAAE,CAAC,CAAC;IACvE,CAAC;IAED,eAAe,CAAC,IAAY;QAC3B,MAAM,GAAG,GAAY,yDAAO,CAAC,IAAI,CAAC,CAAC;QACnC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QACtB,MAAM,OAAO,GAAQ,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;QAC7D,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,WAAW,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAC/D,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC;QACzC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC;YAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC;QAC5C,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QACtC,MAAM,CAAC,KAAK,CAAC;IACd,CAAC;IAED,YAAY,CAAC,KAAe,EAAE,IAAY;QACzC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;QACnB,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;QAClB,IAAI,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QACvC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC;YACV,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,2BAA2B,IAAI,GAAG,CAAC,CAAC;QAC1D,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;QACpB,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACnC,MAAM,EAAE,GAAG,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC;QACrC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACR,KAAK,CAAC,WAAW,GAAG,IAAU,4DAAa,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC;YACvD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QACxC,CAAC;IACF,CAAC;IAED,kBAAkB,CAAC,KAAe,EAAE,GAAc;QACjD,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;QACnB,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC;QACnB,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC;QACnC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACzB,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QACxC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;IACpB,CAAC;IAED,cAAc,CAAC,IAAc;QAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC;YACpB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC3C,CAAC;IAED,YAAY,CAAC,OAAiB,EAAE,OAAiB;QAChD,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;YACzD,IAAI,KAAK,GAAQ,OAAO,CAAC,KAAK,CAAC;YAC/B,OAAO,CAAC,aAAa,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;iBACzD,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,UAAU,CAAC,CAAC;YACtD,OAAO,CAAC,YAAY,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YAChD,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,KAAK,CAAC;YACtC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;QACpD,CAAC;QACD,IAAI;YAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAC3C,CAAC;IAED,eAAe,CAAC,OAAiB,EAAE,OAAiB;QACnD,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;YACzD,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC;YAC7B,OAAO,CAAC,KAAK,CAAC,UAAU,CAAO,OAAO,CAAC,KAAM,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;QACtE,CAAC;QACD,IAAI;YACH,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAC1C,CAAC;IAED,aAAa,CAAC,IAAS,EAAE,IAAc;QACtC,IAAI,OAAO,GAAQ,IAAI,CAAC;QACxB,GAAG,CAAC,CAAC,MAAM,KAAK,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC9C,MAAM,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACpC,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAC9B,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;gBACzC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;qBACvD,UAAU,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;YACjC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,YAAY,UAAU,CAAC,CAAC,CAAC;gBACvC,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;gBACZ,MAAO,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;YAC9B,CAAC;YACD,IAAI;gBAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;QAChC,CAAC;IACF,CAAC;IAED,aAAa,CAAC,IAAS;QACtB,MAAM,MAAM,GAAQ,EAAE,CAAC;QACvB,GAAG,CAAC,CAAC,MAAM,KAAK,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACtD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACjC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;gBACtC,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;qBACpE,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC1B,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,YAAY,UAAU,CAAC;gBACrC,EAAE,CAAC,CAAO,MAAO,CAAC,QAAQ,CAAC,KAAK,SAAS,CAAC;oBAAC,MAAM,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC;gBACxE,IAAI;oBAAC,MAAM,CAAC,KAAK,CAAC,GAAS,MAAO,CAAC,QAAQ,CAAC,CAAC;YAC9C,IAAI;gBAAC,MAAM,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC;QAC7B,CAAC;QACD,MAAM,CAAC;YACN,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,MAAM;YACN,YAAY,EAAE,IAAI,CAAC,YAAY;YAC/B,aAAa,EAAE,IAAI,CAAC,aAAa;SACjC;IACF,CAAC;IAED,cAAc,CAAC,IAAY;QAC1B,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;IACtC,CAAC;IAED,MAAM,CAAC,IAAY,EAAE,IAAY,EAAE,IAAa;QAC/C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;YAAC,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC;QACtC,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,GAAG,CAAC,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,YAAY,CAAC;YAClC,EAAE,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;IAC/B,CAAC;IAED,OAAO,CAAC,IAAY,EAAE,IAAY,EAAE,IAAa;QAChD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;YAAC,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC;QACtC,GAAG,CAAC,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,YAAY,CAAC;YAClC,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IAC/B,CAAC;IAED,cAAc,CAAC,EAAe;QAC7B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC5B,CAAC;IAED,iBAAiB,CAAC,EAAe;QAChC,iFAAkB,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC;IAC1C,CAAC;IAED,iBAAiB;QAChB,IAAI,UAAU,GAAG,CAAC,CAAC;QACnB,GAAG,CAAC,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,EAAE,CAAC,SAAS,IAAI,EAAE,CAAC,WAAW,GAAG,UAAU,CAAC;gBAC/C,UAAU,GAAG,EAAE,CAAC,WAAW,CAAC;QAC9B,CAAC;QACD,GAAG,CAAC,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC;gBACjB,EAAE,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,CAAC;IACF,CAAC;IAED,cAAc,CAAC,KAAgB,EAAE,GAAY,EAAE,IAAY;QAC1D,IAAI,OAAO,GAAQ,KAAK,CAAC;QACzB,GAAG,CAAC,CAAC,MAAM,KAAK,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC;YACjD,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,SAAS,CAAC;gBAChC,OAAO,CAAC,IAAI,CAAC,cAAc,KAAK,yBAAyB,IAAI,GAAG,CAAC;YAClE,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,UAAU,CAAC;gBAC7C,OAAO,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;YAClD,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACpC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,IAAI,EAAE,CAAC,CAAC;gBACjF,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YACrD,CAAC;YACD,IAAI;gBACH,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;IAC9C,CAAC;IAED,kBAAkB,CAAC,eAAuB,EAAE,SAAc;QACzD,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAClE,CAAC;IAED,oBAAoB,CAAC,KAAa,EAAE,OAAqB;QACxD,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC;IACrC,CAAC;CAED;AAAA;AAAA;AAcD;IAAA;QACC,aAAQ,GAAG,kBAAkB,CAAC;IAY/B,CAAC;IAXA,UAAU,CAAC,KAAgB,EAAE,GAAY,IAAS,CAAC;IAEnD,UAAU,CAAC,KAAsB;QAChC,MAAM,CAAC,wEAAwB,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;IACjD,CAAC;IAED,UAAU,CAAC,KAAsB,EAAE,IAAS;QAC3C,MAAM,OAAO,GAAG,wEAAwB,CAAC,IAAI,CAAC,CAAC;QAC/C,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC;QACzB,KAAK,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,EAAE,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,CAAC;IAC1E,CAAC;CACD;AAED;IAAA;QACC,aAAQ,GAAG,iBAAiB,CAAC;IAwC9B,CAAC;IAvCA,UAAU,CAAC,KAAsB,EAAE,GAAY;QAC9C,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;QACpB,KAAK,CAAC,eAAe,GAAG,EAAE,CAAC;QAC3B,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;IACnB,CAAC;IAED,UAAU,CAAC,KAAsB;QAChC,MAAM,KAAK,GAAG,EAAE,CAAC;QACjB,MAAM,IAAI,GAAG,KAAK,CAAC,eAAe,CAAC;QACnC,MAAM,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC;QAC3B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE;YACpC,KAAK,CAAC,IAAI,CAAC;gBACV,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;gBACd,IAAI,EAAE,wEAAwB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACvC,CAAC,CAAC;QACJ,MAAM,CAAC,KAAK,CAAC;IACd,CAAC;IAED,UAAU,CAAC,KAAsB,EAAE,IAAS;QAC3C,MAAM,IAAI,GAAG,KAAK,CAAC,QAAQ,CAAC;QAC5B,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,MAAM,IAAI,GAAG,KAAK,CAAC,eAAe,CAAC;QACnC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,MAAM,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC;QAC3B,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;QACjB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACtC,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YACrB,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACtB,MAAM,OAAO,GAAG,wEAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACpD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAC5C,CAAC;IACF,CAAC;IAED,YAAY,CAAC,KAAgB,EAAE,IAAiB,EAC/C,IAAW,EAAE,CAAS;QACtB,KAAK,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,EAAE,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC;IACjE,CAAC;CAED;;;;;;;;;;;;;;AC5SD;AAAA,6CAA6C;AACtC,IAAI,MAAM,GAAY,KAAK,CAAC;AAC7B,iBAAkB,IAAa;IACpC,MAAM,GAAG,IAAI,CAAC;AACf,CAAC;AAED,4DAA4D;AACtD,eAAgB,GAAW,EAAE,KAAc,EAAE,SAAmB,EAAE,OAAa;IACpF,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACvC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,OAAO,CAAC,CAAC;IAClD,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC;IAC/B,EAAE,CAAC,CAAC,SAAS,CAAC;QACb,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,EAAE,CAAC;IACnC,IAAI;QACH,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC1C,KAAK,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,IAAI,EAAE,CAAC;IAC3C,MAAM,GAAG,IAAI,CAAC;IACd,KAAK,CAAC,GAAG,CAAC,iBAAiB,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC;IAClD,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;AACtB,CAAC;AAED,gDAAgD;AAC1C,kBAAmB,GAAW,EAAE,KAAc;IACnD,KAAK,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;AAC9C,CAAC;AAED,wCAAwC;AAClC;IACL,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC;QAAC,MAAM,CAAC;IACpB,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,CAAC;AACjC,CAAC;AAED,8DAA8D;AACxD,iBAAkB,GAAW,EAAE,KAAa,EACjD,OAA6B,EAAE,MAAmB;IAClD,IAAI,MAAM,GAAG,KAAK,CAAC;IACnB,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACvC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,gBAAgB,CAAC,CAAC;IAC3D,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACzC,QAAQ,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC;IAC1C,KAAK,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,IAAI,EAAE,CAAC;IAC3C,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC1C,KAAK,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,CAAC,EAAE;QAC/B,QAAQ,CAAC,KAAK,EAAE,CAAC;QACjB,EAAE,CAAC,CAAC,MAAM,CAAC;YAAC,MAAM,EAAE,CAAC;IACtB,CAAC,CAAC,CAAC;IACH,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE;QACpC,MAAM,GAAG,IAAI,CAAC;QACd,QAAQ,CAAC,KAAK,EAAE,CAAC;QACjB,MAAM,CAAC,KAAK,CAAC;IACd,CAAC,CAAC,CAAC;IACH,KAAK,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,EAAE;QAC9B,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACtB,MAAM,GAAG,KAAK,CAAC;QACf,OAAO,CAAC,MAAM,CAAC,CAAC;IACjB,CAAC,CAAC,CAAC;IACH,MAAM,GAAG,IAAI,CAAC;IACd,KAAK,CAAC,KAAK,EAAE,CAAC;AACf,CAAC;AAED,6DAA6D;AACvD,gBAAiB,GAAW,EAAE,KAAa,EAChD,YAAoB,EAAE,EAA6B;IACnD,MAAM,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;IAClD,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,SAAS,CAAC,EAAE;QAC/B,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YAAC,MAAM,CAAC;QAChB,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;YAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI;YAAC,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;IACtB,CAAC,EAAE,GAAG,EAAE;QACP,KAAK,CAAC,IAAI,EAAE,CAAC;QACb,KAAK,CAAC,KAAK,EAAE,CAAC;QACd,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;YAClB,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YACxB,MAAM,MAAM,GAAuC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC5D,MAAM,CAAC,MAAM,EAAE,CAAC;QACjB,CAAC;QACD,IAAI;YAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IACpB,CAAC,CAAC,CAAC;AACJ,CAAC;AAGD,MAAM,KAAK,GAAqB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;CAqBjC,CAAC,CAAC;AAEH,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;;;;;;;;;AC1G8C;AActE;;GAEG;AACH;IAMC,YAAY,KAAe;QAH3B,cAAS,GAAG,KAAK,CAAC;QAClB,gBAAW,GAAG,CAAC,CAAC;QAGf,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,UAAU,GAAG,IAAI,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAClD,CAAC;IAED,MAAM,CAAC,IAAY,EAAE,IAAY,EAAE,KAAa,EAAE,IAAY,IAAQ,CAAC;IACvE,OAAO,CAAC,IAAY,EAAE,IAAY,EAAE,IAAY,IAAS,CAAC;IAE1D,KAAK;QACJ,eAAe;QACf,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC;QAC1C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QACvB,MAAM,KAAK,GAAS,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAQ,CAAC,IAAI,CAAC,EAAE,CAAC;QACtD,kBAAkB;QAClB,GAAG,CAAC,CAAC,MAAM,KAAK,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC5D,MAAM,KAAK,GAAS,IAAI,CAAC,KAAK,CAAC,KAAM,CAAC,KAAK,CAAC,CAAC;YAC7C,EAAE,CAAC,CAAC,KAAK,YAAY,UAAU,CAAC;gBAC/B,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;YAClC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,CAAC;gBAC9C,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;QACvB,CAAC;QACD,0BAA0B;QAC1B,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;YAC3C,IAAI,EAAE,GAAQ,GAAG,CAAC;YAClB,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,EAAE,CAAC,KAAK,CAAC;gBAAC,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC;YACzC,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACnB,CAAC;QACD,iCAAiC;QACjC,GAAG,CAAC,CAAC,MAAM,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YAC7C,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;QAClD,CAAC;QACD,yDAAyD;QACzD,yDAAyD;QACzD,MAAM,CAAC,KAAK,CAAC;IACd,CAAC;IAED,UAAU,CAAC,KAAsB;QAChC,qBAAqB;QACrB,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;YACzC,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QACvB,4BAA4B;QAC5B,GAAG,CAAC,CAAC,MAAM,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YAC7C,MAAM,CAAC,KAAK,CAAC,UAAU,CAAO,KAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;QAC5D,CAAC;IACF,CAAC;IAED,SAAS,CAAC,KAAkB,EAAE,KAAa,EAAE,IAAY;QACxD,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC;QAC/C,MAAM,IAAI,GAAG,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;QACjC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,iDAAiD;QACtE,EAAE,CAAC,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,IAAI,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;YACjD,MAAM,IAAI,GAAG,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC;YAC5C,KAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;YAClC,KAAK,CAAC,uBAAuB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC1C,KAAK,CAAC,4BAA4B,CAAC,IAAI,EAAE,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;QAClE,CAAC;QACD,IAAI;YAAC,KAAK,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;CACD;AAED;;GAEG;AACH,oBAAqB,SAAQ,eAAe;IAI3C,MAAM,CAAC,IAAY,EAAE,IAAY,EAAE,KAAa,EAAE,IAAY;QAC7D,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;YAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,IAAI,CAAC,QAAQ,GAAmB,IAAI,CAAC,KAAK,EAAE,CAAC;QAC7C,IAAI,CAAC,SAAS,CAAc,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QAClE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC1B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACtB,CAAC;IAED,OAAO,CAAC,IAAY,EAAE,IAAY,EAAE,IAAY;QAC/C,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC,CAAC,4CAA4C;QAC/E,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;IAC7C,CAAC;CACD;AAED;;;GAGG;AACH,oBAAqB,SAAQ,cAAc;IAC1C,SAAS,CAAC,KAAiB,EAAE,KAAa,EAAE,IAAY;QACvD,6BAA6B;QAC7B,KAAK,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IACzC,CAAC;CACD;AAED;;GAEG;AACH,uBAAwB,SAAQ,eAAe;IAI9C,MAAM,CAAC,IAAY,EAAE,IAAY,EAAE,KAAa,EAAE,IAAY;QAC7D,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;YACb,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtB,MAAM,GAAG,GAAS,IAAI,CAAC,KAAK,CAAC,KAAM,CAAC,OAAO,CAAC;QAC5C,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;YAAC,MAAM,CAAC,CAAC,iCAAiC;QACnD,IAAI,CAAC,IAAI,GAA0B,IAAI,CAAC,KAAK,EAAE,CAAC;QAChD,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QACvB,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;QACnC,MAAM,OAAO,GAAG,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC;QAClC,IAAI,CAAC,SAAS,CAAc,GAAG,EAAE,GAAG,CAAC,KAAK,GAAG,KAAK,EAAE,IAAI,CAAC,CAAC;QAC1D,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACtB,CAAC;IAED,OAAO,CAAC,IAAY,EAAE,IAAY,EAAE,IAAY;QAC/C,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC;QAClC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;IACzC,CAAC;CACD;AAED;;GAEG;AACH;IACC,YAAmB,EAAU,EAAS,EAAU,EAAS,EAAU,EAAS,EAAU;QAAnE,OAAE,GAAF,EAAE,CAAQ;QAAS,OAAE,GAAF,EAAE,CAAQ;QAAS,OAAE,GAAF,EAAE,CAAQ;QAAS,OAAE,GAAF,EAAE,CAAQ;IAAG,CAAC;IAC1F,MAAM,CAAC,CAAS;QACf,MAAM,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC;IAC1D,CAAC;IACD,GAAG,CAAC,CAAS;QACZ,MAAM,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;QACjF,MAAM,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;IAC5C,CAAC;IACD,GAAG,CAAC,CAAa,EAAE,SAAkB,KAAK;QACzC,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;YAC5B,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC;QACD,IAAI,CAAC,CAAC;YACL,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC;gBAAC,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;YAChD,CAAC,CAAC,uBAAuB,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;QAC7C,CAAC;IACF,CAAC;CACD;AAQD;;GAEG;AACH,qBAAsB,SAAQ,eAAe;IAI5C,YAAY,KAAe;QAC1B,KAAK,CAAC,KAAK,CAAC,CAAC;QAHd,cAAS,GAAG,IAAI,CAAC;QAIhB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC5B,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;QAClC,IAAI,CAAC,UAAU,GAAG,CAAC,IAAgB,EAAE,EAAE;YACtC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE;gBACvB,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC;oBACjB,KAAK,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YAC/D,CAAC,CAAC,CAAC;YACH,SAAS,CAAC,IAAI,CAAC,CAAC;QACjB,CAAC;IACF,CAAC;IAED,OAAO;QACN,IAAI,KAAK,GAAQ,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;QAClC,MAAM,CAAC,KAAK,CAAC;IACd,CAAC;IAED,IAAI,WAAW;QACd,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC5B,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACrB,CAAC;IACD,IAAI,WAAW,CAAC,OAAe;QAC9B,6BAA6B;IAC9B,CAAC;IAED,MAAM,CAAC,IAAY,EAAE,IAAY,EAAE,KAAa,EAAE,IAAY;QAC7D,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC5B,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE;YACvB,MAAM,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACpC,MAAM,OAAO,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACrC,MAAM,OAAO,GAAG,CAAC,GAAG,IAAI,CAAC,OAAO,GAAG,OAAO,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;YAChE,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;YACrC,KAAK,CAAC,qBAAqB,CAAC,GAAG,CAAC,CAAC;YACjC,EAAE,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC;gBACd,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,KAAK,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;YACjD,KAAK,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;YAC/D,KAAK,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,IAAI,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;YACzF,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACzB,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,OAAO,CAAC,IAAY,EAAE,IAAY,EAAE,IAAY;QAC/C,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC,CAAC,4CAA4C;QAC/E,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC5B,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE;YACvB,IAAI,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAC7C,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC;gBACd,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;YAC9C,MAAM,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACpC,KAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;YAClC,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;YACrC,EAAE,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC;gBACd,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC;oBAC9C,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;YAC/C,KAAK,CAAC,QAAQ,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;YAChE,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,cAAc,CAAC,KAAkB,EAAE,IAAU,EAAE,GAAW;QACzD,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACzB,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACd,CAAC;IAED,kBAAkB,CAAC,KAAkB,EAAE,CAAS;QAC/C,IAAI,IAAI,CAAC;QACT,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC5C,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAChC,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC1C,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC/B,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAED,UAAU,CAAC,EAA8B;QACxC,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;YACzC,EAAE,CAAC,CAAC,GAAG,YAAY,UAAU,CAAC;gBAC7B,EAAE,CAAc,GAAG,CAAC,CAAC;IACxB,CAAC;IAED,aAAa,CAAC,CAAc;QAC3B,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC;YAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC;QAC/C,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC;IACjB,CAAC;CACD;AAED;;;GAGG;AACH,4BAA6B,SAAQ,eAAe;IAApD;;QAEC,YAAO,GAAG,KAAK,CAAC;IAiBjB,CAAC;IAfA,MAAM,CAAC,IAAY,EAAE,IAAY,EAAE,KAAa,EAAE,IAAY;QAC7D,MAAM,KAAK,GAAQ,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;QACpC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;YAChB,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACtB,CAAC;IAED,OAAO,CAAC,IAAY,EAAE,IAAY,EAAE,IAAY;QAC/C,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC;QAClC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,MAAM,KAAK,GAAQ,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;QACpC,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;IACrC,CAAC;CACD;AAED;;GAEG;AACH,0BAA2B,SAAQ,eAAe;IAEjD,MAAM,CAAC,IAAY,EAAE,IAAY,EAAE,KAAa,EAAE,IAAY;QAC7D,MAAM,IAAI,GAAS,IAAI,CAAC,KAAK,CAAC,KAAM,CAAC,UAAU,CAAC,CAAC;QACjD,MAAM,IAAI,GAA0B,IAAI,CAAC,KAAK,EAAE,CAAC;QACjD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;QACvC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IAClB,CAAC;IAED,OAAO,CAAC,IAAY,EAAE,IAAY,EAAE,IAAY,IAAG,CAAC;CACpD;AAED,kEAAkE;AAElE;;;GAGG;AACI,MAAM,YAAY,GAAG;IAC3B,KAAK,EAAE,cAAc;IACrB,QAAQ,EAAE,iBAAiB;IAC3B,MAAM,EAAE,eAAe;IACvB,KAAK,EAAE,cAAc;IACrB,aAAa,EAAE,sBAAsB;IACrC,WAAW,EAAE,oBAAoB;CACjC,CAAC;AAAA;AAAA;AAGF,2DAA2D;AAE3D;;;GAGG;AACH;IAGC,YAAY,KAAgB;QAF5B,YAAO,GAAgC,EAAE,CAAC;QAGzC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,SAAS,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;YACjE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YAC7D,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;IACrD,CAAC;IAED,OAAO,CAAC,EAAc;QACrB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACvB,CAAC;IAED,UAAU,CAAC,EAAc;QACxB,iFAAkB,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;IACtC,CAAC;IAED,QAAQ,CAAC,GAAQ,EAAE,KAAa,EAAE,UAAoB,EACrD,EAAkD;QAClD,MAAM,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;QACxB,MAAM,IAAI,GAAG,IAAI,CAAC;QAClB,GAAG,CAAC,KAAK,CAAC,GAAG;YACZ,UAAU,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,EAAE,CAAC;gBAAC,EAAE,CAAC,IAAI,EAAE,GAAG,EAAE,SAAS,CAAC;YAChC,IAAI;gBAAC,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;QACjC,CAAC;IACF,CAAC;CACD;;;;;;;;ACjVD;AAAA,mEAAmE;AAEnE,MAAM,aAAa,GAAiB;IACnC,OAAO,EAAE,CAAC;IACV,GAAG,EAAE,CAAC,IAAI;IACV,GAAG,EAAE,IAAI;IACT,MAAM,EAAE,IAAI;CACZ,CAAC;AAEF;;;GAGG;AACI,IAAI,OAAO,GAAgB;IACjC,UAAU;IACV,UAAU,EAAE;QACX,WAAW,EAAE,kBAAkB;QAC/B,WAAW,EAAE,KAAK;QAClB,MAAM,EAAE;YACP,SAAS,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE;YAChD,MAAM,EAAE,aAAa;YACrB,IAAI,EAAE;gBACL,OAAO,EAAE,UAAU;gBACnB,OAAO,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,CAAC;aACnD;SACD;KACD;IACD,MAAM,EAAE;QACP,WAAW,EAAE,oBAAoB;QACjC,WAAW,EAAE,QAAQ;QACrB,MAAM,EAAE;YACP,YAAY,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;YAC5C,MAAM,EAAE,aAAa;YACrB,MAAM,EAAE;gBACP,OAAO,EAAE,IAAI;gBACb,OAAO,EAAE,mBAAmB;aAC5B;YACD,IAAI,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE;YACxB,SAAS,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE;YAC1C,OAAO,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE;SACxC;KACD;IACD,KAAK,EAAE;QACN,WAAW,EAAE,aAAa;QAC1B,WAAW,EAAE,aAAa;QAC1B,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE;YACP,IAAI,EAAG,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE;SACtC;KACD;IACD,MAAM,EAAE;QACP,WAAW,EAAE,cAAc;QAC3B,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE,EAAE;KACV;IACD,SAAS,EAAE;QACV,WAAW,EAAE,oBAAoB;QACjC,WAAW,EAAE,WAAW;QACxB,MAAM,EAAE;YACP,MAAM,EAAE;gBACP,OAAO,EAAE,IAAI;gBACb,OAAO,EAAE,kBAAkB;aAC3B;SACD;KACD;IACD,UAAU;IACV,IAAI,EAAE;QACL,WAAW,EAAE,YAAY;QACzB,MAAM,EAAE;YACP,IAAI,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;SACnD;KACD;IACD,MAAM,EAAE;QACP,WAAW,EAAE,oBAAoB;QACjC,MAAM,EAAE;YACP,SAAS,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE;YAChD,CAAC,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE;YACnC,MAAM,EAAE,aAAa;YACrB,IAAI,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;YACrD,IAAI,EAAE;gBACL,OAAO,EAAE,SAAS;gBAClB,OAAO,EAAE,CAAC,SAAS,EAAE,UAAU,EAAE,UAAU;oBAC1C,UAAU,EAAE,WAAW,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS,CAAC;aACxD;SACD;KACD;IACD,KAAK,EAAE;QACN,WAAW,EAAE,aAAa;QAC1B,MAAM,EAAE;YACP,SAAS,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;SACzC;KACD;IACD,SAAS,EAAE;QACV,WAAW,EAAE,oBAAoB;QACjC,MAAM,EAAE;YACP,GAAG,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE;SAClD;KACD;IACD,UAAU,EAAE;QACX,WAAW,EAAE,0BAA0B;QACvC,MAAM,EAAE;YACP,SAAS,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE;YAC5D,IAAI,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;YACpD,KAAK,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;YACrD,SAAS,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE;YACzD,MAAM,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;YAC1C,OAAO,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;SAC1C;KACD;IACD,OAAO,EAAE;QACR,WAAW,EAAE,eAAe;QAC5B,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE;YACP,MAAM,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE;SACrD;KACD;IACD,cAAc;IACd,GAAG,EAAE;QACJ,WAAW,EAAE,kBAAkB;QAC/B,WAAW,EAAE,KAAK;QAClB,OAAO,EAAE,IAAI;QACb,MAAM,EAAE;YACP,SAAS,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE;YAC9C,MAAM,EAAE,aAAa;YACrB,IAAI,EAAE;gBACL,OAAO,EAAE,MAAM;gBACf,OAAO,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,CAAC;aACnD;SACD;KACD;IACD,QAAQ,EAAE;QACT,WAAW,EAAE,YAAY;QACzB,OAAO,EAAE,IAAI;QACb,MAAM,EAAE;YACP,IAAI,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE;SACrD;KACD;IACD,IAAI,EAAE;QACL,WAAW,EAAE,YAAY;QACzB,WAAW,EAAE,MAAM;QACnB,OAAO,EAAE,IAAI;QACb,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE;YACP,MAAM,EAAG,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE;YAC1C,KAAK,EAAI,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE;YAC1C,OAAO,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE;YACvD,OAAO,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE;YAC1C,KAAK,EAAI,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;SACzC;KACD;IACD,SAAS,EAAE;QACV,WAAW,EAAE,iBAAiB;QAC9B,OAAO,EAAE,IAAI;QACb,MAAM,EAAE,IAAI;QACZ,MAAM,EAAE;YACP,SAAS,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE;YAC3C,KAAK,EAAG,EAAE,OAAO,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE;SACzC;KACD;IACD,SAAS;IACT,OAAO,EAAE;QACR,WAAW,EAAE,IAAI;QACjB,MAAM,EAAE,EAAE;KACV;CACD,CAAC;;;;;;;;AC3LF;;GAEG;AACH;IAAA;QACC,WAAM,GAAG,IAAI,CAAC;QACd,iBAAY,GAAG,CAAC,CAAC;QACjB,qBAAgB,GAAqB,KAAK,CAAC;QAC3C,0BAAqB,GAA0B,UAAU,CAAC;QAE1D,mBAAc,GAAG,CAAC,CAAC;QACnB,oBAAe,GAAG,CAAC,CAAC;IAYrB,CAAC;IAXA,uBAAuB;IACvB,OAAO,CAAC,WAAmC,EAC1C,MAAe,EAAE,KAAc;QAC9B,MAAM,CAAY,WAAW,CAAC;IAC/B,CAAC;IACF,UAAU,CAAC,WAAmC,EAC7C,MAAe,EAAE,KAAc,IAAS,CAAC;IAC1C,qCAAqC;IACrC,gBAAgB,KAAI,CAAC;IACrB,aAAa,CAAC,GAAU,IAAa,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IACpD,mBAAmB,KAAI,CAAC;CACxB;AAGD;;;;GAIG;AACG,UAAY,SAAQ,cAAc;IAAxC;;QACC,WAAM,GAAW,GAAG,CAAC;QACrB,UAAK,GAAW,GAAG,CAAC;QACpB,YAAO,GAAW,GAAG,CAAC;QACtB,YAAO,GAAW,CAAC,CAAC;QACpB,UAAK,GAAW,CAAC,CAAC;QAClB,2BAA2B;IAC5B,CAAC;CAAA;AAAA;AAAA;AAGD;;GAEG;AACH,qBAAsB,SAAQ,cAAc;IAK3C,YAAY,EAAgB;QAC3B,KAAK,EAAE,CAAC;QALT,SAAI,GAAW,CAAC,CAAC;QAEjB,YAAO,GAAY,KAAK,CAAC;QAIxB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;QAC5C,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;IAC3D,CAAC;IAED,OAAO,CAAC,IAAe;QACtB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAED,UAAU;QACT,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;IACzB,CAAC;IAED,KAAK;QACJ,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACrB,CAAC;IAED,IAAI;QACH,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACtB,CAAC;IAED,YAAY,CAAC,GAAyB,IAAG,CAAC;CAC1C;AAGD;;GAEG;AACG,oBAAsB,SAAQ,eAAe;IAClD,YAAY,CAAC,GAAyB;QACrC,GAAG,CAAC,CAAC,IAAI,OAAO,GAAG,CAAC,EAAE,OAAO,GAAG,GAAG,CAAC,YAAY,CAAC,gBAAgB,EAAE,OAAO,EAAE,EAAE,CAAC;YAC9E,MAAM,GAAG,GAAG,GAAG,CAAC,YAAY,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACrD,GAAG,CAAC,CAAC,IAAI,MAAM,GAAG,CAAC,EAAE,MAAM,GAAG,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE;gBACjD,GAAG,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC;IACF,CAAC;CACD;AAAA;AAAA;AAGD;;;GAGG;AACG,wBAA0B,SAAQ,eAAe;IAOtD,YAAY,EAAgB;QAC3B,KAAK,CAAC,EAAE,CAAC,CAAC;QACV,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QACb,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;IACZ,CAAC;IAED,OAAO,CAAC,KAAU;QACjB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAClC,CAAC;IAED,YAAY,CAAC,GAAyB;QACrC,MAAM,eAAe,GAAG,IAAI,CAAC,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC;QAC5D,GAAG,CAAC,CAAC,IAAI,OAAO,GAAG,CAAC,EAAE,OAAO,GAAG,GAAG,CAAC,YAAY,CAAC,gBAAgB,EAAE,OAAO,EAAE,EAAE,CAAC;YAC9E,IAAI,GAAG,GAAG,GAAG,CAAC,YAAY,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACnD,GAAG,CAAC,CAAC,IAAI,MAAM,GAAG,CAAC,EAAE,MAAM,GAAG,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE,CAAC;gBACpD,IAAI,CAAC,GAAG,EAAE,CAAC;gBACX,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,GAAG,eAAe,CAAC,CAAC,CAAC;oBAChC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;oBAC9C,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,kCAAkC;gBACjD,CAAC;gBACD,GAAG,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;YACtB,CAAC;QACF,CAAC;IACF,CAAC;CACD;AAAA;AAAA;AAGD;;GAEG;AACG,aAAe,SAAQ,eAAe;IAA5C;;QACC,WAAM,GAAW,CAAC,CAAC;QACnB,mBAAc,GAAG,CAAC,CAAC;IAepB,CAAC;IAbA,YAAY,CAAC,GAAyB;QACrC,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACpC,GAAG,CAAC,CAAC,IAAI,OAAO,GAAG,CAAC,EAAE,OAAO,GAAG,GAAG,CAAC,YAAY,CAAC,gBAAgB,EAAE,OAAO,EAAE,EAAE,CAAC;YAC9E,IAAI,GAAG,GAAG,GAAG,CAAC,YAAY,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACnD,IAAI,KAAK,GAAG,GAAG,CAAC,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACpD,IAAI,GAAG,GAAG,CAAC,CAAC;YACZ,GAAG,CAAC,CAAC,IAAI,MAAM,GAAG,CAAC,EAAE,MAAM,GAAG,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE,CAAC;gBACpD,GAAG,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;gBACrC,GAAG,IAAI,EAAE,CAAC;gBACV,EAAE,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC;oBAAC,GAAG,GAAG,CAAC,CAAC;YAClC,CAAC;QACF,CAAC;IACF,CAAC;CACD;AAAA;AAAA;AAGD;;;GAGG;AACG,gBAAkB,SAAQ,cAAc;IAK7C,OAAO,CAAC,KAAU;QACjB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YAClB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YAC5B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QACD,MAAM,SAAS,GAAQ,MAAM,CAAC,SAAS,CAAC;QACxC,SAAS,CAAC,YAAY,GAAG,CAAC,SAAS,CAAC,YAAY;YAC/C,SAAS,CAAC,kBAAkB;YAC5B,SAAS,CAAC,eAAe;YACzB,SAAS,CAAC,cAAc,CAAC,CAAC;QAC3B,SAAS,CAAC,YAAY,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,CAAC,MAAW,EAAE,EAAE;YACvD,MAAM,EAAE,GAAQ,KAAK,CAAC,OAAO,CAAC;YAC9B,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC;YAClD,IAAI,EAAE,GAAQ,KAAK,CAAC;YACpB,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,EAAE,CAAC,KAAK,CAAC;gBAAC,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC;YACzC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACtB,CAAC,EAAE,CAAC,KAAU,EAAE,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;IAC1C,CAAC;IAED,UAAU;QACT,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;CACD;AAAA;AAAA;;;;;;;;ACxLK;IASL,YAAY,EAAgB,EAAE,GAAG,GAAG,EAAE,EAAE,KAAK,GAAG,GAAG;QAClD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACpB,CAAC;IAED,IAAI,GAAG,KAAK,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAE/B,IAAI,GAAG,CAAC,CAAC;QACR,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC;QACvC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,GAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;QAC3C,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC;IACxC,CAAC;IAED,KAAK,CAAC,EAAkB;QACvB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC;QACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,EAAE,CAAC,CAAC,EAAE,CAAC;YAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC;QACxC,IAAI,CAAC,IAAI,EAAE,CAAC;IACb,CAAC;IAED,IAAI;QACH,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACtB,CAAC;IAED,IAAI;QACH,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC;QAC1B,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5C,OAAO,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;YAC7D,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACxC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC;QACxC,CAAC;IACF,CAAC;CACD;AAAA;AAAA;;;;;;;;;ACnDqD;AAGtD;;GAEG;AACG;IAML,YAAY,EAAgB,EAAE,IAAS,EAAE,SAAiB,EAAE,IAAgB;QAC3E,eAAe;QACf,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC;YACpC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACvB,CAAC;QACD,gEAAgE;QAChE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC;QAClD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC;YAC7C,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC;QACjD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE;YACjC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;IACpD,CAAC;IAED,MAAM,CAAC,IAAY,EAAE,WAAmB,CAAC,EAAE,IAAa;QACvD,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAC9B,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAChC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxB,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;IACpC,CAAC;IAED,OAAO,CAAC,IAAY,EAAE,WAAmB,CAAC,EAAE,IAAa;QACxD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC7C,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC7B,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC;gBAC5B,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;gBACpC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACtB,KAAK,CAAC;YACP,CAAC;QACF,CAAC;IACF,CAAC;IAED,WAAW;QACV,GAAG,CAAC,CAAC,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACjC,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC;gBAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QACnD,CAAC;IACF,CAAC;IAED,SAAS;QACR,IAAI,MAAgB,CAAC;QACrB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;YAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC;QACrD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;YAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC;QACxD,IAAI;YAAC,MAAM,0BAA0B,CAAC;QACtC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC;IAED,KAAK;QACJ,GAAG,CAAC,CAAC,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC;YAAC,KAAK,CAAC,KAAK,EAAE,CAAC;IAChD,CAAC;CACD;AAAA;AAAA;AAGD;;GAEG;AACG;IAKL,YAAY,EAAgB,EAAE,IAAS,EAAE,IAAgB;QACxD,IAAI,CAAC,MAAM,GAAG,IAAI,WAAW,EAAE,CAAC;QAChC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,CAAC,CAAC;QAChE,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;IACnB,CAAC;IAED,MAAM,CAAC,IAAY,EAAE,WAAmB,CAAC,EAAE,IAAa;QACvD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;QACxC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACtB,CAAC;IAED,OAAO,CAAC,IAAY,EAAE,WAAmB,CAAC,EAAE,IAAa;QACxD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;QACzC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;IACnB,CAAC;IAED,KAAK;QACJ,0EAA0E;QAC1E,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;YAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;IACrB,CAAC;CACD;AAAA;AAAA;AAGD,mDAAmD;AAEnD,mBAAoB,SAAQ,wDAAQ;IAEnC,YAAmB,EAAU;QAC5B,KAAK,EAAE,CAAC;QADU,OAAE,GAAF,EAAE,CAAQ;QAD7B,WAAM,GAAe,EAAE,CAAC;IAGxB,CAAC;IACD,SAAS;QACR,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;IACpB,CAAC;CACD;AAED;IAAA;QACC,UAAK,GAAoB,EAAE,CAAC;IA4C7B,CAAC;IAzCA,IAAI,CAAC,EAAgB,EAAE,IAAS,EAAE,IAAe;QAChD,MAAM,KAAK,GAAG,IAAI,qDAAK,CAAC,EAAE,CAAC,CAAC;QAC5B,gCAAgC;QAChC,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,GAAG,CAAC,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC;YAC3B,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,aAAa,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5C,gCAAgC;QAChC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE;YACzC,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACzC,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBAChC,EAAE,CAAC,CAAC,KAAK,CAAC;oBAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YACxC,CAAC;QACF,sBAAsB;QACtB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC5C,MAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACnC,EAAE,CAAC,CAAC,IAAI,IAAI,KAAK,CAAC;gBACjB,KAAK,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;YAC/C,IAAI;gBACH,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;YACzC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACtD,CAAC;QACD,qCAAqC;QACrC,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC;YAC5B,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC;gBAC5B,KAAK,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAC/B,0CAA0C;QAC1C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,MAAM,CAAC,KAAK,CAAC;IACd,CAAC;IAED,QAAQ,CAAC,EAAU;QAClB,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC;YAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC;QACjC,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAED,KAAK;QACJ,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC;YAC7B,GAAG,CAAC,CAAC,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC;gBAC/B,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IAC3C,CAAC;CACD;;;;;;;;;;;;;;;;;;AC5JD;AAAA;;GAEG;AAEyC;AACG;AACH;AAG5C,MAAM,WAAW,GAAsB,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7D,MAAM,EAAE,GAAG,kBAAkB,EAAE,CAAC;AAChC,MAAM,OAAO,GAAG,IAAI,iEAAO,CAAC,EAAE,EAAE,WAAW,EAC1C,CAAC,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;AAElE,MAAM,OAAO,GAAG,WAAW,EAAE,CAAC;AAE9B;IACC,MAAM,QAAQ,GAAQ,MAAM,CAAC,YAAY,IAAI,MAAM,CAAC,kBAAkB,CAAC;IACvE,MAAM,CAAC,IAAI,QAAQ,EAAE,CAAC;AACvB,CAAC;AAED;IACC,YAAY,EAAE,CAAC;IACf,MAAM,MAAM,GAAG,IAAI,qEAAU,CAAC,OAAO,CAAC,CAAC;IACvC,MAAM,OAAO,GAAG,IAAI,iEAAO,CAAC,OAAO,CAAC,CAAC;IACrC,OAAO,CAAC,UAAU,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACnF,OAAO,CAAC,SAAS,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACnE,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC;AACxB,CAAC;AAGD;IACC,CAAC,CAAC;QACD,IAAI,IAAI,GAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;QAC3B,IAAI,CAAC,YAAY,CAAC,EAAE,oBAAoB,EAAE,IAAI,EAAE,CAAC,CAAC;IACnD,CAAC,CAAC,CAAC;AACJ,CAAC;;;;;;;;;;;;;;ACpCmD;AACH;AACY;AACnB;AAE1C;;;GAGG;AACG;IAOL,YAAY,EAAgB,EAAE,WAA8B,EAAE,QAAgB,EAAE,KAAa,EAAE,KAAa;QAC3G,IAAI,CAAC,EAAE,GAAG,IAAI,qDAAK,CAAC,WAAW,CAAC,CAAC;QACjC,IAAI,CAAC,EAAE,CAAC,OAAO,GAAG,IAAI,iBAAiB,CAAC,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;QACtE,IAAI,CAAC,KAAK,GAAG,IAAI,2DAAK,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,aAAa,EAAE,CAAC;IACtB,CAAC;IAED,aAAa;QACZ,qCAAqC;QACrC,MAAM,GAAG,GAAG,IAAI,oDAAI,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;QACtC,GAAG,CAAC,IAAI,GAAG,IAAI,aAAa,CAAC,GAAG,CAAC,CAAC;QAClC,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;QACnE,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;QAC9B,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;QACjC,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;IAC9B,CAAC;IAED,sBAAsB;QACrB,IAAI,IAAI,GAAG,IAAI,CAAC,CAAC,uCAAuC;QACxD,CAAC,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,UAAS,GAAG;YACrC,IAAI,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;YACnB,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YACzC,IAAI,OAAO,GAAG,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC;YAC9D,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;gBAAC,MAAM,CAAC;YAClB,IAAI,CAAC,OAAO,CAAC,IAAI,EAChB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,IAAI,EAAE,EAAE,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QACrD,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,OAAO,CAAC,IAAY,EAAE,IAAY,EAAE,OAAe;QAClD,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACnC,MAAM,CAAC,GAAG,IAAI,oDAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/B,IAAI,CAAC,cAAc,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;QAC7B,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;QAC5B,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACvB,CAAC;IAED,UAAU,CAAC,CAAO;QACjB,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACvB,CAAC;IAED,cAAc,CAAC,IAAc;QAC5B,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAED,cAAc,CAAC,CAAO,EAAE,IAAY;QACnC,CAAC,CAAC,IAAI,GAAG,IAAI,aAAa,CAAC,CAAC,CAAC,CAAC;QAC9B,EAAE,CAAC,CAAC,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;YACjE,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;QAC7B,CAAC;QACD,IAAI;YACH,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACxC,CAAC;IAED,wEAAwE;IAExE,YAAY;QACX,IAAI,OAAO,GAAG,CAAC,CAAC;QAChB,MAAM,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC;QACrC,MAAM,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;QACtC,IAAI,CAAC,GAAG,OAAO,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,GAAG,OAAO,GAAG,CAAC,CAAC;QACpB,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,OAAO,GAAG,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC;YACpD,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,OAAO,GAAG,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC;gBACpD,MAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;gBAC3C,EAAE,CAAC,CAAC,IAAI,GAAG,OAAO,IAAI,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC1C,CAAC,GAAG,EAAE,CAAC;oBACP,CAAC,GAAG,EAAE,CAAC;oBACP,OAAO,GAAG,IAAI,CAAC;gBAChB,CAAC;YACF,CAAC;QACF,CAAC;QACD,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;IACjB,CAAC;IAED,gBAAgB,CAAC,CAAS,EAAE,CAAS;QACpC,IAAI,OAAO,GAAG,MAAM,CAAC,SAAS,CAAC;QAC/B,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;YAC/B,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACnB,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACnB,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAC,EAAE,GAAG,EAAE,GAAC,EAAE,CAAC,CAAC;YACtC,EAAE,CAAC,CAAC,IAAI,GAAG,OAAO,CAAC;gBAAC,OAAO,GAAG,IAAI,CAAC;QACpC,CAAC;QACD,MAAM,CAAC,OAAO,CAAC;IAChB,CAAC;IAED,kBAAkB,CAAC,CAAO;QACzB,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QACtC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;IACxC,CAAC;CAED;AAAA;AAAA;AAMyC;AACC;AAG3C,mBAAoB,SAAQ,8DAAQ;IAEnC,YAAY,IAAU;QACrB,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IAClB,CAAC;IACD,SAAS;QACR,MAAM,MAAM,GAAe,EAAE,CAAC;QAC9B,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YAClC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACvB,MAAM,CAAC,MAAM,CAAC;IACf,CAAC;CACD;AAED;IAQC,YAAY,OAAgB,EAAE,QAAgB,EAAE,KAAa,EAAE,KAAa;QAC3E,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,UAAU,GAAG,eAAe,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACpD,IAAI,CAAC,cAAc,GAAG,eAAe,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QAC7D,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,QAAQ,GAAG,IAAI,gEAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IACjD,CAAC;IAED,kBAAkB,CAAC,IAAiB;QACnC,CAAC,CAAC,wEAAS,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,GAAQ,EAAE,EAAE;YACvC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,IAAI,CAAC,IAAI,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;gBAAC,MAAM,CAAC;YACtE,EAAE,CAAC,CAAC,6DAAa,CAAC;gBAAC,MAAM,CAAC;YAC1B,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;YAC5C,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC;gBAAC,MAAM,CAAC;YAC1B,EAAE,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC;gBAAC,MAAM,CAAC;YACpC,8DAAc,CAAC,cAAc,EAC5B,8BAA8B,EAAE,SAAS,CAAC,EAAE;gBAC5C,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;oBAAC,MAAM,CAAC;gBACvB,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;gBACtC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;YACvB,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,eAAe;QACd,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC;YACxC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC;QACpD,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAED,cAAc,CAAC,KAAe;QAC7B,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC;aAC/C,MAAM,CAAC,KAAK,CAAC,EAAE,CAAO,KAAM,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,UAAU,CAAC,CAAC;QACnE,MAAM,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;IAC3B,CAAC;IAED,wFAAwF;IACxF,WAAW,CAAC,CAAO;QAClB,MAAM,IAAI,GAAa,CAAC,CAAC,IAAI,CAAC;QAC9B,MAAM,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;IAC3C,CAAC;IAED,UAAU,CAAC,GAAS,EAAE,GAAS;QAC9B,MAAM,OAAO,GAAa,GAAG,CAAC,IAAI,CAAC;QACnC,MAAM,OAAO,GAAa,GAAG,CAAC,IAAI,CAAC;QACnC,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC;YAC3B,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QACrC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,cAAc,GAAG,CAAC,CAAC;IACzC,CAAC;IAED,SAAS,CAAC,GAAS,EAAE,GAAS;QAC7B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;QACpD,mDAAmD;IACpD,CAAC;IAED,YAAY,CAAC,GAAS,EAAE,GAAS;QAChC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;IAED,YAAY,CAAC,CAAO;QACnB,MAAM,IAAI,GAAa,CAAC,CAAC,IAAI,CAAC;QAC9B,uEAAY,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IACnC,CAAC;IAED,WAAW,CAAC,CAAO;QAClB,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC;IAED,aAAa,CAAC,GAAS,EAAE,GAAS;QACjC,MAAM,OAAO,GAAa,GAAG,CAAC,IAAI,CAAC;QACnC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;IACxE,CAAC;IAED,SAAS,CAAC,CAAO;QAChB,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;IACjD,CAAC;IAED,SAAS,CAAC,CAAO,EAAE,IAAS;QAC3B,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;IAChD,CAAC;IAED,WAAW;QACV,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IAC7C,CAAC;IAED,UAAU,KAAI,CAAC;CACf;AAGD,yBAAyB,SAAiB,EAAE,QAAgB;IAC3D,MAAM,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;IAC3C,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACtB,MAAM,SAAS,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IACpC,GAAG,CAAC,MAAM,EAAE,CAAC;IACb,MAAM,CAAC,SAAS,CAAC;AAClB,CAAC;;;;;;;;AC/OD,MAAM,SAAS,GAAG,EAAE,CAAC;AACrB,MAAM,SAAS,GAAG,EAAE,CAAC;AAErB;;GAEG;AACG;IAUL,YAAY,MAAyB;QANrC,UAAK,GAAW,EAAE,CAAC;QAInB,WAAM,GAAW,CAAC,CAAC;QAGlB,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC;YAAC,MAAM,CAAC;QAClC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QAC1C,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,MAAM,EAAE,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACnC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YAAC,MAAM,CAAC;QAChB,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,IAAI,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC;QACjD,IAAI,CAAC,aAAa,GAAG,IAAI,gBAAgB,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACpD,IAAI,CAAC,OAAO,GAAG,IAAI,mBAAmB,EAAE,CAAC;IAC1C,CAAC;IAED,OAAO,CAAC,CAAO,EAAE,OAAgB;QAChC,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;QACrB,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC;aACpB,QAAQ,CAAC,MAAM,CAAC;aAChB,IAAI,CAAC,0BAA0B,CAAC,CAAC,IAAI,QAAQ,CAAC;aAC9C,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC,CAAC;QAClD,EAAE,CAAC,CAAC,OAAO,CAAC;YAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;QAClC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACnB,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,IAAI,EAAE,CAAC;IACb,CAAC;IAED,UAAU,CAAC,CAAO;QACjB,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAClC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YACX,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,4BAA4B,CAAC,CAAC;QAClE,GAAG,CAAC,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YAC7B,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;gBAAC,QAAQ,CAAC;YACtB,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YACvB,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACxB,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QAC1B,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;QACnB,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAC5B,IAAI,CAAC,IAAI,EAAE,CAAC;IACb,CAAC;IAED,UAAU,CAAC,CAAO;QACjB,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IAClC,CAAC;IAED,OAAO,CAAC,IAAU,EAAE,IAAU;QAC7B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC3E,MAAM,CAAC,KAAK,CAAC;QACd,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACpB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACnC,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAED,UAAU,CAAC,IAAU,EAAE,IAAU;QAChC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QAC1C,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACtC,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAED,IAAI;QACH,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;IACvB,CAAC;IAED,MAAM;QACL,MAAM,SAAS,GAAG,EAAE,CAAC;QACrB,MAAM,YAAY,GAAG,EAAE,CAAC;QACxB,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YAC/B,MAAM,UAAU,GAAG,EAAE,CAAC;YACtB,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC;gBAC7B,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YACzB,SAAS,CAAC,IAAI,CAAC;gBACd,EAAE,EAAE,IAAI,CAAC,EAAE;gBACX,CAAC,EAAE,IAAI,CAAC,CAAC;gBACT,CAAC,EAAE,IAAI,CAAC,CAAC;gBACT,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,MAAM,EAAE,UAAU;gBAClB,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;aACjC,CAAC,CAAC;YACH,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;QACjD,CAAC;QACD,MAAM,SAAS,GAAG;YACjB,KAAK,EAAE,SAAS;YAChB,QAAQ,EAAE,YAAY;SACtB;QACD,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;QAC1B,MAAM,CAAC,SAAS,CAAC;IAClB,CAAC;IAED,QAAQ,CAAC,IAAS;QACjB,+BAA+B;QAC/B,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC;YAC3B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAChC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,iBAAiB;QACjB,GAAG,CAAC,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YAC7B,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC;YAC3C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACnB,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,qDAAqD;YACtE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;QACxC,CAAC;QACD,oBAAoB;QACpB,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;QACxB,IAAI,CAAC,OAAO,GAAG,IAAI,mBAAmB,EAAE,CAAC,CAAC,wBAAwB;QAClE,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC5C,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACzC,MAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBAChC,EAAE,CAAC,CAAC,GAAG,CAAC;oBAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3C,CAAC;QACF,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,CAAC,wBAAwB;QAC3C,sBAAsB;QACtB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC5C,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QACzD,CAAC;QACD,qCAAqC;QACrC,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC;YAC5B,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC;gBAC5B,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QACnC,kCAAkC;QAClC,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;IAC5B,CAAC;IAED,QAAQ,CAAC,EAAU;QAClB,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC;YAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC;QACjC,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAED,aAAa,CAAC,CAAO;QACpB,MAAM,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACpD,MAAM,MAAM,GAAG,EAAE,CAAC;QAClB,GAAG,CAAC,CAAC,MAAM,KAAK,IAAI,OAAO,CAAC,CAAC,CAAC;YAC7B,EAAE,CAAC,CAAC,KAAK,IAAI,UAAU,CAAC;gBAAC,QAAQ,CAAC;YAClC,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,KAAK,CAAC;gBAAC,QAAQ,CAAC;YAC1C,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACpB,CAAC;QACD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACzB,CAAC;CACD;AAAA;AAAA;AAED;;;GAGG;AACG;IAWL,YAAY,CAAS,EAAE,CAAS,EAAE,IAAY;QAN9C,WAAM,GAAW,EAAE,CAAC;QAOnB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QACX,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QACX,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IACjE,CAAC;IAED,QAAQ,CAAC,CAAO;QACf,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC;IAED,WAAW,CAAC,CAAO;QAClB,MAAM,GAAG,GAAW,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAC3C,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QAC1B,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QAC3B,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;CAED;AAAA;AAAA;AAqBD,8DAA8D;AAE9D,sDAAsD;AACtD;IACC,WAAW,CAAC,CAAO,IAAa,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IAC9C,UAAU,CAAC,GAAS,EAAE,GAAS,IAAa,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IAC1D,SAAS,CAAC,GAAS,EAAE,GAAS,IAAS,CAAC;IACxC,YAAY,CAAC,GAAS,EAAE,GAAS,IAAQ,CAAC;IAC1C,YAAY,CAAC,CAAO,IAAS,CAAC;IAC9B,WAAW,CAAC,CAAO,IAAS,CAAC;IAC7B,aAAa,CAAC,GAAS,EAAE,GAAS,IAAY,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;IAC/D,SAAS,CAAC,CAAO,IAAS,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;IACtC,SAAS,CAAC,CAAO,EAAE,IAAS,IAAS,CAAC;IACtC,WAAW,KAAU,CAAC;IACtB,UAAU,KAAU,CAAC;CACrB;AAED;;;GAGG;AACH;IAOC,YAAY,KAAY,EAAE,EAA4B;QAHtD,aAAQ,GAAG,KAAK,CAAC;QAIhB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;IACrC,CAAC;IAED,YAAY,CAAC,CAAO;QACb,CAAC,CAAC,OAAQ,CAAC,SAAS,CAAC;YAC1B,WAAW,EAAE,QAAQ;YACrB,QAAQ,EAAE,CAAC;YACX,KAAK,EAAE,OAAO;YACd,IAAI,EAAE,CAAC,KAAY,EAAE,EAAO,EAAE,EAAE;gBAC/B,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC;gBACvB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC;gBACtB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YACnB,CAAC;YACD,KAAK,EAAE,CAAC,KAAY,EAAE,EAAO,EAAE,EAAE;gBAChC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YACjC,CAAC;YACD,IAAI,EAAE,CAAC,KAAY,EAAE,EAAO,EAAE,EAAE;gBAC/B,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;gBACnC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACvB,CAAC;SACD,CAAC,CAAC;QACH,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;YACnB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAAC,MAAM,CAAC;YAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,CAAC;gBAAC,MAAM,CAAC;YACnC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,UAAU,CAAC,CAAO;QACjB,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC;YACrB,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;QACnD,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;QAC/B,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;IACpC,CAAC;IAED,mBAAmB,CAAC,IAAwB;QAC3C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;YAAC,MAAM,CAAC;QAClB,IAAI,IAAiB,CAAC;QACtB,IAAI,UAAU,GAAG,KAAK,CAAC;QACvB,OAAO,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC;eACpC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,MAAM;YACxC,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC;QAC3B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;YAAC,MAAM,CAAC;QAClB,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;YACrB,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,SAAS,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;YAC5D,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,SAAS,IAAI,UAAU,CAAC;gBAAC,MAAM,CAAC;YACnD,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC,CAAC;YACxD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;gBAAC,MAAM,CAAC;YAClB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC3C,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;gBAC1C,MAAM,CAAC;YACR,CAAC;YACD,UAAU,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;QAClC,CAAC,CAAC;aACD,KAAK,CAAC,GAAG,CAAC,EAAE;YACZ,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,SAAS,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACxD,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,SAAS,CAAC;gBAAC,MAAM,CAAC;YACrC,UAAU,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAC/B,MAAM,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC,CAAC;YAC9D,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC;gBAAC,MAAM,CAAC;YAClC,EAAE,CAAC,CAAC,IAAI,CAAC;gBAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC/C,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;QACnB,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,OAAO,CAAC,IAAS;QAChB,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;IAC3E,CAAC;IAED,mBAAmB,CAAC,IAAU,EAAE,IAAU;QACzC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAAC,MAAM,CAAC;QAC9C,IAAI;YAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACrC,CAAC;IAED,oBAAoB;QACnB,MAAM,OAAO,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;QAC5B,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QACrC,MAAM,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;QAClD,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAAC,MAAM,CAAC,MAAM,CAAC;QAC3C,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;QAC7D,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAED,qBAAqB,CAAC,IAAU;QAC/B,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;QAC3C,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;YAAC,MAAM,CAAC;QACjB,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;QAChC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QACX,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QACX,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,CAAC,EAAE;YAC9C,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;gBAAC,MAAM,CAAC;YACjB,IAAI,IAAI,GAAG,GAAG,CAAC,OAAO,IAAI,CAAC,CAAC;YAC5B,IAAI,IAAI,GAAG,GAAG,CAAC,OAAO,IAAI,CAAC,CAAC;YAC5B,IAAI,CAAC,CAAC,GAAG,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;YACzB,IAAI,CAAC,CAAC,GAAG,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC;YACvD,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YAClB,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC;YACf,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC1B,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC3C,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC,CAAC,CAAC;QACH,gBAAgB;QAChB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;QACjD,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;QAC/D,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAChC,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;gBACxD,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;IAC1C,CAAC;IAED,uBAAuB;QACtB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;QACxC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;QAC7D,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACvC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;IAC7B,CAAC;IAED,cAAc,CAAC,MAAqB;QACnC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QACzB,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAChC,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC;gBAAC,MAAM,CAAC,CAAC,CAAC;QACzC,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;CACD;AASD;;GAEG;AACH;IAQC,YAAY,KAAY,EAAE,EAA4B,EAAE,MAAyB;QAHjF,iBAAY,GAAG,EAAE,CAAC;QAIjB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;IAC1B,CAAC;IAED,IAAI;QACH,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC;QACtB,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC;YAC7B,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC;gBAC9B,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAC9B,CAAC;IAED,WAAW;QACV,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAChE,CAAC;IAED,SAAS,CAAC,OAAa,EAAE,OAAa;QACrC,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAC7C,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAC7C,IAAI,CAAC,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACzE,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;QACpB,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;QACvC,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;QACvC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QACtC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;QACpB,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC;IAClB,CAAC;IAED,YAAY,CAAC,GAAU,EAAE,GAAU;QAClC,MAAM,OAAO,GAAG,GAAG,CAAC;QACpB,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;QAC7C,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;QAC7C,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QACrD,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QACvB,IAAI,CAAC,EAAE,CAAC,MAAM,CACb,EAAE,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,GAAC,CAAC,CAAC,EACpD,EAAE,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,GAAC,CAAC,CAAC,CACpD,CAAC;QACF,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QACvB,IAAI,CAAC,EAAE,CAAC,MAAM,CACb,EAAE,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,GAAC,CAAC,CAAC,EACpD,EAAE,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,GAAC,CAAC,CAAC,CACpD,CAAC;IACH,CAAC;IAED,aAAa,CAAC,CAAO;QACpB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAC5D,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAC7D,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;IAC/C,CAAC;CACD;;;;;;;;;;;;ACnbwD;AACnB;AACI;AAE1C;;GAEG;AACG,sBAAuB,KAAe,EAAE,KAAa;IAC1D,KAAK,CAAC,KAAK,EAAE,CAAC;IACd,MAAM,KAAK,GAAa,EAAE,CAAC;IAC3B,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,IAAI,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC;QAClD,IAAI,GAAG,GAAG,kBAAkB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QAC3C,EAAE,CAAC,CAAC,GAAG,CAAC;YAAC,KAAK,CAAC,IAAI,EAAE,CAAC;IACvB,CAAC;IACD,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC;IACvD,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC;QAAC,MAAM,CAAC;IAC/B,GAAG,CAAC,CAAC,MAAM,KAAK,IAAI,MAAM,CAAC;QAC1B,EAAE,CAAC,CAAO,KAAK,CAAC,KAAM,CAAC,KAAK,CAAC,YAAY,UAAU,CAAC,CAAC,CAAC;YACrD,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;QACxE,CAAC;QACD,IAAI,CAAC,CAAC;YACL,IAAI,GAAG,GAAG,gBAAgB,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;YACrE,EAAE,CAAC,CAAC,GAAG,CAAC;gBAAC,KAAK,CAAC,IAAI,EAAE,CAAC;QACvB,CAAC;IACF,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;AAC7B,CAAC;AAGD,uBAAuB,KAAa,EAAE,KAAe;IACpD,MAAM,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IAC9B,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IACjC,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAC1D,IAAI,CAAC,GAAG,GAAG,CAAC;IACZ,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC;QACzB,GAAG,CAAC,GAAG,CAAC;YACP,QAAQ,EAAE,UAAU;YACpB,IAAI,EAAE,CAAC;SACP,CAAC,CAAC;QACH,CAAC,IAAI,GAAG,CAAC;IACV,CAAC;AACF,CAAC;AAED,0BAA0B,KAAgB,EAAE,IAAa,EAAE,KAAa,EAAE,KAAa;IACtF,MAAM,IAAI,GAAiB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC9C,MAAM,MAAM,GAAc,KAAM,CAAC,KAAK,CAAC,CAAC;IACxC,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;IACtD,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE;QAC7D,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;QACrB,MAAM,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;IAC1B,CAAC,CAAC,CAAC;AACJ,CAAC;AAED,4BAA4B,KAAe,EAAE,KAAa;IACzD,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC;QAAC,MAAM,CAAC,IAAI,CAAC;IACtC,MAAM,KAAK,GAAG,WAAW,CAAC,KAAK,EAAE,KAAK,CAAC,aAAa,EAAE,KAAK,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC;IACzF,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;QAChB,EAAE,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC;YACtB,KAAK,CAAC,KAAK,CAAC,UAAU,CAAO,KAAK,CAAC,aAAc,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;QACxE,KAAK,CAAC,YAAY,GAAG,EAAE,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QACtC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAO,KAAK,CAAC,aAAc,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;IACrE,CAAC,CAAC,CAAC;IACH,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;AACvB,CAAC;AAED,MAAM,mBAAmB,GAAG;IAC3B,gBAAgB;IAChB,eAAe;CACf,CAAC;AAEF,0BAA0B,KAAU,EAAE,IAAa,EAClD,KAAa,EAAE,KAAa;IAC5B,MAAM,IAAI,GAAiB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC9C,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;QAClB,MAAM,KAAK,GAAG,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;QAC7E,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;YAChB,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC5B,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;IACvB,CAAC;IACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,SAAS,CAAC;QAC9B,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;IACtF,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,OAAO,IAAI,SAAS,CAAC;QACzC,MAAM,CAAC,aAAa,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;IACjE,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;QACtB,MAAM,CAAO,mBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;IACtG,MAAM,CAAC,IAAI,CAAC;AACb,CAAC;AAGD,sBAAsB,KAAa,EAAE,IAAkB,EACtD,KAAa,EAAE,KAAa,EAAE,QAAiC;IAC/D,MAAM,SAAS,GAAG,CAAC,CAAC,0BAA0B,CAAC,CAAC;IAChD,MAAM,MAAM,GAAG,CAAC,CAAC,wCAAwC,CAAC;SACxD,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;SACd,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;SACd,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC;SACnB,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IAC1C,MAAM,QAAQ,GAAG,CAAC,CAAC,uBAAuB,CAAC;SACzC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;SAC1B,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;SAC1B,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IACzC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAC3B,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACzB,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,aAAa,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;IAChE,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;IACxB,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;QACtB,MAAM,KAAK,GAAG,YAAY,CAAC,UAAU,CAAC,EAAE,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAChE,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;QACtC,QAAQ,CAAC,KAAK,CAAC,CAAC;IACjB,CAAC,CAAC,CAAC;IACH,QAAQ,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;QACxB,MAAM,KAAK,GAAG,UAAU,CAAC,EAAE,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;QAC9C,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAAC,MAAM,CAAC;QACzB,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;QACtC,QAAQ,CAAC,KAAK,CAAC,CAAC;IACjB,CAAC,CAAC,CAAC;IACH,MAAM,CAAC,SAAS,CAAC;AAClB,CAAC;AAED,qBAAqB,KAAa,EAAE,OAAiB,EAAE,QAAgB,EAAE,KAAa;IACrF,MAAM,SAAS,GAAG,CAAC,CAAC,0BAA0B,CAAC,CAAC;IAChD,MAAM,KAAK,GAAG,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;IAC9D,GAAG,CAAC,CAAC,MAAM,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC;QAC9B,MAAM,MAAM,GAAG,CAAC,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC1C,EAAE,CAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;QAC5D,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACtB,CAAC;IACD,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACxB,KAAK,CAAC,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC,CAAC;IAClC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;IACxB,MAAM,CAAC,KAAK,CAAC;AACd,CAAC;AAED,uBAAuB,KAAa,EAAE,IAAkB,EAAE,KAAa,EACtE,KAAU,EAAE,KAAa;IACzB,MAAM,GAAG,GAAG,CAAC,CAAC,0BAA0B,CAAC,CAAC;IAC1C,MAAM,MAAM,GAAG,CAAC,CAAC,yEAAyE,CAAC,CAAC;IAC5F,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACnB,MAAM,CAAC,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC,CAAC;IACnC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAClB,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAClB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACvB,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC1B,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;IACrC,CAAC;IACD,IAAI,CAAC,CAAC;QACL,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACxB,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAC7B,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;IACtC,CAAC;IACD,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;QAChB,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC7B,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;IACpD,CAAC,CAAC,CAAC;IACH,MAAM,CAAC,GAAG,CAAC;AACZ,CAAC;AAGD,sBAAsB,UAAkB,EAAE,IAAkB;IAC3D,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;IACxB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;IACxB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QACf,MAAM,CAAC,CAAC,UAAU,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;IACzC,IAAI;QACH,MAAM,CAAC,yEAAU,CAAC,UAAU,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAC1C,CAAC;AAED,sBAAsB,WAAmB,EAAE,IAAkB;IAC5D,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;IACxB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;IACxB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QACf,MAAM,CAAC,GAAG,GAAG,WAAW,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;IACxC,IAAI;QACH,MAAM,CAAC,yEAAU,CAAC,WAAW,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAC3C,CAAC;AAGD,sEAAsE;AAEtE,0BAA0B,KAAa,EAAE,IAAkB,EAC1D,KAAU,EAAE,KAAa,EAAE,KAAa;IACxC,MAAM,GAAG,GAAG,CAAC,CAAC,0BAA0B,CAAC,CAAC;IAC1C,MAAM,MAAM,GAAG,CAAC,CAAC;;;;;UAKR,CAAC,CAAC;IACX,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACnB,MAAM,CAAC,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC,CAAC;IACnC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAClB,IAAI,OAAO,GAAG,IAAI,CAAC;IACnB,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;QACjC,uCAAuC;QACvC,sEAAsB,CAAC,GAAG,EAAE,SAAS,CAAC,EAAE;YACvC,KAAK,CAAC,UAAU,CAAC,GAAG,SAAS,CAAC;YAC9B,KAAK,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC,MAAW,EAAE,EAAE;gBACxD,KAAK,CAAC,SAAS,CAAC,GAAG,MAAM,CAAC;gBAC1B,OAAO,GAAG,KAAK,CAAC;gBAChB,uDAAuD;gBACvD,4DAAY,EAAE,CAAC;YAChB,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QACH,sBAAsB;QACtB,UAAU,CAAC,CAAC,CAAC,EAAE;YACd,EAAE,CAAC,CAAC,OAAO,CAAC;gBACX,+DAAe,CAAC,oCAAoC,CAAC,CAAC;QACxD,CAAC,EAAE,GAAG,CAAC,CAAC;IACT,CAAC,CAAC,CAAC;IACH,MAAM,CAAC,GAAG,CAAC;AACZ,CAAC;AAED,yBAAyB,KAAa,EAAE,KAAe;IACtD,KAAK,CAAC,KAAK,EAAE,CAAC;IACd,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,KAAK,CAAC;QACxB,KAAK,CAAC,MAAM,CAAC,UAAU,GAAG,IAAI,GAAG,WAAW,CAAC,CAAC;AAChD,CAAC;AAED,yBAAyB,KAAa,EAAE,IAAkB,EACzD,KAAU,EAAE,KAAa,EAAE,KAAa;IACxC,MAAM,KAAK,GAAG,WAAW,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,SAAS,CAAC,CAAC;IACpD,KAAK,CAAC,GAAG,CAAC;QACT,YAAY,EAAE,MAAM,EAAE,UAAU,EAAE,OAAO;QACzC,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO;QAC/B,SAAS,EAAE,MAAM;KACjB,CAAC,CAAC;IACH,MAAM,OAAO,GAAG,CAAC,CAAC;;;;;;;;gBAQH,CAAC,CAAC;IACjB,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IACrB,MAAM,IAAI,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC;IAC/B,MAAM,IAAI,GAAG,KAAK,CAAC,iBAAiB,CAAC,CAAC;IACtC,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC;IAC9B,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IAC9B,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;QAClC,uCAAuC;QACvC,sEAAsB,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,EAAE;YAC9C,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpB,KAAK,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,EACrC,CAAC,MAAW,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACrC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACtB,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IACH,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;QACrC,MAAM,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;QACvC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YAAC,MAAM,CAAC;QACpB,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QACnD,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IAC/B,CAAC,CAAC,CAAC;IACH,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;AACvB,CAAC;AAED,0DAA0D;AAE1D,iBAAiB,GAAW;IAC3B,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AAChD,CAAC;AAED,uBAAuB,CAAS,EAAE,GAAW;IAC5C,IAAI,CAAC,GAAW,EAAE,GAAG,CAAC,CAAC;IACvB,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IACrB,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC;QAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;IACxD,IAAI;QAAC,MAAM,CAAC,CAAC,CAAC;AACf,CAAC;;;;;;;;AC/QD;;GAEG;AACG;IAUL,YAAY,KAAa,EAAE,KAAa;QACvC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC1C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC7C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC1C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IAC9C,CAAC;IAED,YAAY,CAAC,KAAa;QACzB,MAAM,QAAQ,GAAG,CAAC,CAAC,kBAAkB,KAAK,CAAC,KAAK,EAAE,aAAa,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QACnF,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QACvB,MAAM,MAAM,GAAsB,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC9C,MAAM,CAAC,MAAM,CAAC;IACf,CAAC;IAED,kBAAkB,CAAC,EAAgB;QAClC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;YAAC,MAAM,CAAC;QACvB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,cAAc,EAAE,CAAC;QACjC,IAAI,CAAC,OAAO,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAClD,IAAI,CAAC,OAAO,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IACnD,CAAC;IAED,OAAO,CAAC,KAAgB;QACvB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACvC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/B,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC9B,CAAC;IAED,UAAU;QACT,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;YAAC,MAAM,CAAC;QACxB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACnB,CAAC;IAED,qBAAqB;QACpB,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;IACxD,CAAC;IACD,YAAY;QACX,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;YAAC,MAAM,CAAC;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;YACd,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;QACnE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;YACd,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;QACnE,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC9B,CAAC;IAED,OAAO,CAAC,EAA4B,EAAE,MAAyB,EAC7D,IAAgB,EAAE,KAAa;QAChC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QACvD,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QACtC,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC;QAC5C,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,4DAA4D;QAC5D,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;YAC5B,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5B,CAAC,IAAI,EAAE,CAAC;YACR,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAC,GAAG,CAAC,CAAC;QACjC,CAAC;QACD,EAAE,CAAC,MAAM,EAAE,CAAC;QACZ,EAAE,CAAC,SAAS,EAAE,CAAC;IAChB,CAAC;IAED,OAAO,CAAC,EAA4B,EAAE,MAAyB,EAC9D,IAAgB,EAAE,KAAa;QAC/B,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QACvD,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;QACvC,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;QACpB,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,OAAO,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,GAAC,CAAC;YAAE,CAAC,EAAE,CAAC;QAC/C,OAAO,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,GAAC,CAAC;YAAE,CAAC,EAAE,CAAC;QAC/C,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC;QAC/C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;YAC5B,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5B,CAAC,IAAI,EAAE,CAAC;YACR,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAC,GAAG,CAAC,CAAC;QACzB,CAAC;QACD,EAAE,CAAC,MAAM,EAAE,CAAC;QACZ,EAAE,CAAC,SAAS,EAAE,CAAC;IAChB,CAAC;IAED,SAAS,CAAC,EAA4B,EAAE,MAAyB,EAChE,IAAgB,EAAE,KAAa;QAC/B,MAAM,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC;QACvB,MAAM,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;QACxB,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACzB,EAAE,CAAC,SAAS,EAAE,CAAC;QACf,EAAE,CAAC,WAAW,GAAG,KAAK,CAAC;QACvB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACf,CAAC;CACD;AAAA;AAAA;;;;;;;;;;;;;AC1GqC;AACA;AACE;AACI;AAIK;AAEjD,MAAM,UAAU,GAAG,CAAC,CAAC;AAErB;;;;;;GAMG;AACG;IAQL,YAAY,OAAgB;QAC3B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QAClB,oBAAoB;QACpB,IAAI,KAAK,GAAG,IAAI,6DAAa,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC3C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QAC9D,KAAK,CAAC,OAAO,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QAChE,gCAAgC;QAChC,KAAK,CAAC,MAAM,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;QACnC,KAAK,CAAC,OAAO,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;QACrC,oBAAoB;QACpB,IAAI,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QACrC,qCAAqC;QACrC,EAAE,CAAC,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;QAC7B,KAAK,CAAC,aAAa,GAAG,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzD,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;QACnC,oBAAoB;QACpB,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAC/C,sBAAsB;QACtB,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;IAC/B,CAAC;IAED,eAAe,CAAC,KAAoB;QACnC,IAAI,EAAE,GAAG,IAAI,2DAAQ,CAAC,QAAQ,CAAC,CAAC;QAChC,EAAE,CAAC,MAAM,GAAG,CAAC,IAAI,EAAE,EAAE;YACpB,EAAE,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,IAAI,OAAO;gBAC7C,QAAQ,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC;gBAAC,MAAM,CAAC;YAChE,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YACrC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC;QACF,EAAE,CAAC,OAAO,GAAG,CAAC,IAAI,EAAE,EAAE;YACrB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YACtC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC,CAAC;QACF,MAAM,CAAC,EAAE,CAAC;IACX,CAAC;IAED,iBAAiB,CAAC,KAAoB;QACrC,IAAI,IAAI,GAAG,IAAI,2DAAY,EAAE,CAAC;QAC9B,IAAI,CAAC,MAAM,GAAG,CAAC,IAAY,EAAE,QAAgB,EAAE,OAAe,EAAQ,EAAE;YACvE,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YACrC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC;QACF,IAAI,CAAC,OAAO,GAAG,CAAC,IAAY,EAAE,QAAgB,EAAE,OAAe,EAAQ,EAAE;YACxE,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YACtC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC,CAAC;IACH,CAAC;IAED,sBAAsB,CAAC,KAAoB;QAC1C,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC;QACnD,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,GAAG;YACrC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC;YACvC,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;gBAC1C,MAAM,IAAI,GAAa,IAAI,CAAC,IAAI,CAAC;gBACjC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC;oBACzB,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;oBAClB,KAAK,CAAC;gBACP,CAAC;YACF,CAAC;YACD,KAAK,CAAC,WAAW,CAAC,IAAI,IAAI,EAAE,MAAM,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC;IACF,CAAC;IAED,gBAAgB,CAAC,KAAoB,EAAE,EAAgB;QACtD,IAAI,CAAC,WAAW,GAAG,IAAI,iEAAW,CAAC,EAAE,CAAC,CAAC;QACvC,KAAK,CAAC,eAAe,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE;YAC9C,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC;YAC7B,IAAI,CAAC,WAAW,CAAC,OAAO,GAAG,OAAO,CAAC;YACnC,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,GAAG,CAAC;QAC5B,CAAC;QACD,IAAI,CAAC,WAAW,CAAC,MAAM;YACtB,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;QAC7D,IAAI,CAAC,WAAW,CAAC,OAAO;YACvB,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;IAC/D,CAAC;IAGD,MAAM,CAAC,IAAY,EAAE,QAAgB,EAAE,IAAa;QACnD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;QAC9C,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACf,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,GAAG,UAAU,CAAC;YAC7C,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;QAC9C,CAAC;QACD,IAAI,CAAC,CAAC;YACL,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,GAAG,UAAU,CAAC;YAChD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;QACjD,CAAC;IACF,CAAC;IAED,OAAO,CAAC,IAAY,EAAE,QAAgB,EAAE,IAAa;QACpD,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAClB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;YACb,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;QAC/C,IAAI;YACH,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;IACnD,CAAC;IAED,MAAM;QACL,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;YAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC;QACtC,IAAI,CAAC,UAAU,GAAG,IAAI,qEAAU,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC;IAC3E,CAAC;IAED,OAAO;QACN,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;IACzB,CAAC;CACD;AAAA;AAAA;;;;;;;;AC1ID,MAAM,QAAQ,GAAG,+BAA+B,CAAC;AACjD,MAAM,SAAS,GAAG,EAAE,CAAC;AAErB;;;GAGG;AACG;IAIL,YAAY,QAAQ,GAAG,MAAM;QAC5B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;QAC5B,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;IAC3B,CAAC;IAED,YAAY,CAAC,QAAgB;QAC5B,MAAM,WAAW,GAAQ,EAAE,CAAC;QAC5B,CAAC,CAAC,QAAQ,CAAC;aACV,EAAE,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE;YACpB,IAAI,KAAK,GAAG,GAAG,CAAC,OAAO,IAAI,CAAC,CAAC;YAC7B,EAAE,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBAAC,MAAM,CAAC,CAAK,mBAAmB;YACvD,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,OAAO,CAAC;gBAAC,MAAM,CAAC,CAAC,yBAAyB;YAC/E,WAAW,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;YAC1B,MAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;gBAAC,MAAM,CAAC;YACrB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACnB,CAAC,CAAC;aACD,EAAE,CAAC,OAAO,EAAE,GAAG,CAAC,EAAE;YAClB,IAAI,KAAK,GAAG,GAAG,CAAC,OAAO,IAAI,CAAC,CAAC;YAC7B,WAAW,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;YAC3B,MAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;gBAAC,MAAM,CAAC;YACrB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,QAAQ,CAAC,OAAe;QACvB,MAAM,GAAG,GAAG,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;QAC3D,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACvB,MAAM,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;IAC5B,CAAC;IAED,MAAM,CAAC,IAAY,IAAQ,CAAC;IAC5B,OAAO,CAAC,IAAY,IAAS,CAAC;CAC9B;AAAA;AAAA;;;;;;;;AC7CK;IAGL;QAFA,cAAS,GAAG,KAAK,CAAC;QAGjB,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,iBAAiB,CAAC;YAAC,MAAM,CAAC;QACzC,SAAS,CAAC,iBAAiB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;aAC5C,IAAI,CAAC,CAAC,UAAe,EAAE,EAAE;YACzB,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC;gBAAC,MAAM,CAAC;YACxC,MAAM,KAAK,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;YACtD,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC;gBAAC,MAAM,CAAC;YACnB,KAAK,CAAC,aAAa,GAAG,CAAC,GAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;YAC1D,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACvB,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,WAAW,CAAC,GAAQ;QACnB,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;QACtB,MAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACzB,MAAM,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;QAC9B,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QACrB,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QACzB,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACb,KAAK,CAAC;gBACL,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;gBACrC,KAAK,CAAC;YACP,KAAK,CAAC;gBACL,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;gBACtC,KAAK,CAAC;QACR,CAAC;IACF,CAAC;IAED,MAAM,CAAC,IAAY,EAAE,QAAgB,EAAE,OAAe,IAAS,CAAC;IAChE,OAAO,CAAC,IAAY,EAAE,QAAgB,EAAE,OAAe,IAAS,CAAC;CACjE;AAAA;AAAA;;;;;;;;;;ACjCyC;AACe;AAEzD,MAAM,UAAU,GAAG,EAAE,CAAC;AACtB,MAAM,SAAS,GAAG,EAAE,CAAC;AAErB,MAAM,cAAc,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;AAC5C,MAAM,eAAe,GAAG,CAAC,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,cAAc,CAAC,CAAC;AAClE,MAAM,gBAAgB,GAAG,CAAC,CAAC;AAC3B,MAAM,YAAY,GAAG,EAAE,CAAC;AACxB,MAAM,YAAY,GAAG,GAAG,CAAC;AAEzB,MAAM,cAAc,GAAG,CAAC,CAAC;AACzB,MAAM,cAAc,GAAG,CAAC,CAAC;AAGzB,0CAA0C;AACpC;IACL,YAAmB,YAAY,UAAU;QAAtB,cAAS,GAAT,SAAS,CAAa;IAAG,CAAC;IAE7C,UAAU,CAAC,KAAa;QACvB,MAAM,IAAI,GAAG,EAAE,CAAC;QAChB,MAAM,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAC9B,MAAM,EAAE,GAAG,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAC/B,MAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC;QACpD,MAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC;QACnD,MAAM,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnC,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QAClC,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QAClC,oBAAoB;QACpB,IAAI,IAAI,GAAG,CAAC,CAAC;QACb,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC;YACzC,MAAM,GAAG,GAAG,CAAC,CAAC,yBAAyB,CAAC,CAAC,GAAG,CAAC;gBAC5C,KAAK,EAAE,EAAE,GAAG,EAAE,GAAG,IAAI;gBACrB,MAAM,EAAE,EAAE,GAAG,EAAE,GAAG,IAAI;aACtB,CAAC,CAAC;YACH,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAClB,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,GAAG,CAAC;YACnB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAAC,IAAI,EAAE,CAAC;QAC9B,CAAC;QACD,oBAAoB;QACpB,IAAI,GAAG,CAAC,CAAC;QACT,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,GAAG,CAAC,CAAC;QACvB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;YAC7C,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YACZ,IAAI,EAAE,CAAC;YACP,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAAC,QAAQ,CAAC;YAChC,MAAM,GAAG,GAAG,CAAC,CAAC,qCAAqC,CAAC,CAAC,GAAG,CAAC;gBACxD,KAAK,EAAE,EAAE,GAAG,EAAE,GAAG,IAAI;gBACrB,MAAM,EAAE,EAAE,GAAG,EAAE,GAAG,IAAI;gBACtB,IAAI,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI;gBACnB,GAAG,EAAE,EAAE,GAAG,KAAK,GAAG,IAAI;aACtB,CAAC,CAAC;YACH,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAClB,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,GAAG,CAAC;QACpB,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAED,QAAQ,CAAC,GAAW;QACnB,MAAM,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC;QACrB,MAAM,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC;IAC/B,CAAC;CAED;AAAA;AAAA;AAED;;;;;;GAMG;AACG;IAgBL,YAAY,KAAa;QANzB,aAAQ,GAAG;YACV,IAAI,EAAE,CAAC;YACP,MAAM,EAAE,CAAC;YACT,GAAG,EAAE,EAAE;SACP,CAAC;QAGD,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;QAC1B,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,QAAQ,GAAG,EAAE,MAAM,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;QAC1C,MAAM,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;QAClC,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACxC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE;YACxC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC;QAC/B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACpC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;IAChE,CAAC;IAED,WAAW,CAAC,GAAW,EAAE,IAAY;QACpC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;YACjB,MAAM,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;YAClC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;YACzB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;QACH,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;YACf,MAAM,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;YAClC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,eAAe,CAAC,KAAa;QAC5B,oBAAoB;QACpB,CAAC,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;YAC/B,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,YAAY,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;QACH,CAAC,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;YAC/B,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,YAAY,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;QACH,WAAW;QACX,MAAM,cAAc,GAAG,KAAK,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACzD,cAAc,CAAC,EAAE,CAAC,OAAO,EAAC,CAAC,CAAC,EAAE;YAC7B,IAAI,CAAC,QAAQ,CAAC,GAAG;gBAChB,yEAAU,CAAC,UAAU,CAAC,EAAE,GAAG,cAAc,CAAC,GAAG,EAAE,CAAC,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;YAC9E,mFAAmF;YACpF,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC9B,CAAC,CAAC,CAAC;QACH,MAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAClD,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC,CAAC;QAC3D,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QAClD,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC,CAAC;QAC3D,+BAA+B;QAC/B,CAAC,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;IAC9C,CAAC;IAED,YAAY;QACX,CAAC,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;QACzD,CAAC,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;QACzD,CAAC,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;QAC3C,IAAI,CAAC,QAAQ,GAAG,SAAS,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACnC,CAAC;IAED,cAAc,CAAC,GAAQ;QACtB,EAAE,CAAC,CAAC,OAAO,GAAG,IAAI,QAAQ,CAAC;YAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QACrD,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;YAAC,MAAM,CAAC;QACjB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC;YACzD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACvC,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,oBAAoB,IAAI,CAAC,QAAQ,CAAC,MAAM,UAAU,CAAC,CAAC;QAC1E,GAAG,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;QAClC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;IACpB,CAAC;IAED,YAAY,CAAC,GAAQ,EAAE,SAAmB;QACzC,EAAE,CAAC,CAAC,OAAO,GAAG,IAAI,QAAQ,CAAC;YAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QACrD,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;YAAC,MAAM,CAAC;QACjB,MAAM,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;QACtD,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,oBAAoB,OAAO,UAAU,CAAC,CAAC;QAC7D,GAAG,CAAC,WAAW,CAAC,mBAAmB,CAAC,CAAC;IACtC,CAAC;IAED,QAAQ,CAAC,IAAY;QACpB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;IACxC,CAAC;IAED,WAAW,CAAC,IAAS;QACpB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACtB,CAAC;IAED,UAAU;QACT,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;QACvB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACf,MAAM,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;YAClD,KAAK,CAAC,MAAM,CAAC,sDAAsD;gBAClE,kDAAkD,CAAC,CAAC;YACrD,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACxB,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC5B,8DAAc,CAAC,IAAI,CAAC,CAAC;YACrB,IAAI,CAAC,MAAM,EAAE,CAAC;QACf,CAAC;QACD,IAAI,CAAC,CAAC;YACL,CAAC,CAAC,eAAe,CAAC,CAAC,MAAM,EAAE,CAAC;YAC5B,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC5B,8DAAc,CAAC,KAAK,CAAC,CAAC;YACtB,IAAI,CAAC,OAAO,EAAE,CAAC;QAChB,CAAC;IACF,CAAC;IAED,aAAa;QACZ,MAAM,EAAE,GAAG,UAAU,CAAC,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC,CAAC;QAAA,CAAC;QACpD,MAAM,CAAC,yEAAU,CAAC,EAAE,EAAE,cAAc,EAAE,cAAc,CAAC,CAAC;IACvD,CAAC;IAED,kBAAkB,CAAC,MAAc;QAChC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QACrB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,CAAC,MAAM,CAAC;YAC/C,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,CAAC;QACxB,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;QACjD,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC9B,CAAC;IAED,oBAAoB,CAAC,MAAc;QAClC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;QACvB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,gBAAgB,CAAC;YAC3C,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;QAC1B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAClC,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC9B,CAAC;IAED,qBAAqB;QACpB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EACrC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;IAC5D,CAAC;IAED,MAAM;QACL,MAAM,CAAC;YACN,UAAU,EAAE,IAAI,CAAC,aAAa,EAAE;YAChC,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,QAAQ,EAAE;gBACT,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG;gBACtB,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI;gBACxB,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM;aAC5B;SACD;IACF,CAAC;IAED,QAAQ,CAAC,IAAS;QACjB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;YAAC,MAAM,CAAC;QAClB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACrB,IAAI,CAAC,WAAW,CAAC,GAAG,CACnB,yEAAU,CAAC,IAAI,CAAC,UAAU,EAAE,cAAc,EAAE,cAAc,CAAC,CAAC,CAAC;QAC/D,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YAC1B,IAAI,CAAC,YAAY,EAAE,CAAC;QACrB,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;YACtC,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;YACxC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC5C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,CAC5C,yEAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC,CAAC;YAC5D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;YACjF,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACnE,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC9B,CAAC;IACF,CAAC;IAED,wBAAwB;IACxB,MAAM,CAAC,IAAY,IAAS,CAAC;IAC7B,OAAO,CAAC,IAAY,IAAS,CAAC;IAC9B,MAAM,KAAI,CAAC;IACX,OAAO,KAAI,CAAC;IACZ,aAAa,CAAC,QAAgB,IAAG,CAAC;IAClC,eAAe,CAAC,GAAW,EAAE,IAAY,EAAE,OAAe,IAAG,CAAC;CAC9D;AAAA;AAAA;;;;;;;;;ACtQsC;AAEjC;IAUL,YAAY,EAAgB;QAJ5B,aAAQ,GAAG,KAAK,CAAC;QAEjB,eAAU,GAAG,IAAI,CAAC;QAGjB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;QACd,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,KAAK,GAAG,IAAI,SAAS,EAAE,CAAC;QAC7B,IAAI,CAAC,KAAK,GAAG,IAAI,2DAAK,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IACtC,CAAC;IAED,IAAI,GAAG,KAAK,MAAM,CAAC,IAAI,CAAC,IAAI,EAAC,CAAC;IAE9B,IAAI,GAAG,CAAC,CAAC;QACR,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACd,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;YAAC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC;IACpC,CAAC;IAED,OAAO,CAAC,IAAY;QACnB,iCAAiC;QACjC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;YAAC,MAAM,CAAC;QAClC,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;QAChC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;YAAC,MAAM,CAAC;QACrB,qBAAqB;QACrB,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACtB,+BAA+B;QAC/B,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC1C,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACpD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAC5C,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;QACnD,sBAAsB;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,GAAG,CAAC;YACpB,IAAI,CAAC,MAAM,EAAE,CAAC;QACf,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,GAAG,CAAC;YACzB,IAAI,CAAC,MAAM,EAAE,CAAC;QACf,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;YAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YACjC,IAAI;gBAAC,IAAI,CAAC,MAAM,EAAE,CAAC;QACpB,CAAC;IACF,CAAC;IAED,WAAW,CAAC,GAAW;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC,CAAC;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC;gBACrB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YACjB,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,MAAM,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YACrC,CAAC;QACF,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC;gBACrB,IAAI,CAAC,MAAM,GAAG,GAAG,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACtB,IAAI,CAAC,MAAM,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/B,CAAC;QACF,CAAC;IACF,CAAC;IAED,UAAU,CAAC,IAAY,EAAE,QAAgB;QACxC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;YACzB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;QACpC,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAC7C,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;QACrC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;YACpB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,GAAG,EAAE,EAAE,QAAQ,CAAC,CAAC;QAC3C,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;YACpB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,GAAG,EAAE,EAAE,QAAQ,CAAC,CAAC;QAC3C,EAAE,CAAC,CAAC,WAAW,CAAC;YACf,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;IAC/C,CAAC;IAED,WAAW,CAAC,IAAY,EAAE,QAAgB;QACzC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;YACzB,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;QAC9B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YAClB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QACjB,CAAC;IACF,CAAC;IAED,iBAAiB;IACjB,MAAM,CAAC,IAAY,EAAE,QAAgB,EAAE,IAAa,IAAS,CAAC;IAC9D,OAAO,CAAC,IAAY,EAAE,QAAgB,EAAE,IAAa,IAAS,CAAC;CAC/D;AAAA;AAAA;AAGD;IACC,YAAmB,IAAY,EACvB,UAAkB,EAAS,QAAgB;QADhC,SAAI,GAAJ,IAAI,CAAQ;QACvB,eAAU,GAAV,UAAU,CAAQ;QAAS,aAAQ,GAAR,QAAQ,CAAQ;IAAG,CAAC;CACvD;AAED;IAAA;QACS,UAAK,GAAe,EAAE,CAAC;IAoBhC,CAAC;IAlBA,MAAM,KAAa,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;IAE9C,GAAG,CAAC,CAAS,IAAc,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAElD,GAAG,CAAC,IAAY,EAAE,UAAkB,EAAE,QAAgB;QACrD,MAAM,KAAK,GAAG,IAAI,QAAQ,CAAC,IAAI,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;QACvD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC5C,EAAE,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBAC3C,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;gBAC/B,MAAM,CAAC;YACR,CAAC;QACF,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACxB,CAAC;IAED,MAAM,CAAC,IAAY;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC;IAC7D,CAAC;CACD;;;;;;;;;;;AC9HyC;AACJ;AACM;AAG5C,MAAM,WAAW,GAAG,EAAE,CAAC;AAEvB;;;;GAIG;AACG;IAML,YAAY,OAAgB;QAF5B,cAAS,GAAW,CAAC,CAAC;QAGrB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QAC1C,IAAI,CAAC,WAAW,EAAE,CAAC;IACpB,CAAC;IAED,WAAW;QACV,IAAI,CAAC,OAAO,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC;QACtC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE;YACnC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QACzC,CAAC,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,EAAE;YAC/B,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,YAAY,KAAK,CAAC,CAAC;gBAAC,MAAM,CAAC;YACrC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE;gBACnC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,YAAY,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,cAAc;QACb,MAAM,CAAC;YACN,IAAI,EAAE,EAAE;YACR,KAAK,EAAE;gBACN,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,eAAe,EAAE;aAC5E;YACD,QAAQ,EAAE;gBACT,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE;aAC3B;SACD,CAAC;IACH,CAAC;IAED,iBAAiB,CAAC,IAAiB;QAClC,CAAC,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QAC7C,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC;QAC1D,CAAC,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;QACxE,CAAC,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;QACxE,CAAC,CAAC,wEAAS,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;YAChC,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,IAAI,OAAO,IAAI,6DAAa,CAAC;gBAAC,MAAM,CAAC;YAC5D,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC;gBAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;YAC7D,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC;gBAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;QACH,CAAC,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC,CAAC;QACzD,MAAM,MAAM,GAAG,CAAC,CAAC,yBAAyB,CAAC,CAAC;QAC5C,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;YACjB,IAAI,GAAG,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC;YACvB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;gBAAC,MAAM,CAAC;YACjB,MAAM,GAAG,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,oBAAoB;QACnB,MAAM,MAAM,GAAG,CAAC,CAAC,kBAAkB,CAAC,CAAC;QACrC,MAAM,CAAC,MAAM,EAAE,CAAC;QAChB,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;YAAC,MAAM,CAAC;QACnC,uBAAuB;QACvB,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,MAAM,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAClC,GAAG,CAAC,KAAK,EAAE,CAAC;QACZ,GAAG,CAAC,KAAK,EAAE,CAAC;QACZ,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,GAAG,CAAC,CAAC,MAAM,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YACnC,MAAM,QAAQ,GAAG,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC;YACxD,CAAC,EAAE,CAAC;YACJ,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;gBAC3B,GAAG,CAAC,MAAM,CAAC,UAAU,QAAQ,IAAI,CAAC,KAAK,MAAM,CAAC,IAAI,WAAW,CAAC,CAAC;QACjE,CAAC;IACF,CAAC;IAED,YAAY,CAAC,MAAc;QAC1B,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;YAAC,MAAM,GAAG,WAAW,GAAG,CAAC,CAAC;QACzC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,IAAI,WAAW,CAAC;YAAC,MAAM,GAAG,CAAC,CAAC;QAC3C,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;QACxB,IAAI,CAAC,YAAY,EAAE,CAAC;IACrB,CAAC;IAED,YAAY;QACX,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC;QACtC,IAAI,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC,GAAG,EAAE,CAAC;QACvC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC;QAC7B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACtB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;QACpC,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAED,YAAY;QACX,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC5C,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QACvB,CAAC,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;QAC1C,CAAC,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACnC,CAAC,CAAC,cAAc,CAAC,CAAC,KAAK,EAAE,CAAC;QAC1B,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACjC,IAAI,CAAC,cAAc,EAAE,CAAC;IACvB,CAAC;IAED,cAAc;QAEb,MAAM,YAAY,GACjB,CAAC,MAAiB,EAAE,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAChE,IAAI,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,CAAC;QACnD,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YAAC,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC,CAAC;QACrD,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YAAC,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,IAAI,CAAC,CAAC,CAAC;QAChE,EAAE,CAAC,CAAC,CAAC,CAAC;YAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACtC,CAAC;IAED,UAAU,CAAC,GAAiB;QAC3B,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;YAAC,MAAM,CAAC;QACjB,+DAAe,CAAC,GAAG,EAAE,IAAI,CAAC,EAAE;YAC3B,IAAI,CAAC;gBACJ,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;gBAC9B,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,OAAO,CAAC;oBAAC,MAAM,qBAAqB,CAAC;gBAC/D,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;gBACpC,IAAI,CAAC,YAAY,EAAE,CAAC;YACrB,CAAC;YACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACV,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBACjB,4DAAY,CAAC,2CAA2C,EAAE,YAAY,CAAC,CAAC;YACzE,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,UAAU;QACT,MAAM,IAAI,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACjC,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACtC,EAAE,CAAC,CAAC,4EAA4B,EAAE,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;gBAAC,IAAI,CAAC,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC;YAC3D,6DAAa,CAAC,IAAI,CAAC,IAAI,GAAG,OAAO,EAAE,QAAQ,CAAC,CAAC;QAC9C,CAAC;QACD,IAAI,CAAC,CAAC;YACL,6DAAa,CACZ,uEAAuE,EACvE,aAAa,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;QACjC,CAAC;IACF,CAAC;IAED,6EAA6E;IAC7E,UAAU,CAAC,IAAS,IAAS,CAAC;IAC9B,6DAA6D;IAC7D,SAAS,CAAC,IAAS,IAAS,CAAC;CAC7B;AAAA;AAAA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 06bc1569a3ce8fa4d8dd","/**\n * Modernize browser interfaces so that TypeScript does not complain\n * when using new features.\n *\n * Also provides some basic utility funcitons\n */\n\nexport interface ModernWindow extends Window {\n\tAudioContext: AudioContext;\n\twebkitAudioContext: AudioContext;\n}\n\nexport interface ModernAudioNode extends AudioNode {\n\tdisconnect(output?: number | AudioNode | AudioParam): void\n}\n\n\nexport function removeArrayElement(a: any[], e: any): boolean {\n\tconst pos = a.indexOf(e);\n\tif (pos < 0) return false;\t// not found\n\ta.splice(pos, 1);\n\treturn true;\n}\n\nconst LOG_BASE = 2;\n\nfunction logarithm(base: number, x: number): number {\n\treturn Math.log(x) / Math.log(base);\n}\n\nexport function linear2log(value: number, min: number, max: number): number {\n\tconst logRange = logarithm(LOG_BASE, max + 1 - min);\n\treturn logarithm(LOG_BASE, value + 1 - min) / logRange;\n}\n\nexport function log2linear(value: number, min: number, max: number): number {\n\tconst logRange = logarithm(LOG_BASE, max + 1 - min);\n\treturn min + Math.pow(LOG_BASE, value * logRange) - 1;\n}\n\nexport function focusable(elem: HTMLElement | null): HTMLElement {\n\twhile (elem != null && elem.tabIndex < 0 &&\n\t\telem.nodeName.toLowerCase() != 'body')\n\t\telem = elem.parentElement;\n\treturn elem || document.body;\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/utils/modern.ts","//-------------------- Encoding / decoding --------------------\n\nexport function arrayBufferToBase64(buffer: number[]) {\n\tvar binary = '';\n\tvar bytes = new Uint8Array(buffer);\n\tvar len = bytes.byteLength;\n\tfor (var i = 0; i < len; i++) {\n\t\tbinary += String.fromCharCode(bytes[i]);\n\t}\n\treturn window.btoa(binary);\n}\n\nexport function base64ToArrayBuffer(base64: string) {\n\tvar binary_string = window.atob(base64);\n\tvar len = binary_string.length;\n\tvar bytes = new Uint8Array(len);\n\tfor (var i = 0; i < len; i++) {\n\t\tbytes[i] = binary_string.charCodeAt(i);\n\t}\n\treturn bytes.buffer;\n}\n\n\n//-------------------- Downloading --------------------\n\nexport function browserSupportsDownload(): boolean {\n\treturn !(<any>window).externalHost && 'download' in $('<a>')[0];\n}\n\nexport function download(fileName: string, fileData: string) {\n\tconst a = $('<a>');\n\ta.attr('download', fileName);\n\ta.attr('href',\n\t\t'data:application/octet-stream;base64,' + btoa(fileData));\n\tconst clickEvent = new MouseEvent('click',\n\t\t{ view: window, bubbles: true, cancelable: false });\n\ta[0].dispatchEvent(clickEvent);\n}\n\n\n//-------------------- Uploading --------------------\n\ntype UploadCallback = (buf: any, file: any) => void\n\nexport function uploadText(event: JQuery.Event, cb: UploadCallback) {\n\tupload(event, cb, 'readAsText');\n}\n\nexport function uploadArrayBuffer(event: JQuery.Event, cb: UploadCallback) {\n\tupload(event, cb, 'readAsArrayBuffer');\n}\n\nfunction upload(event: JQuery.Event, cb: UploadCallback, readFunc: string) {\n\tlet files = (<any>event.target).files\n\tif (!files || files.length <= 0) return cb('', '');\n\tconst file = files[0];\n\tconst reader = new FileReader();\n\treader.onload = (loadEvt: any)  => cb(loadEvt.target.result, file);\n\t(<any>reader)[readFunc](file);\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/utils/file.ts","import { NoteHandler, NoteHandlers } from './notes';\nimport { NodeDef, NodeParamDef, NodePalette, palette } from './palette';\nimport { ModernAudioNode, removeArrayElement } from '../utils/modern';\nimport * as custom from './customNodes';\nimport * as file from '../utils/file';\n\n\nconst SEMITONE = Math.pow(2, 1/12);\nconst A4 = 57;\n\n/**\n * Holds all data associated with an AudioNode\n */\nexport class NodeData {\n\t// Used by all nodes\n\ttype: string;\n\tanode: ModernAudioNode;\n\tnodeDef: NodeDef;\n\t// Used by control nodes\n\tcontrolParam: string;\n\tcontrolParams: string[] | null;\n\tcontrolTarget: ModernAudioNode;\n\t// Used by source audio nodes\n\tnoteHandler: NoteHandler;\n\t// Flag to avoid deleting output node\n\tisOut: boolean = false;\n\t// Reference to owner synth\n\tsynth: Synth;\n\t// To be implemented by user code\n\tgetInputs(): NodeData[] {\n\t\tthrow 'Error: getInputs() function should be implemented by user';\n\t}\n}\n\n/**\n * Global paramters that apply to the whole monophonic synthesizer.\n */\nexport class Portamento {\n\ttime = 0;\n\tratio = 0;\n}\n\n//TODO *** refactor & decouple from UI\ninterface ParamHandler {\n\tuiRender: string;\n\tinitialize(anode: AudioNode, def: NodeDef): void;\n\tparam2json(anode: AudioNode): any;\n\tjson2param(anode: AudioNode, json: any): any;\n}\n\n/**\n * Performs global operations on all AudioNodes:\n * - Manages AudioNode creation, initialization and connection\n * - Distributes MIDI keyboard events to NoteHandlers\n */\nexport class Synth {\n\tac: AudioContext;\n\tcustomNodes: { [key: string]: Function } = {};\n\tparamHandlers: { [key: string]: ParamHandler } = {};\n\tpalette: NodePalette;\n\tnoteHandlers: NoteHandler[] = [];\n\tportamento = new Portamento();\n\n\tconstructor(ac: AudioContext) {\n\t\tthis.ac = ac;\n\t\tthis.palette = palette;\n\t\tthis.registerCustomNode('createADSR', custom.ADSR);\n\t\tthis.registerCustomNode('createNoise', custom.NoiseGenerator);\n\t\tthis.registerCustomNode('createNoiseCtrl', custom.NoiseCtrlGenerator);\n\t\tthis.registerCustomNode('createLineIn', custom.LineInNode);\n\t\tthis.registerCustomNode('createDetuner', custom.Detuner);\n\t\tthis.registerParamHandler('BufferDataHandler', new BufferDataHandler());\n\t\tthis.registerParamHandler('SoundBankHandler', new SoundBankHandler());\n\t}\n\n\tcreateAudioNode(type: string): AudioNode | null {\n\t\tconst def: NodeDef = palette[type];\n\t\tif (!def) return null;\n\t\tconst factory: any = def.custom ? this.customNodes : this.ac;\n\t\tif (!def.constructor || !factory[def.constructor]) return null;\n\t\tconst anode = factory[def.constructor]();\n\t\tif (!anode.context) anode.context = this.ac;\n\t\tthis.initNodeParams(anode, def, type);\n\t\treturn anode;\n\t}\n\n\tinitNodeData(ndata: NodeData, type: string): void {\n\t\tndata.synth = this;\n\t\tndata.type = type;\n\t\tlet anode = this.createAudioNode(type);\n\t\tif (!anode)\n\t\t\treturn console.error(`No AudioNode found for '${type}'`);\n\t\tndata.anode = anode;\n\t\tndata.nodeDef = this.palette[type];\n\t\tconst nh = ndata.nodeDef.noteHandler;\n\t\tif (nh) {\n\t\t\tndata.noteHandler = new (<any>NoteHandlers)[nh](ndata);\n\t\t\tthis.addNoteHandler(ndata.noteHandler);\n\t\t}\n\t}\n\n\tinitOutputNodeData(ndata: NodeData, dst: AudioNode): void {\n\t\tndata.synth = this;\n\t\tndata.type = 'out';\n\t\tndata.anode = this.ac.createGain();\n\t\tndata.anode.connect(dst);\n\t\tndata.nodeDef = this.palette['Speaker'];\n\t\tndata.isOut = true;\n\t}\n\n\tremoveNodeData(data: NodeData) {\n\t\tif (data.noteHandler)\n\t\t\tthis.removeNoteHandler(data.noteHandler);\n\t}\n\n\tconnectNodes(srcData: NodeData, dstData: NodeData): void {\n\t\tif (srcData.nodeDef.control && !dstData.nodeDef.control) {\n\t\t\tlet anode: any = dstData.anode;\n\t\t\tsrcData.controlParams = Object.keys(dstData.nodeDef.params)\n\t\t\t\t.filter(pname => anode[pname] instanceof AudioParam);\n\t\t\tsrcData.controlParam = srcData.controlParams[0];\n\t\t\tsrcData.controlTarget = dstData.anode;\n\t\t\tsrcData.anode.connect(anode[srcData.controlParam]);\n\t\t}\n\t\telse srcData.anode.connect(dstData.anode);\n\t}\n\n\tdisconnectNodes(srcData: NodeData, dstData: NodeData): void {\n\t\tif (srcData.nodeDef.control && !dstData.nodeDef.control) {\n\t\t\tsrcData.controlParams = null;\n\t\t\tsrcData.anode.disconnect((<any>dstData.anode)[srcData.controlParam]);\n\t\t}\n\t\telse\n\t\t\tsrcData.anode.disconnect(dstData.anode);\n\t}\n\n\tjson2NodeData(json: any, data: NodeData): void {\n\t\tlet anydata: any = data;\n\t\tfor (const pname of Object.keys(json.params)) {\n\t\t\tconst pvalue = anydata.anode[pname];\n\t\t\tconst jv = json.params[pname];\n\t\t\tif (anydata.nodeDef.params[pname].handler)\n\t\t\t\tthis.paramHandlers[anydata.nodeDef.params[pname].handler]\n\t\t\t\t\t.json2param(anydata.anode, jv);\n\t\t\telse if (pvalue instanceof AudioParam) {\n\t\t\t\tpvalue.value = jv;\n\t\t\t\t(<any>pvalue)['_value'] = jv;\n\t\t\t}\n\t\t\telse anydata.anode[pname] = jv;\n\t\t}\n\t}\n\n\tnodeData2json(data: any): any {\n\t\tconst params: any = {};\n\t\tfor (const pname of Object.keys(data.nodeDef.params)) {\n\t\t\tconst pvalue = data.anode[pname];\n\t\t\tif (data.nodeDef.params[pname].handler)\n\t\t\t\tparams[pname] = this.paramHandlers[data.nodeDef.params[pname].handler]\n\t\t\t\t\t.param2json(data.anode);\n\t\t\telse if (pvalue instanceof AudioParam)\n\t\t\t\tif ((<any>pvalue)['_value'] === undefined) params[pname] = pvalue.value;\n\t\t\t\telse params[pname] = (<any>pvalue)['_value'];\n\t\t\telse params[pname] = pvalue;\n\t\t}\n\t\treturn {\n\t\t\ttype: data.type,\n\t\t\tparams,\n\t\t\tcontrolParam: data.controlParam,\n\t\t\tcontrolParams: data.controlParams\n\t\t}\n\t}\n\n\tmidi2freqRatio(midi: number): number {\n\t\treturn Math.pow(SEMITONE, midi - A4);\n\t}\n\n\tnoteOn(midi: number, gain: number, when?: number): void {\n\t\tif (!when) when = this.ac.currentTime;\n\t\tconst ratio = this.midi2freqRatio(midi);\n\t\tthis.setupNoteHandlers();\n\t\tfor (const nh of this.noteHandlers)\n\t\t\tnh.noteOn(midi, gain, ratio, when);\n\t\tthis.portamento.ratio = ratio;\n\t}\n\n\tnoteOff(midi: number, gain: number, when?: number): void {\n\t\tif (!when) when = this.ac.currentTime;\n\t\tfor (const nh of this.noteHandlers)\n\t\t\tnh.noteOff(midi, gain, when);\n\t}\n\n\taddNoteHandler(nh: NoteHandler): void {\n\t\tthis.noteHandlers.push(nh);\n\t}\n\n\tremoveNoteHandler(nh: NoteHandler): void {\n\t\tremoveArrayElement(this.noteHandlers, nh)\n\t}\n\n\tsetupNoteHandlers() {\n\t\tlet maxRelease = 0;\n\t\tfor (const nh of this.noteHandlers) {\n\t\t\tif (nh.kbTrigger && nh.releaseTime > maxRelease)\n\t\t\t\tmaxRelease = nh.releaseTime;\n\t\t}\n\t\tfor (const nh of this.noteHandlers) {\n\t\t\tif (!nh.kbTrigger)\n\t\t\t\tnh.releaseTime = maxRelease;\n\t\t}\n\t}\n\n\tinitNodeParams(anode: AudioNode, def: NodeDef, type: string): void {\n\t\tlet anynode: any = anode;\n\t\tfor (const param of Object.keys(def.params || {}))\n\t\t\tif (anynode[param] === undefined)\n\t\t\t\tconsole.warn(`Parameter '${param}' not found for node '${type}'`)\n\t\t\telse if (anynode[param] instanceof AudioParam)\n\t\t\t\tanynode[param].value = def.params[param].initial;\n\t\t\telse if (def.params[param].handler) {\n\t\t\t\tdef.params[param].phandler = this.paramHandlers[def.params[param].handler || ''];\n\t\t\t\tdef.params[param].phandler.initialize(anynode, def);\n\t\t\t}\n\t\t\telse\n\t\t\t\tanynode[param] = def.params[param].initial;\n\t}\n\n\tregisterCustomNode(constructorName: string, nodeClass: any): void {\n\t\tthis.customNodes[constructorName] = () => new nodeClass(this.ac);\n\t}\n\n\tregisterParamHandler(hname: string, handler: ParamHandler): void {\n\t\tthis.paramHandlers[hname] = handler;\n\t}\n\n}\n\n\n\n//-------------------- Parameter handlers --------------------\n\ninterface BufferAudioNode extends AudioNode {\n\t_encoded: any;\n\t_buffer: AudioBuffer;\n\t_buffers: AudioBuffer[];\n\t_encodedBuffers: any[];\n\t_names: string[];\n}\n\nclass BufferDataHandler implements ParamHandler {\n\tuiRender = 'renderBufferData';\n\tinitialize(anode: AudioNode, def: NodeDef): void {}\n\n\tparam2json(anode: BufferAudioNode): any {\n\t\treturn file.arrayBufferToBase64(anode._encoded);\n\t}\n\n\tjson2param(anode: BufferAudioNode, json: any) {\n\t\tconst encoded = file.base64ToArrayBuffer(json);\n\t\tanode._encoded = encoded;\n\t\tanode.context.decodeAudioData(encoded, buffer => anode._buffer = buffer);\n\t}\n}\n\nclass SoundBankHandler implements ParamHandler {\n\tuiRender = 'renderSoundBank';\n\tinitialize(anode: BufferAudioNode, def: NodeDef): void {\n\t\tanode._buffers = [];\n\t\tanode._encodedBuffers = [];\n\t\tanode._names = [];\n\t}\n\n\tparam2json(anode: BufferAudioNode): any {\n\t\tconst files = [];\n\t\tconst encs = anode._encodedBuffers;\n\t\tconst names = anode._names;\n\t\tfor (let i = 0; i < names.length; i++)\n\t\t\tfiles.push({\n\t\t\t\tname: names[i],\n\t\t\t\tdata: file.arrayBufferToBase64(encs[i])\n\t\t\t});\n\t\treturn files;\n\t}\n\n\tjson2param(anode: BufferAudioNode, json: any) {\n\t\tconst bufs = anode._buffers;\n\t\tbufs.length = 0;\n\t\tconst encs = anode._encodedBuffers;\n\t\tencs.length = 0;\n\t\tconst names = anode._names;\n\t\tnames.length = 0;\n\t\tfor (let i = 0; i < json.length; i++) {\n\t\t\tconst item = json[i];\n\t\t\tnames.push(item.name);\n\t\t\tconst encoded = file.base64ToArrayBuffer(item.data);\n\t\t\tencs.push(encoded);\n\t\t\tthis.decodeBuffer(anode, encoded, bufs, i);\n\t\t}\n\t}\n\n\tdecodeBuffer(anode: AudioNode, data: ArrayBuffer,\n\t\tbufs: any[], i: number) {\n\t\tanode.context.decodeAudioData(data, buffer => bufs[i] = buffer);\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/synth/synth.ts","interface JQueryWithModal extends JQuery {\n\tmodal(options?: any): void;\n}\n\n/** Informs whether a popup is open or not */\nexport let isOpen: boolean = false;\nexport function setOpen(open: boolean) {\n\tisOpen = open;\n}\n\n/** Bootstrap-based equivalent of standard alert function */\nexport function alert(msg: string, title?: string, hideClose?: boolean, options?: any): void {\n\tpopup.find('.popup-message').html(msg);\n\tpopup.find('.modal-title').text(title || 'Alert');\n\tpopup.find('.popup-ok').hide();\n\tif (hideClose)\n\t\tpopup.find('.popup-close').hide();\n\telse\n\t\tpopup.find('.popup-close').html('Close');\n\tpopup.find('.popup-prompt > input').hide();\n\tisOpen = true;\n\tpopup.one('hidden.bs.modal', _ => isOpen = false);\n\tpopup.modal(options);\n}\n\n/** Like an alert, but without a close button */\nexport function progress(msg: string, title?: string): void {\n\talert(msg, title, true, { keyboard: false });\n}\n\n/** Closes a popup in case it is open */\nexport function close() {\n\tif (!isOpen) return;\n\tpopup.find('.popup-ok').click();\n}\n\n/** Bootstrap-based equivalent of standard confirm function */\nexport function confirm(msg: string, title: string,\n\tcbClose: (b: boolean) => void, cbOpen?: () => void) {\n\tlet result = false;\n\tpopup.find('.popup-message').html(msg);\n\tpopup.find('.modal-title').text(title || 'Please confirm');\n\tconst okButton = popup.find('.popup-ok');\n\tokButton.show().click(_ => result = true);\n\tpopup.find('.popup-prompt > input').hide();\n\tpopup.find('.popup-close').text('Cancel');\n\tpopup.one('shown.bs.modal', _ => {\n\t\tokButton.focus();\n\t\tif (cbOpen) cbOpen();\n\t});\n\tpopup.find('form').one('submit', _ => {\n\t\tresult = true;\n\t\tokButton.click();\n\t\treturn false;\n\t});\n\tpopup.one('hide.bs.modal', _ => {\n\t\tokButton.off('click');\n\t\tisOpen = false;\n\t\tcbClose(result);\n\t});\n\tisOpen = true;\n\tpopup.modal();\n}\n\n/** Bootstrap-based equivalent of standard prompt function */\nexport function prompt(msg: string, title: string,\n\tinitialValue: string, cb: ((s: any) => void) | null): void {\n\tconst input = popup.find('.popup-prompt > input');\n\tconfirm(msg, title, confirmed => {\n\t\tif (!cb) return;\n\t\tif (!confirmed) cb(null);\n\t\telse cb(input.val());\n\t}, () => {\n\t\tinput.show();\n\t\tinput.focus();\n\t\tif (initialValue) {\n\t\t\tinput.val(initialValue);\n\t\t\tconst hinput: HTMLInputElement = <HTMLInputElement>input[0];\n\t\t\thinput.select();\n\t\t}\n\t\telse input.val('');\n\t});\n}\n\n\nconst popup = <JQueryWithModal> $(`\n\t<div class=\"normal-font modal fade\" id=\"myModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\">\n\t<div class=\"modal-dialog\" role=\"document\">\n\t\t<div class=\"modal-content\">\n\t\t<div class=\"modal-header\">\n\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n\t\t\t<h4 class=\"modal-title\" id=\"myModalLabel\"></h4>\n\t\t</div>\n\t\t<div class=\"modal-body\">\n\t\t\t<div class=\"popup-message\"></div>\n\t\t\t<form class=\"popup-prompt\">\n\t\t\t\t<input type=\"text\" style=\"width: 100%\">\n\t\t\t</form>\n\t\t</div>\n\t\t<div class=\"modal-footer\">\n\t\t\t<button type=\"button\" class=\"btn btn-default popup-close\" data-dismiss=\"modal\"></button>\n\t\t\t<button type=\"button\" class=\"btn btn-primary popup-ok\" data-dismiss=\"modal\">OK</button>\n\t\t</div>\n\t\t</div>\n\t</div>\n\t</div>\n`);\n\n$('body').append(popup);\n\n\n\n\n// WEBPACK FOOTER //\n// ./ts/utils/popups.ts","import { NodeData } from './synth';\nimport { ADSR } from './customNodes';\nimport { ModernAudioNode, removeArrayElement } from '../utils/modern';\n\n\n/**\n * A note handler handles MIDI keyboard events on behalf of a synth node,\n * updating the node status accordingly.\n */\nexport interface NoteHandler {\n\tnoteOn(midi: number, gain: number, ratio: number, when: number):void;\n\tnoteOff(midi: number, gain: number, when: number): void;\n\tkbTrigger: boolean;\n\treleaseTime: number;\n}\n\n/**\n * Handles common AudioNode cloning, used by oscillator and buffered data nodes.\n */\nclass BaseNoteHandler implements NoteHandler {\n\tndata: NodeData;\n\toutTracker: OutputTracker;\n\tkbTrigger = false;\n\treleaseTime = 0;\n\n\tconstructor(ndata: NodeData) {\n\t\tthis.ndata = ndata;\n\t\tthis.outTracker = new OutputTracker(ndata.anode);\n\t}\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number):void {}\n\tnoteOff(midi: number, gain: number, when: number): void {}\n\n\tclone(): AudioNode | null {\n\t\t// Create clone\n\t\tlet ctor = this.ndata.nodeDef.constructor;\n\t\tif (!ctor) return null;\n\t\tconst anode = (<any>this.ndata.anode.context)[ctor]();\n\t\t// Copy parameters\n\t\tfor (const pname of Object.keys(this.ndata.nodeDef.params)) {\n\t\t\tconst param = (<any>this.ndata.anode)[pname];\n\t\t\tif (param instanceof AudioParam)\n\t\t\t\tanode[pname].value = param.value;\n\t\t\telse if (param !== null && param !== undefined)\n\t\t\t\tanode[pname] = param;\n\t\t}\n\t\t// Copy output connections\n\t\tfor (const out of this.outTracker.outputs) {\n\t\t\tlet o2: any = out;\n\t\t\tif (o2.custom && o2.anode) o2 = o2.anode;\n\t\t\tanode.connect(o2);\n\t\t}\n\t\t// Copy control input connections\n\t\tfor (const inData of this.ndata.getInputs()) {\n\t\t\tinData.anode.connect(anode[inData.controlParam]);\n\t\t}\n\t\t//TODO should copy snapshot of list of inputs and outputs\n\t\t//...in case user connects or disconnects during playback\n\t\treturn anode;\n\t}\n\n\tdisconnect(anode: ModernAudioNode): void {\n\t\t// Disconnect outputs\n\t\tfor (const out of this.outTracker.outputs)\n\t\t\tanode.disconnect(out);\n\t\t// Disconnect control inputs\n\t\tfor (const inData of this.ndata.getInputs()) {\n\t\t\tinData.anode.disconnect((<any>anode)[inData.controlParam]);\n\t\t}\n\t}\n\n\trampParam(param: MAudioParam, ratio: number, when: number): void {\n\t\tconst portamento = this.ndata.synth.portamento;\n\t\tconst newv = param.value * ratio;\n\t\tparam._value = newv;\t// Required for ADSR to capture the correct value\n\t\tif (portamento.time > 0 && portamento.ratio > 0) {\n\t\t\tconst oldv = param.value * portamento.ratio;\n\t\t\tparam.cancelScheduledValues(when);\n\t\t\tparam.linearRampToValueAtTime(oldv, when);\n\t\t\tparam.exponentialRampToValueAtTime(newv, when + portamento.time);\n\t\t}\n\t\telse param.setValueAtTime(newv, when);\n\t}\n}\n\n/**\n * Handles note events for an OscillatorNode\n */\nclass OscNoteHandler extends BaseNoteHandler {\n\toscClone: OscillatorNode;\n\tlastNote: number;\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number):void {\n\t\tif (this.oscClone) this.oscClone.stop(when);\n\t\tthis.oscClone = <OscillatorNode>this.clone();\n\t\tthis.rampParam(<MAudioParam>this.oscClone.frequency, ratio, when);\n\t\tthis.oscClone.start(when);\n\t\tthis.lastNote = midi;\n\t}\n\n\tnoteOff(midi: number, gain: number, when: number): void {\n\t\tif (midi != this.lastNote) return;\t// Avoid multple keys artifacts in mono mode\n\t\tthis.oscClone.stop(when + this.releaseTime);\n\t}\n}\n\n/**\n * Handles note events for an LFO node. This is identical to a regular\n * oscillator node, but the note does not affect the oscillator frequency\n */\nclass LFONoteHandler extends OscNoteHandler {\n\trampParam(param: AudioParam, ratio: number, when: number) {\n\t\t// Disable portamento for LFO\n\t\tparam.setValueAtTime(param.value, when);\n\t}\n}\n\n/**\n * Handles note events for an AudioBufferSourceNode\n */\nclass BufferNoteHandler extends BaseNoteHandler {\n\tabsn: AudioBufferSourceNode;\n\tlastNote: number;\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number):void {\n\t\tif (this.absn)\n\t\t\tthis.absn.stop(when);\n\t\tconst buf = (<any>this.ndata.anode)._buffer;\n\t\tif (!buf) return;\t// Buffer still loading or failed\n\t\tthis.absn = <AudioBufferSourceNode>this.clone();\n\t\tthis.absn.buffer = buf;\n\t\tconst pbr = this.absn.playbackRate;\n\t\tconst newRate = pbr.value * ratio;\n\t\tthis.rampParam(<MAudioParam>pbr, pbr.value * ratio, when);\n\t\tthis.absn.start(when);\n\t\tthis.lastNote = midi;\n\t}\n\n\tnoteOff(midi: number, gain: number, when: number): void {\n\t\tif (midi != this.lastNote) return;\n\t\tthis.absn.stop(when + this.releaseTime);\n\t}\n}\n\n/**\n * Performs computations about ramps so they can be easily rescheduled\n */\nclass Ramp {\n\tconstructor(public v1: number, public v2: number, public t1: number, public t2: number) {}\n\tinside(t: number) {\n\t\treturn this.t1 < this.t2 && this.t1 <= t && t <= this.t2;\n\t}\n\tcut(t: number) {\n\t\tconst newv = this.v1 + (this.v2 - this.v1) * (t - this.t1) / (this.t2 - this.t1);\n\t\treturn new Ramp(this.v1, newv, this.t1, t);\n\t}\n\trun(p: AudioParam, follow: boolean = false) {\n\t\tif (this.t2 - this.t1 <= 0) {\n\t\t\tp.setValueAtTime(this.v2, this.t2);\n\t\t}\n\t\telse {\n\t\t\tif (!follow) p.setValueAtTime(this.v1, this.t1);\n\t\t\tp.linearRampToValueAtTime(this.v2, this.t2);\n\t\t}\n\t}\n}\n\ninterface MAudioParam extends AudioParam {\n\t_attack: Ramp;\n\t_decay: Ramp;\n\t_release: Ramp;\n\t_value: number;\n}\n/**\n * Handles note events for a custom ADSR node\n */\nclass ADSRNoteHandler extends BaseNoteHandler {\n\tlastNote: number;\n\tkbTrigger = true;\n\n\tconstructor(ndata: NodeData) {\n\t\tsuper(ndata);\n\t\tconst adsr = this.getADSR();\n\t\tconst oldMethod = adsr.disconnect;\n\t\tadsr.disconnect = (dest: AudioParam) => {\n\t\t\tthis.loopParams(param => {\n\t\t\t\tif (param == dest)\n\t\t\t\t\tparam.setValueAtTime(param._value, adsr.context.currentTime);\n\t\t\t});\n\t\t\toldMethod(dest);\n\t\t}\n\t}\n\n\tgetADSR(): ADSR {\n\t\tlet anode: any = this.ndata.anode;\n\t\treturn anode;\n\t}\n\n\tget releaseTime() {\n\t\tconst adsr = this.getADSR();\n\t\treturn adsr.release;\n\t}\n\tset releaseTime(relTime: number) {\n\t\t//this.releaseTime = relTime;\n\t}\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number):void {\n\t\tthis.lastNote = midi;\n\t\tconst adsr = this.getADSR();\n\t\tthis.loopParams(param => {\n\t\t\tconst v = this.getParamValue(param);\n\t\t\tconst initial = (1 - adsr.depth) * v;\n\t\t\tconst sustain = v * adsr.sustain + initial * (1 - adsr.sustain);\n\t\t\tconst now = adsr.context.currentTime;\n\t\t\tparam.cancelScheduledValues(now);\n\t\t\tif (when > now)\n\t\t\t\tthis.rescheduleRamp(param, param._release, now);\n\t\t\tparam._attack = new Ramp(initial, v, when, when + adsr.attack);\n\t\t\tparam._decay = new Ramp(v, sustain, when + adsr.attack, when + adsr.attack + adsr.decay);\n\t\t\tparam._attack.run(param);\n\t\t\tparam._decay.run(param, true);\n\t\t});\n\t}\n\n\tnoteOff(midi: number, gain: number, when: number): void {\n\t\tif (midi != this.lastNote) return;\t// Avoid multple keys artifacts in mono mode\n\t\tconst adsr = this.getADSR();\n\t\tthis.loopParams(param => {\n\t\t\tlet v = this.getRampValueAtTime(param, when);\n\t\t\tif (v === null)\n\t\t\t\tv = this.getParamValue(param) * adsr.sustain;\n\t\t\tconst finalv = (1 - adsr.depth) * v;\n\t\t\tparam.cancelScheduledValues(when);\n\t\t\tconst now = adsr.context.currentTime;\n\t\t\tif (when > now)\n\t\t\t\tthis.rescheduleRamp(param, param._attack, now) ||\n\t\t\t\tthis.rescheduleRamp(param, param._decay, now);\n\t\t\tparam._release = new Ramp(v, finalv, when, when + adsr.release);\n\t\t\tparam._release.run(param);\n\t\t});\n\t}\n\n\trescheduleRamp(param: MAudioParam, ramp: Ramp, now: number): boolean {\n\t\tif (ramp && ramp.inside(now)) {\n\t\t\tramp.cut(now).run(param);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetRampValueAtTime(param: MAudioParam, t: number): number | null {\n\t\tlet ramp;\n\t\tif (param._attack && param._attack.inside(t))\n\t\t\treturn param._attack.cut(t).v2;\n\t\tif (param._decay && param._decay.inside(t))\n\t\t\treturn param._decay.cut(t).v2;\n\t\treturn null;\n\t}\n\n\tloopParams(cb: (out: MAudioParam) => void): void {\n\t\tfor (const out of this.outTracker.outputs)\n\t\t\tif (out instanceof AudioParam)\n\t\t\t\tcb(<MAudioParam>out);\n\t}\n\n\tgetParamValue(p: MAudioParam): number {\n\t\tif (p._value === undefined) p._value = p.value;\n\t\treturn p._value;\n\t}\n}\n\n/**\n * Handles note events for any node that allows calling start() after stop(),\n * such as custom nodes.\n */\nclass RestartableNoteHandler extends BaseNoteHandler {\n\tlastNote: number;\n\tplaying = false;\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number):void {\n\t\tconst anode: any = this.ndata.anode;\n\t\tif (this.playing)\n\t\t\tanode.stop(when);\n\t\tthis.playing = true;\n\t\tanode.start(when);\n\t\tthis.lastNote = midi;\n\t}\n\n\tnoteOff(midi: number, gain: number, when: number): void {\n\t\tif (midi != this.lastNote) return;\n\t\tthis.playing = false;\n\t\tconst anode: any = this.ndata.anode;\n\t\tanode.stop(when + this.releaseTime);\n\t}\n}\n\n/**\n * Handles note events for the SoundBank source node\n */\nclass SoundBankNoteHandler extends BaseNoteHandler {\n\n\tnoteOn(midi: number, gain: number, ratio: number, when: number) {\n\t\tconst bufs = (<any>this.ndata.anode)['_buffers'];\n\t\tconst absn = <AudioBufferSourceNode>this.clone();\n\t\tabsn.buffer = bufs[midi % bufs.length];\n\t\tabsn.start(when);\n\t}\n\n\tnoteOff(midi: number, gain: number, when: number) {}\n}\n\n//-------------------- Exported note handlers --------------------\n\n/**\n * Exports available note handlers so they are used by their respective\n * nodes from the palette.\n */\nexport const NoteHandlers = {\n\t'osc': OscNoteHandler,\n\t'buffer': BufferNoteHandler,\n\t'ADSR': ADSRNoteHandler,\n\t'LFO': LFONoteHandler,\n\t'restartable': RestartableNoteHandler,\n\t'soundBank': SoundBankNoteHandler\n};\n\n\n//-------------------- Private classes --------------------\n\n/**\n * Tracks a node output connections and disconnections, to be used\n * when cloning, removing or controlling nodes.\n */\nclass OutputTracker {\n\toutputs: (AudioNode | AudioParam) [] = [];\n\n\tconstructor(anode: AudioNode) {\n\t\tthis.onBefore(anode, 'connect', this.connect, (oldf, obj, args) => {\n\t\t\tif (args[0].custom && args[0].anode) args[0] = args[0].anode;\n\t\t\toldf.apply(obj, args);\n\t\t});\n\t\tthis.onBefore(anode, 'disconnect', this.disconnect);\n\t}\n\n\tconnect(np: AudioParam) {\n\t\tthis.outputs.push(np);\n\t}\n\n\tdisconnect(np: AudioParam) {\n\t\tremoveArrayElement(this.outputs, np);\n\t}\n\n\tonBefore(obj: any, fname: string, funcToCall: Function,\n\t\tcb?: (oldf: Function, obj: any, args: any) => void): void {\n\t\tconst oldf = obj[fname];\n\t\tconst self = this;\n\t\tobj[fname] = function() {\n\t\t\tfuncToCall.apply(self, arguments);\n\t\t\tif (cb) cb(oldf, obj, arguments)\n\t\t\telse oldf.apply(obj, arguments);\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ts/synth/notes.ts","/** Configuration data for an AudioNode parameter */\nexport interface NodeParamDef {\n\tinitial: any;\n\tmin?: number;\n\tmax?: number;\n\tlinear?: boolean;\n\tchoices?: string[];\n\thandler?: string;\n\tphandler?: any;\n}\n\n/** Configuration data for an AudioNode */\nexport interface NodeDef {\n\tconstructor: string | null;\n\tcustom?: boolean;\n\tnoteHandler?: string;\n\tcontrol?: boolean;\n\tparams: { [key: string]: NodeParamDef };\n}\n\n/** A set of AudioNode configuration elements */\nexport interface NodePalette {\n\t[key: string]: NodeDef;\n}\n\n//-------------------- Node palette definition --------------------\n\nconst OCTAVE_DETUNE: NodeParamDef = {\n\tinitial: 0,\n\tmin: -1200,\n\tmax: 1200,\n\tlinear: true\n};\n\n/**\n * The set of AudioNodes available to the application, along with\n * their configuration.\n */\nexport var palette: NodePalette = {\n\t// Sources\n\tOscillator: {\n\t\tconstructor: 'createOscillator',\n\t\tnoteHandler: 'osc',\n\t\tparams: {\n\t\t\tfrequency: { initial: 220, min: 20, max: 20000 },\n\t\t\tdetune: OCTAVE_DETUNE,\n\t\t\ttype: {\n\t\t\t\tinitial: 'sawtooth',\n\t\t\t\tchoices: ['sine', 'square', 'sawtooth', 'triangle']\n\t\t\t}\n\t\t}\n\t},\n\tBuffer: {\n\t\tconstructor: 'createBufferSource',\n\t\tnoteHandler: 'buffer',\n\t\tparams: {\n\t\t\tplaybackRate: { initial: 1, min: 0, max: 8 },\n\t\t\tdetune: OCTAVE_DETUNE,\n\t\t\tbuffer: {\n\t\t\t\tinitial: null,\n\t\t\t\thandler: 'BufferDataHandler'\n\t\t\t},\n\t\t\tloop: { initial: false },\n\t\t\tloopStart: { initial: 0, min: 0, max: 10 },\n\t\t\tloopEnd: { initial: 3, min: 0, max: 10 }\n\t\t}\n\t},\n\tNoise: {\n\t\tconstructor: 'createNoise',\n\t\tnoteHandler: 'restartable',\n\t\tcustom: true,\n\t\tparams: {\n\t\t\tgain:  { initial: 1, min: 0, max: 10 }\n\t\t}\n\t},\n\tLineIn: {\n\t\tconstructor: 'createLineIn',\n\t\tcustom: true,\n\t\tparams: {}\n\t},\n\tSoundBank: {\n\t\tconstructor: 'createBufferSource',\n\t\tnoteHandler: 'soundBank',\n\t\tparams: {\n\t\t\tbuffer: {\n\t\t\t\tinitial: null,\n\t\t\t\thandler: 'SoundBankHandler'\n\t\t\t}\n\t\t}\t\n\t},\n\t// Effects\n\tGain: {\n\t\tconstructor: 'createGain',\n\t\tparams: {\n\t\t\tgain: { initial: 1, min: 0, max: 10, linear: true }\n\t\t}\n\t},\n\tFilter: {\n\t\tconstructor: 'createBiquadFilter',\n\t\tparams: {\n\t\t\tfrequency: { initial: 440, min: 20, max: 20000 },\n\t\t\tQ: { initial: 0, min: 0, max: 100 },\n\t\t\tdetune: OCTAVE_DETUNE,\n\t\t\tgain: { initial: 0, min: -40, max: 40, linear: true },\n\t\t\ttype: {\n\t\t\t\tinitial: 'lowpass',\n\t\t\t\tchoices: ['lowpass', 'highpass', 'bandpass',\n\t\t\t\t\t'lowshelf', 'highshelf', 'peaking', 'notch', 'allpass']\n\t\t\t}\n\t\t},\n\t},\n\tDelay: {\n\t\tconstructor: 'createDelay',\n\t\tparams: {\n\t\t\tdelayTime: { initial: 1, min: 0, max: 5 }\n\t\t}\n\t},\n\tStereoPan: {\n\t\tconstructor: 'createStereoPanner',\n\t\tparams: {\n\t\t\tpan: { initial: 0, min: -1, max: 1, linear: true }\n\t\t}\n\t},\n\tCompressor: {\n\t\tconstructor: 'createDynamicsCompressor',\n\t\tparams: {\n\t\t\tthreshold: { initial: -24, min: -100, max: 0, linear: true },\n\t\t\tknee: { initial: 30, min: 0, max: 40, linear: true },\n\t\t\tratio: { initial: 12, min: 1, max: 20, linear: true },\n\t\t\treduction: { initial: 0, min: -20, max: 0, linear: true },\n\t\t\tattack: { initial: 0.003, min: 0, max: 1 },\n\t\t\trelease: { initial: 0.25, min: 0, max: 1 }\n\t\t}\n\t},\n\tDetuner: {\n\t\tconstructor: 'createDetuner',\n\t\tcustom: true,\n\t\tparams: {\n\t\t\toctave: { initial: 0, min: -2, max: 2, linear: true }\n\t\t}\n\t},\n\t// Controllers\n\tLFO: {\n\t\tconstructor: 'createOscillator',\n\t\tnoteHandler: 'LFO',\n\t\tcontrol: true,\n\t\tparams: {\n\t\t\tfrequency: { initial: 5, min: 0.01, max: 200 },\n\t\t\tdetune: OCTAVE_DETUNE,\n\t\t\ttype: {\n\t\t\t\tinitial: 'sine',\n\t\t\t\tchoices: ['sine', 'square', 'sawtooth', 'triangle']\n\t\t\t}\n\t\t}\n\t},\n\tGainCtrl: {\n\t\tconstructor: 'createGain',\n\t\tcontrol: true,\n\t\tparams: {\n\t\t\tgain: { initial: 10, min: 0, max: 100, linear: true }\n\t\t}\n\t},\n\tADSR: {\n\t\tconstructor: 'createADSR',\n\t\tnoteHandler: 'ADSR',\n\t\tcontrol: true,\n\t\tcustom: true,\n\t\tparams: {\n\t\t\tattack:  { initial: 0.2, min: 0, max: 10 },\n\t\t\tdecay:   { initial: 0.5, min: 0, max: 10 },\n\t\t\tsustain: { initial: 0.5, min: 0, max: 1, linear: true },\n\t\t\trelease: { initial: 1.0, min: 0, max: 10 },\n\t\t\tdepth:   { initial: 1.0, min: 0, max: 1 }\n\t\t}\n\t},\n\tNoiseCtrl: {\n\t\tconstructor: 'createNoiseCtrl',\n\t\tcontrol: true,\n\t\tcustom: true,\n\t\tparams: {\n\t\t\tfrequency: { initial: 4, min: 0, max: 200 },\n\t\t\tdepth:  { initial: 20, min: 0, max: 200 }\n\t\t}\n\t},\n\t// Output\n\tSpeaker: {\n\t\tconstructor: null,\n\t\tparams: {}\n\t}\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ts/synth/palette.ts","import { ModernAudioNode } from '../utils/modern';\n\n/**\n * Base class to derive all custom nodes from it\n */\nclass CustomNodeBase implements ModernAudioNode {\n\tcustom = true;\n\tchannelCount = 2;\n\tchannelCountMode: ChannelCountMode = 'max';\n\tchannelInterpretation: ChannelInterpretation = 'speakers';\n\tcontext: AudioContext;\n\tnumberOfInputs = 0;\n\tnumberOfOutputs = 1;\n\t// Connect - disconnect\n\tconnect(destination: AudioNode | AudioParam,\n\t\toutput?: number, input?: number): AudioNode {\n\t\t\treturn <AudioNode>destination;\n\t\t}\n\tdisconnect(destination: AudioNode | AudioParam,\n\t\toutput?: number, input?: number): void {}\n\t// Required for extending EventTarget\n\taddEventListener() {}\n\tdispatchEvent(evt: Event): boolean { return false; }\n\tremoveEventListener() {}\n}\n\n\n/**\n * Envelope generator that controls the evolution over time of a destination\n * node's parameter. All parameter control is performed in the corresponding\n * ADSR note handler.\n */\nexport class ADSR extends CustomNodeBase {\n\tattack: number = 0.2;\n\tdecay: number = 0.5;\n\tsustain: number = 0.5;\n\trelease: number = 1;\n\tdepth: number = 1;\n\t//TODO linear / exponential\n}\n\n\n/**\n * Base ScriptProcessor, to derive all custom audio processing nodes from it.\n */\nclass ScriptProcessor extends CustomNodeBase {\n\tgain: number = 1;\n\tanode: ScriptProcessorNode;\n\tplaying: boolean = false;\n\n\tconstructor(ac: AudioContext) {\n\t\tsuper();\n\t\tthis.anode = ac.createScriptProcessor(1024);\n\t\tthis.anode.onaudioprocess = evt => this.processAudio(evt);\n\t}\n\n\tconnect(node: AudioNode) {\n\t\treturn this.anode.connect(node);\n\t}\n\n\tdisconnect() {\n\t\tthis.anode.disconnect();\n\t}\n\n\tstart() {\n\t\tthis.playing = true;\n\t}\n\n\tstop() {\n\t\tthis.playing = false;\n\t}\n\n\tprocessAudio(evt: AudioProcessingEvent) {}\n}\n\n\n/**\n * Simple noise generator\n */\nexport class NoiseGenerator extends ScriptProcessor {\n\tprocessAudio(evt: AudioProcessingEvent) {\n\t\tfor (let channel = 0; channel < evt.outputBuffer.numberOfChannels; channel++) {\n\t\t\tconst out = evt.outputBuffer.getChannelData(channel);\n\t\t\tfor (let sample = 0; sample < out.length; sample++)\n\t\t\t\tout[sample] = this.playing ? this.gain * (Math.random() * 2 - 1) : 0;\n\t\t}\n\t}\n}\n\n\n/**\n * Noise generator to be used as control node.\n * It uses sample & hold in order to implement the 'frequency' parameter.\n */\nexport class NoiseCtrlGenerator extends ScriptProcessor {\n\tac: AudioContext;\n\tfrequency: number;\n\tdepth: number;\n\tsct: number;\n\tv: number;\n\n\tconstructor(ac: AudioContext) {\n\t\tsuper(ac);\n\t\tthis.ac = ac;\n\t\tthis.frequency = 4;\n\t\tthis.depth = 20;\n\t\tthis.sct = 0;\n\t\tthis.v = 0;\n\t}\n\n\tconnect(param: any) {\n\t\treturn this.anode.connect(param);\n\t}\n\n\tprocessAudio(evt: AudioProcessingEvent) {\n\t\tconst samplesPerCycle = this.ac.sampleRate / this.frequency;\n\t\tfor (let channel = 0; channel < evt.outputBuffer.numberOfChannels; channel++) {\n\t\t\tlet out = evt.outputBuffer.getChannelData(channel);\n\t\t\tfor (let sample = 0; sample < out.length; sample++) {\n\t\t\t\tthis.sct++;\n\t\t\t\tif (this.sct > samplesPerCycle) {\n\t\t\t\t\tthis.v = this.depth * (Math.random() * 2 - 1);\n\t\t\t\t\tthis.sct = 0; //this.sct - Math.floor(this.sct);\n\t\t\t\t}\n\t\t\t\tout[sample] = this.v;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n/**\n * Simple Pitch Shifter implemented in a quick & dirty way\n */\nexport class Detuner extends ScriptProcessor {\n\toctave: number = 0;\n\tnumberOfInputs = 1;\n\n\tprocessAudio(evt: AudioProcessingEvent) {\n\t\tconst dx = Math.pow(2, this.octave);\n\t\tfor (let channel = 0; channel < evt.outputBuffer.numberOfChannels; channel++) {\n\t\t\tlet out = evt.outputBuffer.getChannelData(channel);\n\t\t\tlet inbuf = evt.inputBuffer.getChannelData(channel);\n\t\t\tlet sct = 0;\n\t\t\tfor (let sample = 0; sample < out.length; sample++) {\n\t\t\t\tout[sample] = inbuf[Math.floor(sct)];\n\t\t\t\tsct += dx;\n\t\t\t\tif (sct >= inbuf.length) sct = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n/**\n * Captures audio from the PC audio input.\n * Requires user's authorization to grab audio input.\n */\nexport class LineInNode extends CustomNodeBase {\n\tsrcNode: ModernAudioNode;\n\tdstNode: ModernAudioNode;\n\tstream: any;\n\n\tconnect(anode: any) {\n\t\tif (this.srcNode) {\n\t\t\tthis.srcNode.connect(anode);\n\t\t\tthis.dstNode = anode;\n\t\t\treturn anode;\n\t\t}\n\t\tconst navigator: any = window.navigator;\n\t\tnavigator.getUserMedia = (navigator.getUserMedia ||\n\t\t\tnavigator.webkitGetUserMedia ||\n\t\t\tnavigator.mozGetUserMedia ||\n\t\t\tnavigator.msGetUserMedia);\n\t\tnavigator.getUserMedia({ audio: true }, (stream: any) => {\n\t\t\tconst ac: any = anode.context;\n\t\t\tthis.srcNode = ac.createMediaStreamSource(stream);\n\t\t\tlet a2: any = anode;\n\t\t\tif (a2.custom && a2.anode) a2 = a2.anode;\n\t\t\tthis.srcNode.connect(a2);\n\t\t\tthis.dstNode = anode;\n\t\t\tthis.stream = stream;\n\t\t}, (error: any) => console.error(error));\n\t}\n\n\tdisconnect() {\n\t\tthis.srcNode.disconnect(this.dstNode);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ts/synth/customNodes.ts","interface TimerCallback {\n\t(time: number): void;\n}\n\nexport class Timer {\n\trunning: boolean;\n\tac: AudioContext;\n\tcb: TimerCallback;\n\t_bpm: number;\n\tahead: number;\n\tnextNoteTime: number;\n\tnoteDuration: number;\n\n\tconstructor(ac: AudioContext, bpm = 60, ahead = 0.1) {\n\t\tthis.running = false;\n\t\tthis.ac = ac;\n\t\tthis.noteDuration = 0;\n\t\tthis.nextNoteTime = 0;\n\t\tthis.bpm = bpm;\n\t\tthis.ahead = ahead;\n\t}\n\n\tget bpm() { return this._bpm; }\n\n\tset bpm(v) {\n\t\tthis._bpm = v;\n\t\tthis.nextNoteTime -= this.noteDuration;\n\t\tthis.noteDuration = (1/4) * 60 / this._bpm;\n\t\tthis.nextNoteTime += this.noteDuration;\n\t}\n\n\tstart(cb?: TimerCallback): void {\n\t\tif (this.running) return;\n\t\tthis.running = true;\n\t\tif (cb) this.cb = cb;\n\t\tthis.nextNoteTime = this.ac.currentTime;\n\t\tthis.tick();\n\t}\n\n\tstop(): void {\n\t\tthis.running = false;\n\t}\n\n\ttick(): void {\n\t\tif (!this.running) return;\n\t\trequestAnimationFrame(this.tick.bind(this));\n\t\twhile (this.nextNoteTime < this.ac.currentTime + this.ahead) {\n\t\t\tif (this.cb) this.cb(this.nextNoteTime);\n\t\t\tthis.nextNoteTime += this.noteDuration;\n\t\t}\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/synth/timer.ts","import { Synth, NodeData, Portamento } from './synth';\n\n\n/**\n * A polyphonic synth controlling an array of voices\n */\nexport class Instrument {\n\tvoices: Voice[];\n\tpressed: number[];\n\treleased: number[];\n\tportamento: Portamento;\n\n\tconstructor(ac: AudioContext, json: any, numVoices: number, dest?: AudioNode) {\n\t\t// Setup voices\n\t\tthis.pressed = [];\n\t\tthis.released = [];\n\t\tthis.voices = [];\n\t\tfor (let i = 0; i < numVoices; i++) {\n\t\t\tthis.voices.push(new Voice(ac, json, dest));\n\t\t\tthis.released.push(i);\n\t\t}\n\t\t// Setup synth params by having a common instance for all voices\n\t\tthis.portamento = this.voices[0].synth.portamento;\n\t\tif (json.keyboard && json.keyboard.portamento)\n\t\t\tthis.portamento.time = json.keyboard.portamento;\n\t\tfor (let i = 1; i < numVoices; i++)\n\t\t\tthis.voices[i].synth.portamento = this.portamento;\n\t}\n\n\tnoteOn(midi: number, velocity: number = 1, when?: number): void {\n\t\tconst vnum = this.findVoice();\n\t\tconst voice = this.voices[vnum];\n\t\tthis.pressed.push(vnum);\n\t\tvoice.noteOn(midi, velocity, when);\n\t}\n\n\tnoteOff(midi: number, velocity: number = 1, when?: number): void {\n\t\tfor (let i = 0; i < this.voices.length; i++) {\n\t\t\tconst voice = this.voices[i];\n\t\t\tif (voice.lastNote == midi) {\n\t\t\t\tvoice.noteOff(midi, velocity, when);\n\t\t\t\tthis.released.push(i);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tallNotesOff() {\n\t\tfor (const voice of this.voices) {\n\t\t\tif (voice.lastNote) voice.noteOff(voice.lastNote);\n\t\t}\n\t}\n\n\tfindVoice(): number {\n\t\tlet voices: number[];\n\t\tif (this.released.length > 0) voices = this.released;\n\t\telse if (this.pressed.length > 0) voices = this.pressed;\n\t\telse throw \"This should never happen\";\n\t\treturn voices.splice(0, 1)[0];\n\t}\n\n\tclose() {\n\t\tfor (const voice of this.voices) voice.close();\n\t}\n}\n\n\n/**\n * An independent monophonic synth\n */\nexport class Voice {\n\tsynth: Synth;\n\tlastNote: number;\n\tloader: SynthLoader;\n\n\tconstructor(ac: AudioContext, json: any, dest?: AudioNode) {\n\t\tthis.loader = new SynthLoader();\n\t\tthis.synth = this.loader.load(ac, json, dest || ac.destination);\n\t\tthis.lastNote = 0;\n\t}\n\n\tnoteOn(midi: number, velocity: number = 1, when?: number): void {\n\t\tthis.synth.noteOn(midi, velocity, when);\n\t\tthis.lastNote = midi;\n\t}\n\n\tnoteOff(midi: number, velocity: number = 1, when?: number): void {\n\t\tthis.synth.noteOff(midi, velocity, when);\n\t\tthis.lastNote = 0;\n\t}\n\n\tclose(): void {\n\t\t// This method must be called to avoid memory leaks at the Web Audio level\n\t\tif (this.lastNote) this.noteOff(this.lastNote, 1);\n\t\tthis.loader.close();\n\t}\n}\n\n\n//-------------------- Private --------------------\n\nclass VoiceNodeData extends NodeData {\n\tinputs: NodeData[] = [];\n\tconstructor(public id: number) {\n\t\tsuper();\n\t}\n\tgetInputs(): NodeData[] {\n\t\treturn this.inputs;\n\t}\n}\n\nclass SynthLoader {\n\tnodes: VoiceNodeData[] = [];\n\tsynth: Synth;\n\n\tload(ac: AudioContext, json: any, dest: AudioNode): Synth {\n\t\tconst synth = new Synth(ac);\n\t\t// Add nodes into id-based table\n\t\tlet i = 0;\n\t\tfor (const jn of json.nodes)\n\t\t\tthis.nodes[i++] = new VoiceNodeData(jn.id);\n\t\t// Then set their list of inputs\n\t\tfor (let i = 0; i < json.nodes.length; i++)\n\t\t\tfor (const inum of json.nodes[i].inputs) {\n\t\t\t\tlet input = this.nodeById(inum);\n\t\t\t\tif (input) this.nodes[i].inputs.push();\n\t\t\t}\n\t\t// Then set their data\n\t\tfor (let i = 0; i < json.nodes.length; i++) {\n\t\t\tconst type = json.nodeData[i].type;\n\t\t\tif (type == 'out')\n\t\t\t\tsynth.initOutputNodeData(this.nodes[i], dest);\n\t\t\telse\n\t\t\t\tsynth.initNodeData(this.nodes[i], type);\n\t\t\tsynth.json2NodeData(json.nodeData[i], this.nodes[i]);\n\t\t}\n\t\t// Then notify connections to handler\n\t\tfor (const dst of this.nodes)\n\t\t\tfor (const src of dst.inputs)\n\t\t\t\tsynth.connectNodes(src, dst);\n\t\t// Finally, return the newly created synth\n\t\tthis.synth = synth;\n\t\treturn synth;\n\t}\n\n\tnodeById(id: number): VoiceNodeData | null {\n\t\tfor (const node of this.nodes)\n\t\t\tif (node.id === id) return node;\n\t\treturn null;\n\t}\n\n\tclose() {\n\t\tfor (const node of this.nodes)\n\t\t\tfor (const input of node.inputs)\n\t\t\t\tthis.synth.disconnectNodes(input, node);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ts/synth/instrument.ts","/**\n * Main entry point: setup synth editor and keyboard listener.\n */\n\nimport { SynthUI } from './synthUI/synthUI';\nimport { NoteInputs } from './piano/noteInputs'\nimport { Presets } from './synthUI/presets';\nimport { ModernWindow } from './utils/modern';\n\nconst graphCanvas = <HTMLCanvasElement>$('#graph-canvas')[0];\nconst ac = createAudioContext();\nconst synthUI = new SynthUI(ac, graphCanvas,\n\t$('#node-params'), $('#audio-graph-fft'), $('#audio-graph-osc'));\n\nconst presets = setupPanels();\n\nfunction createAudioContext(): AudioContext {\n\tconst CtxClass: any = window.AudioContext || window.webkitAudioContext;\n\treturn new CtxClass();\n}\n\nfunction setupPanels() {\n\tsetupPalette();\n\tconst inputs = new NoteInputs(synthUI);\n\tconst presets = new Presets(synthUI);\n\tpresets.beforeSave = (json) => $.extend(json, { keyboard: inputs.piano.toJSON() });\n\tpresets.afterLoad = (json) => inputs.piano.fromJSON(json.keyboard);\n\treturn presets.presets;\n}\n\n\nfunction setupPalette() {\n\t$(function() {\n\t\tlet nano: any = $('.nano');\n\t\tnano.nanoScroller({ preventPageScrolling: true });\n\t});\n}\n\n\ndeclare var window: ModernWindow;\n\n\n\n// WEBPACK FOOTER //\n// ./ts/main.ts","import { Graph, Node, GraphHandler } from './graph';\nimport { Synth, NodeData } from '../synth/synth';\nimport { ModernAudioNode, focusable } from '../utils/modern';\nimport * as popups from '../utils/popups';\n\n/**\n * Customizes the generic graph editor in order to manipulate and control a graph of\n * AudioNodes\n */\nexport class SynthUI {\n\tgr: Graph;\n\tsynth: Synth;\n\tnw: number;\n\tnh: number;\n\toutNode: ModernAudioNode;\n\n\tconstructor(ac: AudioContext, graphCanvas: HTMLCanvasElement, jqParams: JQuery, jqFFT: JQuery, jqOsc: JQuery) {\n\t\tthis.gr = new Graph(graphCanvas);\n\t\tthis.gr.handler = new SynthGraphHandler(this, jqParams, jqFFT, jqOsc);\n\t\tthis.synth = new Synth(ac);\n\t\tthis.registerPaletteHandler();\n\t\tthis.addOutputNode();\n\t}\n\n\taddOutputNode() {\n\t\t//TODO avoid using hardcoded position\n\t\tconst out = new Node(500, 210, 'Out');\n\t\tout.data = new GraphNodeData(out);\n\t\tthis.synth.initOutputNodeData(out.data, this.synth.ac.destination);\n\t\tthis.outNode = out.data.anode;\n\t\tthis.gr.addNode(out, 'node-out');\n\t\tthis.initNodeDimensions(out);\n\t}\n\n\tregisterPaletteHandler() {\n\t\tvar self = this;\t// JQuery sets 'this' in event handlers\n\t\t$('.palette .node').click(function(evt) {\n\t\t\tlet elem = $(this);\n\t\t\tlet classAttr = elem.attr('class') || '';\n\t\t\tlet classes = classAttr.split(/\\s+/).filter(c => c != 'node');\n\t\t\tlet type = elem.attr('data-type');\n\t\t\tif (!type) return;\n\t\t\tself.addNode(type,\n\t\t\t\telem.find('.node-text').html(), classes.join(' '));\n\t\t});\n\t}\n\n\taddNode(type: string, text: string, classes: string): void {\n\t\tlet { x, y } = this.findFreeSpot();\n\t\tconst n = new Node(x, y, text);\n\t\tthis.createNodeData(n, type);\n\t\tthis.gr.addNode(n, classes);\n\t\tthis.gr.selectNode(n);\n\t}\n\n\tremoveNode(n: Node): void {\n\t\tthis.gr.removeNode(n);\n\t}\n\n\tremoveNodeData(data: NodeData): void {\n\t\tthis.synth.removeNodeData(data);\n\t}\n\n\tcreateNodeData(n: Node, type: string): void {\n\t\tn.data = new GraphNodeData(n);\n\t\tif (type == 'out') {\n\t\t\tthis.synth.initOutputNodeData(n.data, this.synth.ac.destination);\n\t\t\tthis.outNode = n.data.anode;\n\t\t}\n\t\telse\n\t\t\tthis.synth.initNodeData(n.data, type);\n\t}\n\n\t//----- Rest of methods are used to find a free spot in the canvas -----\n\n\tfindFreeSpot() {\n\t\tlet maxDist = 0;\n\t\tconst canvasW = this.gr.canvas.width;\n\t\tconst canvasH = this.gr.canvas.height;\n\t\tlet x = canvasW / 2;\n\t\tlet y = canvasH / 2;\n\t\tfor (let xx = 10; xx < canvasW - this.nw; xx += 10) {\n\t\t\tfor (let yy = 10; yy < canvasH - this.nh; yy += 10) {\n\t\t\t\tconst dist = this.dist2nearestNode(xx, yy);\n\t\t\t\tif (dist > maxDist && dist < this.nw * 3) {\n\t\t\t\t\tx = xx;\n\t\t\t\t\ty = yy;\n\t\t\t\t\tmaxDist = dist;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn { x, y };\n\t}\n\n\tdist2nearestNode(x: number, y: number) {\n\t\tlet minDist = Number.MAX_VALUE;\n\t\tfor (const n of this.gr.nodes) {\n\t\t\tconst dx = x - n.x;\n\t\t\tconst dy = y - n.y;\n\t\t\tconst dist = Math.sqrt(dx*dx + dy*dy);\n\t\t\tif (dist < minDist) minDist = dist;\n\t\t}\n\t\treturn minDist;\n\t}\n\n\tinitNodeDimensions(n: Node) {\n\t\tthis.nw = n.element.outerWidth() || 0;\n\t\tthis.nh = n.element.outerHeight() || 0;\n\t}\n\n}\n\n\n//-------------------- Privates --------------------\n\nimport { NodeDef } from '../synth/palette';\nimport { renderParams } from './paramsUI';\nimport { AudioAnalyzer } from './analyzer';\n\n\nclass GraphNodeData extends NodeData {\n\tnode: Node;\n\tconstructor(node: Node) {\n\t\tsuper();\n\t\tthis.node = node;\n\t}\n\tgetInputs(): NodeData[] {\n\t\tconst result: NodeData[] = [];\n\t\tfor (const nin of this.node.inputs)\n\t\t\tresult.push(nin.data);\n\t\treturn result;\n\t}\n}\n\nclass SynthGraphHandler implements GraphHandler {\n\n\tsynthUI: SynthUI;\n\tjqParams: JQuery;\n\tarrowColor: string;\n\tctrlArrowColor: string;\n\tanalyzer: AudioAnalyzer;\n\n\tconstructor(synthUI: SynthUI, jqParams: JQuery, jqFFT: JQuery, jqOsc: JQuery) {\n\t\tthis.synthUI = synthUI;\n\t\tthis.jqParams = jqParams;\n\t\tthis.arrowColor = getCssFromClass('arrow', 'color');\n\t\tthis.ctrlArrowColor = getCssFromClass('arrow-ctrl', 'color');\n\t\tthis.registerNodeDelete(jqParams.parent()[0]);\n\t\tthis.analyzer = new AudioAnalyzer(jqFFT, jqOsc);\n\t}\n\n\tregisterNodeDelete(elem: HTMLElement) {\n\t\t$(focusable(elem)).keydown((evt: any) => {\n\t\t\tif (!(evt.keyCode == 46 || (evt.keyCode == 8 && evt.metaKey))) return;\n\t\t\tif (popups.isOpen) return;\n\t\t\tconst selectedNode = this.getSelectedNode();\n\t\t\tif (!selectedNode) return;\n\t\t\tif (selectedNode.data.isOut) return;\n\t\t\tpopups.confirm('Delete node?',\n\t\t\t\t'Please confirm node deletion', confirmed => {\n\t\t\t\tif (!confirmed) return;\n\t\t\t\tthis.synthUI.removeNode(selectedNode);\n\t\t\t\tthis.jqParams.empty();\n\t\t\t});\n\t\t});\n\t}\n\n\tgetSelectedNode(): Node | null {\n\t\tfor (const node of this.synthUI.gr.nodes)\n\t\t\tif (node.element.hasClass('selected')) return node;\n\t\treturn null;\n\t}\n\n\thasAudioParams(ndata: NodeData) {\n\t\tconst aparams = Object.keys(ndata.nodeDef.params)\n\t\t\t.filter(pname => (<any>ndata).anode[pname] instanceof AudioParam);\n\t\treturn aparams.length > 0;\n\t}\n\n\t//-------------------- Implementation of the GraphHandler interface --------------------\n\tcanBeSource(n: Node): boolean {\n\t\tconst data: NodeData = n.data;\n\t\treturn data.anode != this.synthUI.outNode;\n\t}\n\n\tcanConnect(src: Node, dst: Node): boolean {\n\t\tconst srcData: NodeData = src.data;\n\t\tconst dstData: NodeData = dst.data;\n\t\tif (srcData.nodeDef.control)\n\t\t\treturn this.hasAudioParams(dstData);\n\t\treturn dstData.anode.numberOfInputs > 0;\n\t}\n\n\tconnected(src: Node, dst: Node): void {\n\t\tthis.synthUI.synth.connectNodes(src.data, dst.data);\n\t\t//TODO update paramsUI in case selected node is src\n\t}\n\n\tdisconnected(src: Node, dst: Node): void {\n\t\tthis.synthUI.synth.disconnectNodes(src.data, dst.data);\n\t}\n\n\tnodeSelected(n: Node): void {\n\t\tconst data: NodeData = n.data;\n\t\trenderParams(data, this.jqParams);\n\t}\n\n\tnodeRemoved(n: Node) {\n\t\tthis.synthUI.removeNodeData(n.data);\n\t}\n\n\tgetArrowColor(src: Node, dst: Node): string {\n\t\tconst srcData: NodeData = src.data;\n\t\treturn srcData.nodeDef.control ? this.ctrlArrowColor : this.arrowColor;\n\t}\n\n\tdata2json(n: Node): any {\n\t\treturn this.synthUI.synth.nodeData2json(n.data);\n\t}\n\n\tjson2data(n: Node, json: any): void {\n\t\tthis.synthUI.createNodeData(n, json.type);\n\t\tthis.synthUI.synth.json2NodeData(json, n.data);\n\t}\n\n\tgraphLoaded() {\n\t\tthis.analyzer.analyze(this.synthUI.outNode);\n\t}\n\n\tgraphSaved() {}\n}\n\n\nfunction getCssFromClass(className: string, propName: string) {\n\tconst tmp = $('<div>').addClass(className);\n\t$('body').append(tmp);\n\tconst propValue = tmp.css(propName);\n\ttmp.remove();\n\treturn propValue;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ts/synthUI/synthUI.ts","const SHIFT_KEY = 16;\nconst CAPS_LOCK = 20;\n\n/**\n * A generic directed graph editor.\n */\nexport class Graph {\n\n\tnodeCanvas: JQuery;\n\tcanvas: HTMLCanvasElement;\n\tnodes: Node[] = [];\n\tgraphDraw: GraphDraw;\n\tgraphInteract: GraphInteraction;\n\thandler: GraphHandler;\n\tlastId: number = 0;\n\n\tconstructor(canvas: HTMLCanvasElement) {\n\t\tif (!canvas.parentElement) return;\n\t\tthis.nodeCanvas = $(canvas.parentElement);\n\t\tthis.canvas = canvas;\n\t\tconst gc = canvas.getContext('2d');\n\t\tif (!gc) return;\n\t\tthis.graphDraw = new GraphDraw(this, gc, canvas);\n\t\tthis.graphInteract = new GraphInteraction(this, gc);\n\t\tthis.handler = new DefaultGraphHandler();\n\t}\n\n\taddNode(n: Node, classes?: string) {\n\t\tn.id = this.lastId++;\n\t\tn.element = $('<div>')\n\t\t\t.addClass('node')\n\t\t\t.html(`<div class=\"node-text\">${n.name}</div>`)\n\t\t\t.css({ left: n.x, top: n.y, cursor: 'default' });\n\t\tif (classes) n.element.addClass(classes);\n\t\tthis.nodeCanvas.append(n.element);\n\t\tthis.nodes.push(n);\n\t\tthis.graphInteract.registerNode(n);\n\t\tthis.draw();\n\t}\n\n\tremoveNode(n: Node): void {\n\t\tconst pos = this.nodes.indexOf(n);\n\t\tif (pos < 0)\n\t\t\treturn console.warn(`Node '${n.name}' is not a member of graph`);\n\t\tfor (const nn of this.nodes) {\n\t\t\tif (n == nn) continue;\n\t\t\tthis.disconnect(n, nn);\n\t\t\tthis.disconnect(nn, n);\n\t\t}\n\t\tthis.nodes.splice(pos, 1);\n\t\tn.element.remove();\n\t\tthis.handler.nodeRemoved(n);\n\t\tthis.draw();\n\t}\n\n\tselectNode(n: Node) {\n\t\tthis.graphInteract.selectNode(n);\n\t}\n\n\tconnect(srcn: Node, dstn: Node): boolean {\n\t\tif (!this.handler.canBeSource(srcn) || !this.handler.canConnect(srcn, dstn))\n\t\t\treturn false;\n\t\tdstn.addInput(srcn);\n\t\tthis.handler.connected(srcn, dstn);\n\t\treturn true;\n\t}\n\n\tdisconnect(srcn: Node, dstn: Node): boolean {\n\t\tif (!dstn.removeInput(srcn)) return false;\n\t\tthis.handler.disconnected(srcn, dstn);\n\t\treturn true;\n\t}\n\n\tdraw() {\n\t\tthis.graphDraw.draw();\n\t}\n\n\ttoJSON(): any {\n\t\tconst jsonNodes = [];\n\t\tconst jsonNodeData = [];\n\t\tfor (const node of this.nodes) {\n\t\t\tconst nodeInputs = [];\n\t\t\tfor (const nin of node.inputs)\n\t\t\t\tnodeInputs.push(nin.id);\n\t\t\tjsonNodes.push({\n\t\t\t\tid: node.id,\n\t\t\t\tx: node.x,\n\t\t\t\ty: node.y,\n\t\t\t\tname: node.name,\n\t\t\t\tinputs: nodeInputs,\n\t\t\t\tclasses: this.getAppClasses(node)\n\t\t\t});\n\t\t\tjsonNodeData.push(this.handler.data2json(node));\n\t\t}\n\t\tconst jsonGraph = {\n\t\t\tnodes: jsonNodes,\n\t\t\tnodeData: jsonNodeData\n\t\t}\n\t\tthis.handler.graphSaved();\n\t\treturn jsonGraph;\n\t}\n\n\tfromJSON(json: any) {\n\t\t// First, remove existing nodes\n\t\twhile (this.nodes.length > 0)\n\t\t\tthis.removeNode(this.nodes[0]);\n\t\tthis.lastId = 0;\n\t\t// Then add nodes\n\t\tfor (const jn of json.nodes) {\n\t\t\tconst node = new Node(jn.x, jn.y, jn.name);\n\t\t\tthis.addNode(node);\n\t\t\tnode.id = jn.id;\t// Override id after being initialized inside addNode\n\t\t\tnode.element.attr('class', jn.classes);\n\t\t}\n\t\t// Then connect them\n\t\tconst gh = this.handler;\n\t\tthis.handler = new DefaultGraphHandler();\t// Disable graph handler\n\t\tfor (let i = 0; i < json.nodes.length; i++) {\n\t\t\tfor (const inum of json.nodes[i].inputs) {\n\t\t\t\tconst src = this.nodeById(inum);\n\t\t\t\tif (src) this.connect(src, this.nodes[i]);\n\t\t\t}\n\t\t}\n\t\tthis.handler = gh;\t// Restore graph handler\n\t\t// Then set their data\n\t\tfor (let i = 0; i < json.nodes.length; i++) {\n\t\t\tthis.handler.json2data(this.nodes[i], json.nodeData[i]);\n\t\t}\n\t\t// Then notify connections to handler\n\t\tfor (const dst of this.nodes)\n\t\t\tfor (const src of dst.inputs)\n\t\t\t\tthis.handler.connected(src, dst);\n\t\t// And finally, draw the new graph\n\t\tthis.draw();\n\t\tthis.handler.graphLoaded();\n\t}\n\n\tnodeById(id: number): Node | null {\n\t\tfor (const node of this.nodes)\n\t\t\tif (node.id === id) return node;\n\t\treturn null;\n\t}\n\n\tgetAppClasses(n: Node): string {\n\t\tconst classes = n.element[0].className.split(/\\s+/);\n\t\tconst result = [];\n\t\tfor (const cname of classes) {\n\t\t\tif (cname == 'selected') continue;\n\t\t\tif (cname.substr(0, 3) == 'ui-') continue;\n\t\t\tresult.push(cname);\n\t\t}\n\t\treturn result.join(' ');\n\t}\n}\n\n/**\n * A node in the graph. Application-specific data can be attached\n * to its data property.\n */\nexport class Node {\n\tid: number;\n\tx: number;\n\ty: number;\n\tname: string;\n\tinputs: Node[] = [];\n\telement: JQuery;\n\tw: number;\n\th: number;\n\tdata: any;\n\n\tconstructor(x: number, y: number, name: string) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.name = name.replace(/<[^<]*>/g, t => t == '<br>' ? t : '');\n\t}\n\n\taddInput(n: Node) {\n\t\tthis.inputs.push(n);\n\t}\n\n\tremoveInput(n: Node): boolean {\n\t\tconst pos: number = this.inputs.indexOf(n);\n\t\tif (pos < 0) return false;\n\t\tthis.inputs.splice(pos, 1);\n\t\treturn true;\n\t}\n\n}\n\n/**\n * A set of callbacks to be implemented by the application in order\n * to customize the graph editor and add application-specific behavior.\n */\nexport interface GraphHandler {\n\tcanBeSource(n: Node): boolean;\n\tcanConnect(src: Node, dst: Node): boolean;\n\tconnected(src: Node, dst: Node): void;\n\tdisconnected(src: Node, dst: Node): void;\n\tnodeSelected(n: Node): void;\n\tnodeRemoved(n: Node): void;\n\tgetArrowColor(src: Node, dst: Node): string;\n\tdata2json(n: Node): any;\n\tjson2data(n: Node, json: any): void;\n\tgraphLoaded(): void;\n\tgraphSaved(): void;\n}\n\n\n//------------------------- Privates -------------------------\n\n/** Default, do-nothing GraphHandler implementation */\nclass DefaultGraphHandler implements GraphHandler {\n\tcanBeSource(n: Node): boolean { return true; }\n\tcanConnect(src: Node, dst: Node): boolean { return true; }\n\tconnected(src: Node, dst: Node): void {}\n\tdisconnected(src: Node, dst: Node):void {}\n\tnodeSelected(n: Node): void {}\n\tnodeRemoved(n: Node): void {}\n\tgetArrowColor(src: Node, dst: Node): string { return \"black\"; }\n\tdata2json(n: Node): any { return {}; }\n\tjson2data(n: Node, json: any): void {}\n\tgraphLoaded(): void {}\n\tgraphSaved(): void {}\n}\n\n/**\n * Handles all UI interaction with graph in order to move, select, connect\n * and disconnect nodes.\n */\nclass GraphInteraction {\n\n\tgraph: Graph;\n\tgc: CanvasRenderingContext2D;\n\tdragging = false;\n\tselectedNode: Node;\n\n\tconstructor(graph: Graph, gc: CanvasRenderingContext2D) {\n\t\tthis.graph = graph;\n\t\tthis.gc = gc;\n\t\tthis.setupConnectHandler(gc.canvas);\n\t}\n\n\tregisterNode(n: Node) {\n\t\t(<any>n.element).draggable({\n\t\t\tcontainment: 'parent',\n\t\t\tdistance: 5,\n\t\t\tstack: '.node',\n\t\t\tdrag: (event: Event, ui: any) => {\n\t\t\t\tn.x = ui.position.left;\n\t\t\t\tn.y = ui.position.top;\n\t\t\t\tthis.graph.draw();\n\t\t\t},\n\t\t\tstart: (event: Event, ui: any) => {\n\t\t\t\tthis.dragging = true;\n\t\t\t\tui.helper.css('cursor', 'move');\n\t\t\t},\n\t\t\tstop: (event: Event, ui: any) => {\n\t\t\t\tui.helper.css('cursor', 'default');\n\t\t\t\tthis.dragging = false;\n\t\t\t}\n\t\t});\n\t\tn.element.click(_ => {\n\t\t\tif (this.dragging) return;\n\t\t\tif (this.selectedNode == n) return;\n\t\t\tthis.selectNode(n);\n\t\t});\n\t}\n\n\tselectNode(n: Node): void {\n\t\tif (this.selectedNode)\n\t\t\tthis.selectedNode.element.removeClass('selected');\n\t\tn.element.addClass('selected');\n\t\tthis.selectedNode = n;\n\t\tthis.graph.handler.nodeSelected(n);\n\t}\n\n\tsetupConnectHandler(elem: HTMLElement | null) {\n\t\tif (!elem) return;\n\t\tlet srcn: Node | null;\n\t\tlet connecting = false;\n\t\twhile (elem != null && elem.tabIndex < 0\n\t\t\t&& elem.nodeName.toLowerCase() != 'body')\n\t\t\telem = elem.parentElement;\n\t\tif (!elem) return;\n\t\t$(elem).keydown(evt => {\n\t\t\tif (evt.keyCode == CAPS_LOCK) return this.setGrid([20, 20]);\n\t\t\tif (evt.keyCode != SHIFT_KEY || connecting) return;\n\t\t\tsrcn = this.getNodeFromDOM(this.getElementUnderMouse());\n\t\t\tif (!srcn) return;\n\t\t\tif (!this.graph.handler.canBeSource(srcn)) {\n\t\t\t\tsrcn.element.css('cursor', 'not-allowed');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconnecting = true;\n\t\t\tthis.registerRubberBanding(srcn);\n\t\t})\n\t\t.keyup(evt => {\n\t\t\tif (evt.keyCode == CAPS_LOCK) return this.setGrid(null);\n\t\t\tif (evt.keyCode != SHIFT_KEY) return;\n\t\t\tconnecting = false;\n\t\t\tthis.deregisterRubberBanding();\n\t\t\tconst dstn = this.getNodeFromDOM(this.getElementUnderMouse());\n\t\t\tif (!dstn || srcn == dstn) return;\n\t\t\tif (srcn) this.connectOrDisconnect(srcn, dstn);\n\t\t\tthis.graph.draw();\n\t\t});\n\t}\n\n\tsetGrid(grid: any): void {\n\t\t$(this.graph.nodeCanvas).find('.node').draggable( \"option\", \"grid\", grid);\n\t}\n\n\tconnectOrDisconnect(srcn: Node, dstn: Node) {\n\t\tif (this.graph.disconnect(srcn, dstn)) return;\n\t\telse this.graph.connect(srcn, dstn);\n\t}\n\n\tgetElementUnderMouse(): JQuery | null {\n\t\tconst hovered = $(':hover');\n\t\tif (hovered.length <= 0) return null;\n\t\tconst jqNode = $(hovered.get(hovered.length - 1));\n\t\tif (jqNode.hasClass('node')) return jqNode;\n\t\tif (jqNode.parent().hasClass('node')) return jqNode.parent();\n\t\treturn null;\n\t}\n\n\tregisterRubberBanding(srcn: Node) {\n\t\tconst ofs = this.graph.nodeCanvas.offset();\n\t\tif (!ofs) return;\n\t\tconst dstn = new Node(0, 0, '');\n\t\tdstn.w = 0;\n\t\tdstn.h = 0;\n\t\t$(this.graph.nodeCanvas).on('mousemove', evt => {\n\t\t\tif (!evt) return;\n\t\t\tlet cltx = evt.clientX || 0;\n\t\t\tlet clty = evt.clientY || 0;\n\t\t\tdstn.x = cltx - ofs.left;\n\t\t\tdstn.y = clty - ofs.top + ($('body').scrollTop() || 0);\n\t\t\tthis.graph.draw();\n\t\t\tthis.gc.save();\n\t\t\tthis.gc.setLineDash([10]);\n\t\t\tthis.graph.graphDraw.drawArrow(srcn, dstn);\n\t\t\tthis.gc.restore();\n\t\t});\n\t\t// Setup cursors\n\t\tthis.graph.nodeCanvas.css('cursor', 'crosshair');\n\t\tthis.graph.nodeCanvas.find('.node').css('cursor', 'crosshair');\n\t\tfor (const n of this.graph.nodes)\n\t\t\tif (n != srcn && !this.graph.handler.canConnect(srcn, n))\n\t\t\t\tn.element.css('cursor', 'not-allowed');\n\t}\n\n\tderegisterRubberBanding() {\n\t\tthis.graph.nodeCanvas.css('cursor', '');\n\t\tthis.graph.nodeCanvas.find('.node').css('cursor', 'default');\n\t\tthis.graph.nodeCanvas.off('mousemove');\n\t\tthis.graph.graphDraw.draw();\n\t}\n\n\tgetNodeFromDOM(jqNode: JQuery | null) {\n\t\tif (!jqNode) return null;\n\t\tfor (const n of this.graph.nodes)\n\t\t\tif (n.element[0] == jqNode[0]) return n;\n\t\treturn null;\n\t}\n}\n\n\ninterface Point {\n\tx: number,\n\ty: number\n}\n\n\n/**\n * Handles graph drawing by rendering arrows in a canvas.\n */\nclass GraphDraw {\n\n\tgraph: Graph;\n\tgc: CanvasRenderingContext2D;\n\tcanvas: HTMLCanvasElement;\n\tarrowHeadLen = 10;\n\tnodes: Node[];\n\n\tconstructor(graph: Graph, gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement) {\n\t\tthis.graph = graph;\n\t\tthis.gc = gc;\n\t\tthis.canvas = canvas;\n\t\tthis.nodes = graph.nodes;\n\t}\n\n\tdraw() {\n\t\tthis.clearCanvas();\n\t\tthis.gc.lineWidth = 2;\n\t\tfor (const ndst of this.nodes)\n\t\t\tfor (const nsrc of ndst.inputs)\n\t\t\t\tthis.drawArrow(nsrc, ndst);\n\t}\n\n\tclearCanvas() {\n\t\tthis.gc.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t}\n\n\tdrawArrow(srcNode: Node, dstNode: Node) {\n\t\tconst srcPoint = this.getNodeCenter(srcNode);\n\t\tconst dstPoint = this.getNodeCenter(dstNode);\n\t\tthis.gc.strokeStyle = this.graph.handler.getArrowColor(srcNode, dstNode);\n\t\tthis.gc.beginPath();\n\t\tthis.gc.moveTo(srcPoint.x, srcPoint.y);\n\t\tthis.gc.lineTo(dstPoint.x, dstPoint.y);\n\t\tthis.drawArrowTip(srcPoint, dstPoint);\n\t\tthis.gc.closePath();\n\t\tthis.gc.stroke();\n\t}\n\n\tdrawArrowTip(src: Point, dst: Point) {\n\t\tconst posCoef = 0.6;\n\t\tconst mx = src.x + (dst.x - src.x) * posCoef;\n\t\tconst my = src.y + (dst.y - src.y) * posCoef;\n\t\tvar angle = Math.atan2(dst.y - src.y, dst.x - src.x);\n\t\tthis.gc.moveTo(mx, my);\n\t\tthis.gc.lineTo(\n\t\t\tmx - this.arrowHeadLen * Math.cos(angle - Math.PI/6),\n\t\t\tmy - this.arrowHeadLen * Math.sin(angle - Math.PI/6)\n\t\t);\n\t\tthis.gc.moveTo(mx, my);\n\t\tthis.gc.lineTo(\n\t\t\tmx - this.arrowHeadLen * Math.cos(angle + Math.PI/6),\n\t\t\tmy - this.arrowHeadLen * Math.sin(angle + Math.PI/6)\n\t\t);\n\t}\n\n\tgetNodeCenter(n: Node): Point {\n\t\tn.w = n.w !== undefined ? n.w : n.element.outerWidth() || 0;\n\t\tn.h = n.h !== undefined ? n.h : n.element.outerHeight() || 0;\n\t\treturn { x: n.x + n.w / 2, y: n.y + n.h / 2 };\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ts/synthUI/graph.ts","import { Node } from './graph';\nimport { NodeData } from '../synth/synth';\nimport { NodeDef, NodeParamDef } from '../synth/palette';\nimport { log2linear, linear2log } from '../utils/modern';\nimport * as file from '../utils/file';\nimport * as popups from '../utils/popups';\n\n/**\n * Renders the UI controls associated with the parameters of a given node\n */\nexport function renderParams(ndata: NodeData, panel: JQuery): void {\n\tpanel.empty();\n\tconst boxes: JQuery[] = [];\n\tif (ndata.nodeDef.control && ndata.controlParams) {\n\t\tlet box = renderParamControl(ndata, panel);\n\t\tif (box) boxes.push();\n\t}\n\tconst params = Object.keys(ndata.nodeDef.params || {});\n\tif (params.length <= 0) return;\n\tfor (const param of params)\n\t\tif ((<any>ndata.anode)[param] instanceof AudioParam) {\n\t\t\tboxes.push(renderAudioParam(ndata.anode, ndata.nodeDef, param, panel));\n\t\t}\n\t\telse {\n\t\t\tlet box = renderOtherParam(ndata.anode, ndata.nodeDef, param, panel);\n\t\t\tif (box) boxes.push();\n\t\t}\n\tpositionBoxes(panel, boxes);\n}\n\n\nfunction positionBoxes(panel: JQuery, boxes: JQuery[]) {\n\tconst pw = panel.width() || 0;\n\tconst bw = boxes[0].width() || 0;\n\tconst sep = (pw - boxes.length * bw) / (boxes.length + 1);\n\tlet x = sep;\n\tfor (const box of boxes) {\n\t\tbox.css({\n\t\t\tposition: 'relative',\n\t\t\tleft: x\n\t\t});\n\t\tx += sep;\n\t}\n}\n\nfunction renderAudioParam(anode: AudioNode, ndef: NodeDef, param: string, panel: JQuery): JQuery {\n\tconst pdef: NodeParamDef = ndef.params[param];\n\tconst aparam: any = (<any>anode)[param];\n\tif (aparam['_value']) aparam.value = aparam['_value'];\n\treturn renderSlider(panel, pdef, param, aparam.value, value => {\n\t\taparam.value = value;\n\t\taparam['_value'] = value;\n\t});\n}\n\nfunction renderParamControl(ndata: NodeData, panel: JQuery): JQuery | null {\n\tif (!ndata.controlParams) return null;\n\tconst combo = renderCombo(panel, ndata.controlParams, ndata.controlParam, 'Controlling');\n\tcombo.change(_ => {\n\t\tif (ndata.controlParam)\n\t\t\tndata.anode.disconnect((<any>ndata.controlTarget)[ndata.controlParam]);\n\t\tndata.controlParam = '' + combo.val();\n\t\tndata.anode.connect((<any>ndata.controlTarget)[ndata.controlParam]);\n\t});\n\treturn combo.parent();\n}\n\nconst customRenderMethods = {\n\trenderBufferData,\n\trenderSoundBank\n};\n\nfunction renderOtherParam(anode: any, ndef: NodeDef,\n\tparam: string, panel: JQuery): JQuery | null {\n\tconst pdef: NodeParamDef = ndef.params[param];\n\tif (pdef.choices) {\n\t\tconst combo = renderCombo(panel, pdef.choices, anode[param], ucfirst(param));\n\t\tcombo.change(_ => {\n\t\t\tanode[param] = combo.val();\n\t\t});\n\t\treturn combo.parent();\n\t}\n\telse if (pdef.min != undefined)\n\t\treturn renderSlider(panel, pdef, param, anode[param], value => anode[param] = value);\n\telse if (typeof pdef.initial == 'boolean')\n\t\treturn renderBoolean(panel, pdef, param, anode, ucfirst(param));\n\telse if (pdef.phandler)\n\t\treturn (<any>customRenderMethods)[pdef.phandler.uiRender](panel, pdef, anode, param, ucfirst(param));\n\treturn null;\n}\n\n\nfunction renderSlider(panel: JQuery, pdef: NodeParamDef,\n\tparam: string, value: number, setValue: (value: number) => void): JQuery {\n\tconst sliderBox = $('<div class=\"slider-box\">');\n\tconst slider = $('<input type=\"range\" orient=\"vertical\">')\n\t\t.attr('min', 0)\n\t\t.attr('max', 1)\n\t\t.attr('step', 0.001)\n\t\t.attr('value', param2slider(value, pdef))\n\tconst numInput = $('<input type=\"number\">')\n\t\t.attr('min', pdef.min || 0)\n\t\t.attr('max', pdef.max || 1)\n\t\t.attr('value', truncateFloat(value, 5));\n\tsliderBox.append(numInput);\n\tsliderBox.append(slider);\n\tsliderBox.append($('<span><br/>' + ucfirst(param) + '</span>'));\n\tpanel.append(sliderBox);\n\tslider.on('input', _ => {\n\t\tconst value = slider2param(parseFloat('' + slider.val()), pdef);\n\t\tnumInput.val(truncateFloat(value, 5));\n\t\tsetValue(value);\n\t});\n\tnumInput.on('input', _ => {\n\t\tconst value = parseFloat('' + numInput.val());\n\t\tif (isNaN(value)) return;\n\t\tslider.val(param2slider(value, pdef));\n\t\tsetValue(value);\n\t});\n\treturn sliderBox;\n}\n\nfunction renderCombo(panel: JQuery, choices: string[], selected: string, label: string): JQuery {\n\tconst choiceBox = $('<div class=\"choice-box\">');\n\tconst combo = $('<select>').attr('size', choices.length || 2);\n\tfor (const choice of choices) {\n\t\tconst option = $('<option>').text(choice);\n\t\tif (choice == selected) option.attr('selected', 'selected');\n\t\tcombo.append(option);\n\t}\n\tchoiceBox.append(combo);\n\tcombo.after('<br/><br/>' + label);\n\tpanel.append(choiceBox);\n\treturn combo;\n}\n\nfunction renderBoolean(panel: JQuery, pdef: NodeParamDef, param: string,\n\tanode: any, label: string): JQuery {\n\tconst box = $('<div class=\"choice-box\">');\n\tconst button = $('<button class=\"btn btn-info\" data-toggle=\"button\" aria-pressed=\"false\">');\n\tbox.append(button);\n\tbutton.after('<br/><br/>' + label);\n\tpanel.append(box);\n\tif (anode[param]) {\n\t\tbutton.text('Enabled');\n\t\tbutton.addClass('active');\n\t\tbutton.attr('aria-pressed', 'true');\n\t}\n\telse {\n\t\tbutton.text('Disabled');\n\t\tbutton.removeClass('active');\n\t\tbutton.attr('aria-pressed', 'false');\n\t}\n\tbutton.click(_ => {\n\t\tanode[param] = !anode[param];\n\t\tbutton.text(anode[param] ? 'Enabled' : 'Disabled');\n\t});\n\treturn box;\n}\n\n\nfunction param2slider(paramValue: number, pdef: NodeParamDef): number {\n\tlet min = pdef.min || 0;\n\tlet max = pdef.max || 1;\n\tif (pdef.linear)\n\t\treturn (paramValue - min) / (max - min);\n\telse\n\t\treturn linear2log(paramValue, min, max);\n}\n\nfunction slider2param(sliderValue: number, pdef: NodeParamDef): number {\n\tlet min = pdef.min || 0;\n\tlet max = pdef.max || 1;\n\tif (pdef.linear)\n\t\treturn min + sliderValue * (max - min);\n\telse\n\t\treturn log2linear(sliderValue, min, max);\n}\n\n\n//-------------------- Custom parameter rendering --------------------\n\nfunction renderBufferData(panel: JQuery, pdef: NodeParamDef,\n\tanode: any, param: string, label: string): JQuery {\n\tconst box = $('<div class=\"choice-box\">');\n\tconst button = $(`\n\t\t<span class=\"btn btn-primary upload\">\n\t\t\t<input type=\"file\">\n\t\t\tLoad&nbsp;\n\t\t\t<span class=\"glyphicon glyphicon-open\" aria-hidden=\"true\"></span>\n\t\t</span>`);\n\tbox.append(button);\n\tbutton.after('<br/><br/>' + label);\n\tpanel.append(box);\n\tlet loading = true;\n\tbutton.find('input').change(evt => {\n\t\t// Trigger asynchronous upload & decode\n\t\tfile.uploadArrayBuffer(evt, soundFile => {\n\t\t\tanode['_encoded'] = soundFile;\n\t\t\tanode.context.decodeAudioData(soundFile, (buffer: any) => {\n\t\t\t\tanode['_buffer'] = buffer;\n\t\t\t\tloading = false;\n\t\t\t\t//TODO capture errors and report them with popups.alert\n\t\t\t\tpopups.close();\n\t\t\t});\n\t\t});\n\t\t// Open progress popup\n\t\tsetTimeout(_ => {\n\t\t\tif (loading)\n\t\t\t\tpopups.progress('Loading and decoding audio data...');\n\t\t}, 300);\n\t});\n\treturn box;\n}\n\nfunction setComboOptions(combo: JQuery, names: string[]) {\n\tcombo.empty();\n\tfor (const name of names)\n\t\tcombo.append('<option>' + name + '</option>');\n}\n\nfunction renderSoundBank(panel: JQuery, pdef: NodeParamDef,\n\tanode: any, param: string, label: string): JQuery {\n\tconst combo = renderCombo(panel, [], '', 'Buffers');\n\tcombo.css({\n\t\tmarginBottom: '10px', marginLeft: '-20px',\n\t\twidth: '140px', height: '100px',\n\t\toverflowX: 'auto'\n\t});\n\tconst buttons = $(`<div style=\"margin-bottom: -24px\">\n\t\t<span class=\"btn btn-primary upload\">\n\t\t\t<input type=\"file\">\n\t\t\t<span class=\"glyphicon glyphicon-open\" aria-hidden=\"true\"></span>\n\t\t</span>\n\t\t&nbsp;&nbsp;&nbsp;\n\t\t<span class=\"btn btn-danger\">\n\t\t\t<span class=\"glyphicon glyphicon-trash\" aria-hidden=\"true\"></span>\n\t\t</span></div>`);\n\tcombo.after(buttons);\n\tconst bufs = anode['_buffers'];\n\tconst encs = anode['_encodedBuffers'];\n\tconst names = anode['_names'];\n\tsetComboOptions(combo, names);\n\tbuttons.find('input').change(evt => {\n\t\t// Trigger asynchronous upload & decode\n\t\tfile.uploadArrayBuffer(evt, (fileData, file) => {\n\t\t\tencs.push(fileData);\n\t\t\tanode.context.decodeAudioData(fileData,\n\t\t\t\t(buffer: any) => bufs.push(buffer));\n\t\t\tnames.push(file.name);\n\t\t\tsetComboOptions(combo, names);\n\t\t});\n\t});\n\tbuttons.find('.btn-danger').click(_ => {\n\t\tconst idx = names.indexOf(combo.val());\n\t\tif (idx < 0) return;\n\t\t[encs, bufs, names].forEach(a => a.splice(idx, 1));\n\t\tsetComboOptions(combo, names);\n\t});\n\treturn combo.parent();\n}\n\n//-------------------- Misc utilities --------------------\n\nfunction ucfirst(str: string) {\n\treturn str[0].toUpperCase() + str.substring(1);\n}\n\nfunction truncateFloat(f: number, len: number): string {\n\tlet s: string = '' + f;\n\ts = s.substr(0, len);\n\tif (s[s.length - 1] == '.') return s.substr(0, len - 1);\n\telse return s;\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/synthUI/paramsUI.ts","import { ModernAudioNode } from '../utils/modern';\n\n/**\n * Displays FFT and Oscilloscope graphs from the output of a given AudioNode\n */\nexport class AudioAnalyzer {\n\tinput: ModernAudioNode | null;\n\tanode: AnalyserNode;\n\tcanvasFFT: HTMLCanvasElement;\n\tgcFFT: CanvasRenderingContext2D | null;\n\tcanvasOsc: HTMLCanvasElement;\n\tgcOsc: CanvasRenderingContext2D | null;\n\toscData: Uint8Array;\n\tfftData: Uint8Array;\n\n\tconstructor(jqfft: JQuery, jqosc: JQuery) {\n\t\tthis.canvasFFT = this.createCanvas(jqfft);\n\t\tthis.gcFFT = this.canvasFFT.getContext('2d');\n\t\tthis.canvasOsc = this.createCanvas(jqosc);\n\t\tthis.gcOsc = this.canvasOsc.getContext('2d');\n\t}\n\n\tcreateCanvas(panel: JQuery): HTMLCanvasElement {\n\t\tconst jqCanvas = $(`<canvas width=\"${panel.width()}\" height=\"${panel.height()}\">`);\n\t\tpanel.append(jqCanvas);\n\t\tconst canvas = <HTMLCanvasElement>jqCanvas[0];\n\t\treturn canvas;\n\t}\n\n\tcreateAnalyzerNode(ac: AudioContext) {\n\t\tif (this.anode) return;\n\t\tthis.anode = ac.createAnalyser();\n\t\tthis.fftData = new Uint8Array(this.anode.fftSize);\n\t\tthis.oscData = new Uint8Array(this.anode.fftSize);\n\t}\n\n\tanalyze(input: AudioNode) {\n\t\tthis.disconnect();\n\t\tthis.createAnalyzerNode(input.context);\n\t\tthis.input = input;\n\t\tthis.input.connect(this.anode);\n\t\tthis.requestAnimationFrame();\n\t}\n\n\tdisconnect() {\n\t\tif (!this.input) return;\n\t\tthis.input.disconnect(this.anode);\n\t\tthis.input = null;\n\t}\n\n\trequestAnimationFrame() {\n\t\twindow.requestAnimationFrame(_ => this.updateCanvas());\n\t}\n\tupdateCanvas() {\n\t\tif (!this.input) return;\n\t\tif (this.gcFFT)\n\t\t\tthis.drawFFT(this.gcFFT, this.canvasFFT, this.fftData, '#00FF00');\n\t\tif (this.gcOsc)\n\t\t\tthis.drawOsc(this.gcOsc, this.canvasOsc, this.oscData, '#FFFF00');\n\t\tthis.requestAnimationFrame();\n\t}\n\n\tdrawFFT(gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement,\n\t\t\tdata: Uint8Array, color: string) {\n\t\tconst [w, h] = this.setupDraw(gc, canvas, data, color);\n\t\tthis.anode.getByteFrequencyData(data);\n\t\tconst dx = (data.length / 2) / canvas.width;\n\t\tlet x = 0;\n\t\t//TODO calculate average of all samples from x to x + dx - 1\n\t\tfor (let i = 0; i < w; i++) {\n\t\t\tlet y = data[Math.floor(x)];\n\t\t\tx += dx;\n\t\t\tgc.moveTo(i, h - 1);\n\t\t\tgc.lineTo(i, h - 1 - h * y/256);\n\t\t}\n\t\tgc.stroke();\n\t\tgc.closePath();\n\t}\n\n\tdrawOsc(gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement,\n\t\tdata: Uint8Array, color: string) {\n\t\tconst [w, h] = this.setupDraw(gc, canvas, data, color);\n\t\tthis.anode.getByteTimeDomainData(data);\n\t\tgc.moveTo(0, h / 2);\n\t\tlet x = 0;\n\t\twhile (data[x] > 128 && x < data.length/4) x++;\n\t\twhile (data[x] < 128 && x < data.length/4) x++;\n\t\tconst dx = (data.length * 0.75) / canvas.width;\n\t\tfor (let i = 0; i < w; i++) {\n\t\t\tlet y = data[Math.floor(x)];\n\t\t\tx += dx;\n\t\t\tgc.lineTo(i, h * y/256);\n\t\t}\n\t\tgc.stroke();\n\t\tgc.closePath();\n\t}\n\n\tsetupDraw(gc: CanvasRenderingContext2D, canvas: HTMLCanvasElement,\n\t\tdata: Uint8Array, color: string) {\n\t\tconst w = canvas.width;\n\t\tconst h = canvas.height;\n\t\tgc.clearRect(0, 0, w, h);\n\t\tgc.beginPath();\n\t\tgc.strokeStyle = color;\n\t\treturn [w, h];\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/synthUI/analyzer.ts","import { Keyboard } from './keyboard';\nimport { MidiKeyboard } from './midi';\nimport { PianoKeyboard } from './piano';\nimport { Arpeggiator } from './arpeggiator';\n\nimport { NodeData } from '../synth/synth';\nimport { SynthUI } from '../synthUI/synthUI';\nimport { Instrument } from '../synth/instrument';\n\nconst NUM_VOICES = 8;\n\n/**\n * Manages all note-generation inputs:\n * \t- PC Keyboard\n * \t- Virtual piano keyboard\n *\t- An external MIDI keyboard\n * Handles switching to polyphonic mode and back to mono\n */\nexport class NoteInputs {\n\tsynthUI: SynthUI;\n\tpoly: boolean;\n\tinstrument: Instrument;\n\tlastNote: number;\n\tpiano: PianoKeyboard;\n\tarpeggiator: Arpeggiator;\n\n\tconstructor(synthUI: SynthUI) {\n\t\tthis.synthUI = synthUI;\n\t\tthis.poly = false;\n\t\t// Setup piano panel\n\t\tvar piano = new PianoKeyboard($('#piano'));\n\t\tthis.piano = piano;\n\t\tpiano.noteOn = (midi) => this.arpeggiator.sendNoteOn(midi, 1);\n\t\tpiano.noteOff = (midi) => this.arpeggiator.sendNoteOff(midi, 1);\n\t\t// Register poly on/off handlers\n\t\tpiano.polyOn = () => this.polyOn();\n\t\tpiano.polyOff = () => this.polyOff();\n\t\t// Setup PC keyboard\n\t\tvar kb = this.setupPCKeyboard(piano);\n\t\t// Bind piano octave with PC keyboard\n\t\tkb.baseNote = piano.baseNote;\n\t\tpiano.octaveChanged = baseNote => kb.baseNote = baseNote;\n\t\tthis.setupEnvelopeAnimation(piano);\n\t\t// Setup arpeggiator\n\t\tthis.setupArpeggiator(piano, synthUI.synth.ac);\n\t\t// Setup MIDI keyboard\n\t\tthis.setupMidiKeyboard(piano);\n\t}\n\n\tsetupPCKeyboard(piano: PianoKeyboard): Keyboard {\n\t\tvar kb = new Keyboard('#synth');\n\t\tkb.noteOn = (midi) => {\n\t\t\tif (document.activeElement.nodeName == 'INPUT' &&\n\t\t\t\tdocument.activeElement.getAttribute('type') != 'range') return;\n\t\t\tthis.arpeggiator.sendNoteOn(midi, 1);\n\t\t\tpiano.displayKeyDown(midi);\n\t\t};\n\t\tkb.noteOff = (midi) => {\n\t\t\tthis.arpeggiator.sendNoteOff(midi, 1);\n\t\t\tpiano.displayKeyUp(midi);\n\t\t};\n\t\treturn kb;\n\t}\n\n\tsetupMidiKeyboard(piano: PianoKeyboard) {\n\t\tvar midi = new MidiKeyboard();\n\t\tmidi.noteOn = (midi: number, velocity: number, channel: number): void => {\n\t\t\tthis.arpeggiator.sendNoteOn(midi, 1);\n\t\t\tpiano.displayKeyDown(midi);\n\t\t};\n\t\tmidi.noteOff = (midi: number, velocity: number, channel: number): void => {\n\t\t\tthis.arpeggiator.sendNoteOff(midi, 1);\n\t\t\tpiano.displayKeyUp(midi);\n\t\t};\n\t}\n\n\tsetupEnvelopeAnimation(piano: PianoKeyboard) {\n\t\tconst loaded = this.synthUI.gr.handler.graphLoaded;\n\t\tthis.synthUI.gr.handler.graphLoaded = function() {\n\t\t\tloaded.bind(this.synthUI.gr.handler)();\n\t\t\tlet adsr = null;\n\t\t\tfor (const node of this.synthUI.gr.nodes) {\n\t\t\t\tconst data: NodeData = node.data;\n\t\t\t\tif (data.type == 'ADSR') {\n\t\t\t\t\tadsr = data.anode;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpiano.setEnvelope(adsr || { attack: 0, release: 0 });\n\t\t}\n\t}\n\n\tsetupArpeggiator(piano: PianoKeyboard, ac: AudioContext) {\n\t\tthis.arpeggiator = new Arpeggiator(ac);\n\t\tpiano.arpeggioChanged = (bpm, mode, octaves) => {\n\t\t\tthis.arpeggiator.mode = mode;\n\t\t\tthis.arpeggiator.octaves = octaves;\n\t\t\tthis.arpeggiator.bpm = bpm;\n\t\t}\n\t\tthis.arpeggiator.noteOn =\n\t\t\t(midi, velocity, time) => this.noteOn(midi, velocity, time);\n\t\tthis.arpeggiator.noteOff =\n\t\t\t(midi, velocity, time) => this.noteOff(midi, velocity, time);\n\t}\n\n\n\tnoteOn(midi: number, velocity: number, time?: number): void {\n\t\tthis.lastNote = midi;\n\t\tconst portamento = this.piano.getPortamento();\n\t\tif (this.poly) {\n\t\t\tthis.instrument.portamento.time = portamento;\n\t\t\tthis.instrument.noteOn(midi, velocity, time);\n\t\t}\n\t\telse {\n\t\t\tthis.synthUI.synth.portamento.time = portamento;\n\t\t\tthis.synthUI.synth.noteOn(midi, velocity, time);\n\t\t}\n\t}\n\n\tnoteOff(midi: number, velocity: number, time?: number): void {\n\t\tthis.lastNote = 0;\n\t\tif (this.poly)\n\t\t\tthis.instrument.noteOff(midi, velocity, time);\n\t\telse\n\t\t\tthis.synthUI.synth.noteOff(midi, velocity, time);\n\t}\n\n\tpolyOn() {\n\t\tif (this.lastNote) this.noteOff(this.lastNote, 1);\n\t\tthis.poly = true;\n\t\tconst json = this.synthUI.gr.toJSON();\n\t\tthis.instrument = new Instrument(this.synthUI.synth.ac, json, NUM_VOICES);\n\t}\n\n\tpolyOff() {\n\t\tthis.poly = false;\n\t\tthis.instrument.close();\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/piano/noteInputs.ts","const KB_NOTES = 'ZSXDCVGBHNJMQ2W3ER5T6Y7UI9O0P';\nconst BASE_NOTE = 36;\n\n/**\n * Provides a piano keyboard using the PC keyboard.\n * Listens to keyboard events and generates MIDI-style noteOn/noteOff events.\n */\nexport class Keyboard {\n\n\tbaseNote: number;\n\n\tconstructor(kbTarget = 'body') {\n\t\tthis.setupHandler(kbTarget);\n\t\tthis.baseNote = BASE_NOTE;\n\t}\n\n\tsetupHandler(kbTarget: string) {\n\t\tconst pressedKeys: any = {};\n\t\t$(kbTarget)\n\t\t.on('keydown', evt => {\n\t\t\tlet kcode = evt.keyCode || 0;\n\t\t\tif (pressedKeys[kcode]) return;\t\t\t\t\t// Skip repetitions\n\t\t\tif (evt.metaKey || evt.altKey || evt.ctrlKey) return;\t// Skip browser shortcuts\n\t\t\tpressedKeys[kcode] = true;\n\t\t\tconst midi = this.key2midi(kcode);\n\t\t\tif (midi < 0) return;\n\t\t\tthis.noteOn(midi);\n\t\t})\n\t\t.on('keyup', evt => {\n\t\t\tlet kcode = evt.keyCode || 0;\n\t\t\tpressedKeys[kcode] = false;\n\t\t\tconst midi = this.key2midi(kcode);\n\t\t\tif (midi < 0) return;\n\t\t\tthis.noteOff(midi);\n\t\t});\n\t}\n\n\tkey2midi(keyCode: number): number {\n\t\tconst pos = KB_NOTES.indexOf(String.fromCharCode(keyCode));\n\t\tif (pos < 0) return -1;\n\t\treturn this.baseNote + pos;\n\t}\n\n\tnoteOn(midi: number):void {}\n\tnoteOff(midi: number): void {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ts/piano/keyboard.ts","export class MidiKeyboard {\n\tconnected = false;\n\n\tconstructor() {\n\t\tif (!navigator.requestMIDIAccess) return;\n\t\tnavigator.requestMIDIAccess({ sysex: false })\n\t\t.then((midiAccess: any) => {\n\t\t\tif (midiAccess.inputs.size <= 0) return;\n\t\t\tconst input = midiAccess.inputs.values().next().value;\n\t\t\tif (!input) return;\n\t\t\tinput.onmidimessage = (msg: any) => this.midiMessage(msg);\n\t\t\tthis.connected = true;\n\t\t});\n\t}\n\n\tmidiMessage(msg: any) {\n\t\tconst data = msg.data;\n\t\tconst cmd = data[0] >> 4;\n\t\tconst channel = data[0] & 0xf;\n\t\tconst note = data[1];\n\t\tconst velocity = data[2];\n\t\tswitch (cmd) {\n\t\t\tcase 9:\n\t\t\t\tthis.noteOn(note, velocity, channel);\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\tthis.noteOff(note, velocity, channel);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tnoteOn(midi: number, velocity: number, channel: number): void {}\n\tnoteOff(midi: number, velocity: number, channel: number): void {}\n}\n\ndeclare var navigator: any;\n\n\n\n// WEBPACK FOOTER //\n// ./ts/piano/midi.ts","import * as popups from '../utils/popups';\nimport { log2linear, linear2log } from '../utils/modern';\n\nconst NUM_WHITES = 17;\nconst BASE_NOTE = 36;\n\nconst ARPEGGIO_MODES = ['', 'u', 'd', 'ud'];\nconst ARPEGGIO_LABELS = ['-', '&uarr;', '&darr;', '&uarr;&darr;'];\nconst MAX_ARPEGGIO_OCT = 3;\nconst ARPEGGIO_MIN = 15;\nconst ARPEGGIO_MAX = 480;\n\nconst PORTAMENTO_MIN = 0;\nconst PORTAMENTO_MAX = 1;\n\n\n/** Builds a piano keyboard out of DIVs */\nexport class PianoKeys {\n\tconstructor(public numWhites = NUM_WHITES) {}\n\n\tcreateKeys(panel: JQuery): JQuery[] {\n\t\tconst keys = [];\n\t\tconst pw = panel.width() || 0;\n\t\tconst ph = panel.height() || 0;\n\t\tconst fromX = parseFloat(panel.css('padding-left'));\n\t\tconst fromY = parseFloat(panel.css('padding-top'));\n\t\tconst kw = pw / this.numWhites + 1;\n\t\tconst bw = Math.round(kw * 2 / 3);\n\t\tconst bh = Math.round(ph * 2 / 3);\n\t\t// Create white keys\n\t\tlet knum = 0;\n\t\tfor (let i = 0; i < this.numWhites; i++) {\n\t\t\tconst key = $('<div class=\"piano-key\">').css({\n\t\t\t\twidth: '' + kw + 'px',\n\t\t\t\theight: '' + ph + 'px'\n\t\t\t});\n\t\t\tpanel.append(key);\n\t\t\tkeys[knum++] = key;\n\t\t\tif (this.hasBlack(i)) knum++;\n\t\t}\n\t\t// Create black keys\n\t\tknum = 0;\n\t\tlet x = fromX - bw / 2;\n\t\tfor (let i = 0; i < this.numWhites - 1; i++) {\n\t\t\tx += kw - 1;\n\t\t\tknum++;\n\t\t\tif (!this.hasBlack(i)) continue;\n\t\t\tconst key = $('<div class=\"piano-key piano-black\">').css({\n\t\t\t\twidth: '' + bw + 'px',\n\t\t\t\theight: '' + bh + 'px',\n\t\t\t\tleft: '' + x + 'px',\n\t\t\t\ttop: '' + fromY + 'px'\n\t\t\t});\n\t\t\tpanel.append(key);\n\t\t\tkeys[knum++] = key;\n\t\t}\n\t\treturn keys;\n\t}\n\n\thasBlack(num: number): boolean {\n\t\tconst mod7 = num % 7;\n\t\treturn mod7 != 2 && mod7 != 6;\n\t}\n\n}\n\n/**\n * A virtual piano keyboard that:\n * \t- Captures mouse input and generates corresponding note events\n * \t- Displays note events as CSS-animated colors in the pressed keys\n * \t- Supports octave switching\n * \t- Provides a poly/mono button\n */\nexport class PianoKeyboard {\n\tkeys: JQuery[];\n\tk1note: number;\n\tbaseNote: number;\n\toctave: number;\n\tpoly: boolean;\n\tlastKey: JQuery;\n\tenvelope: { attack: number; release: number };\n\tportaSlider: JQuery;\n\tcontrols: JQuery;\n\tarpeggio = {\n\t\tmode: 0,\n\t\toctave: 1,\n\t\tbpm: 60\n\t};\n\n\tconstructor(panel: JQuery) {\n\t\tthis.baseNote = BASE_NOTE;\n\t\tthis.octave = 3;\n\t\tthis.poly = false;\n\t\tthis.envelope = { attack: 0, release: 0 };\n\t\tconst pianoKeys = new PianoKeys();\n\t\tthis.keys = pianoKeys.createKeys(panel);\n\t\tfor (let i = 0; i < this.keys.length; i++)\n\t\t\tthis.registerKey(this.keys[i], i);\n\t\tthis.controls = panel.parent();\n\t\tthis.registerButtons(this.controls);\n\t\tthis.portaSlider = this.controls.find('.portamento-box input');\n\t}\n\n\tregisterKey(key: JQuery, knum: number): void {\n\t\tkey.mousedown(_ => {\n\t\t\tconst midi = knum + this.baseNote;\n\t\t\tthis.displayKeyDown(key);\n\t\t\tthis.noteOn(midi);\n\t\t});\n\t\tkey.mouseup(_ => {\n\t\t\tconst midi = knum + this.baseNote;\n\t\t\tthis.displayKeyUp(key);\n\t\t\tthis.noteOff(midi);\n\t\t});\n\t}\n\n\tregisterButtons(panel: JQuery): void {\n\t\t// Octave navigation\n\t\t$('#prev-octave-but').click(_ => {\n\t\t\tthis.octave--;\n\t\t\tthis.updateOctave();\n\t\t});\n\t\t$('#next-octave-but').click(_ => {\n\t\t\tthis.octave++;\n\t\t\tthis.updateOctave();\n\t\t});\n\t\t// Arpeggio\n\t\tconst arpeggioSlider = panel.find('.arpeggio-box input');\n\t\tarpeggioSlider.on('input',_ => {\n\t\t\tthis.arpeggio.bpm =\n\t\t\t\tlog2linear(parseFloat('' + arpeggioSlider.val()), ARPEGGIO_MIN, ARPEGGIO_MAX);\n\t\t\t\t// ARPEGGIO_MIN + parseFloat(arpeggioSlider.val()) * (ARPEGGIO_MAX - ARPEGGIO_MIN);\n\t\t\tthis.triggerArpeggioChange();\n\t\t});\n\t\tconst butArpMode = panel.find('.btn-arpeggio-ud');\n\t\tbutArpMode.click(_ => this.changeArpeggioMode(butArpMode));\n\t\tconst butArpOct = panel.find('.btn-arpeggio-oct');\n\t\tbutArpOct.click(_ => this.changeArpeggioOctave(butArpOct));\n\t\t// Monophonic / polyphonic mode\n\t\t$('#poly-but').click(_ => this.togglePoly());\n\t}\n\n\tupdateOctave() {\n\t\t$('#prev-octave-but').prop('disabled', this.octave <= 1);\n\t\t$('#next-octave-but').prop('disabled', this.octave >= 8);\n\t\t$('#octave-label').text('C' + this.octave);\n\t\tthis.baseNote = BASE_NOTE + 12 * (this.octave - 3);\n\t\tthis.octaveChanged(this.baseNote);\n\t}\n\n\tdisplayKeyDown(key: any): void {\n\t\tif (typeof key == 'number') key = this.midi2key(key);\n\t\tif (!key) return;\n\t\tif (!this.poly && this.arpeggio.mode == 0 && this.lastKey)\n\t\t\tthis.displayKeyUp(this.lastKey, true);\n\t\tkey.css('transition', `background-color ${this.envelope.attack}s linear`);\n\t\tkey.addClass('piano-key-pressed');\n\t\tthis.lastKey = key;\n\t}\n\n\tdisplayKeyUp(key: any, immediate?: boolean) {\n\t\tif (typeof key == 'number') key = this.midi2key(key);\n\t\tif (!key) return;\n\t\tconst release = immediate ? 0 : this.envelope.release;\n\t\tkey.css('transition', `background-color ${release}s linear`);\n\t\tkey.removeClass('piano-key-pressed');\n\t}\n\n\tmidi2key(midi: number) {\n\t\treturn this.keys[midi - this.baseNote];\n\t}\n\n\tsetEnvelope(adsr: any) {\n\t\tthis.envelope = adsr;\n\t}\n\n\ttogglePoly() {\n\t\tthis.poly = !this.poly;\n\t\tif (this.poly) {\n\t\t\tconst cover = $('<div>').addClass('editor-cover');\n\t\t\tcover.append('<p>You can use the PC keyboard to play notes<br><br>' +\n\t\t\t\t'Synth editing is disabled in polyphonic mode</p>');\n\t\t\t$('body').append(cover);\n\t\t\t$('#poly-but').text('Poly');\n\t\t\tpopups.setOpen(true);\n\t\t\tthis.polyOn();\n\t\t}\n\t\telse {\n\t\t\t$('.editor-cover').remove();\n\t\t\t$('#poly-but').text('Mono');\n\t\t\tpopups.setOpen(false);\n\t\t\tthis.polyOff();\n\t\t}\n\t}\n\n\tgetPortamento(): number {\n\t\tconst sv = parseFloat('' + this.portaSlider.val());;\n\t\treturn log2linear(sv, PORTAMENTO_MIN, PORTAMENTO_MAX);\n\t}\n\n\tchangeArpeggioMode(button: JQuery) {\n\t\tthis.arpeggio.mode++;\n\t\tif (this.arpeggio.mode >= ARPEGGIO_MODES.length)\n\t\t\tthis.arpeggio.mode = 0;\n\t\tbutton.html(ARPEGGIO_LABELS[this.arpeggio.mode]);\n\t\tthis.triggerArpeggioChange();\n\t}\n\n\tchangeArpeggioOctave(button: JQuery) {\n\t\tthis.arpeggio.octave++;\n\t\tif (this.arpeggio.octave > MAX_ARPEGGIO_OCT)\n\t\t\tthis.arpeggio.octave = 1;\n\t\tbutton.text(this.arpeggio.octave);\n\t\tthis.triggerArpeggioChange();\n\t}\n\n\ttriggerArpeggioChange() {\n\t\tthis.arpeggioChanged(this.arpeggio.bpm,\n\t\t\tARPEGGIO_MODES[this.arpeggio.mode], this.arpeggio.octave);\n\t}\n\n\ttoJSON(): any {\n\t\treturn {\n\t\t\tportamento: this.getPortamento(),\n\t\t\toctave: this.octave,\n\t\t\tarpeggio: {\n\t\t\t\tbpm: this.arpeggio.bpm,\n\t\t\t\tmode: this.arpeggio.mode,\n\t\t\t\toctave: this.arpeggio.octave\n\t\t\t}\n\t\t}\n\t}\n\n\tfromJSON(json: any): void {\n\t\tif (!json) return;\n\t\tif (json.portamento) {\n\t\t\tthis.portaSlider.val(\n\t\t\t\tlinear2log(json.portamento, PORTAMENTO_MIN, PORTAMENTO_MAX));\n\t\t}\n\t\tif (json.octave) {\n\t\t\tthis.octave = json.octave;\n\t\t\tthis.updateOctave();\n\t\t}\n\t\tif (json.arpeggio) {\n\t\t\tthis.arpeggio.bpm = json.arpeggio.bpm;\n\t\t\tthis.arpeggio.mode = json.arpeggio.mode;\n\t\t\tthis.arpeggio.octave = json.arpeggio.octave;\n\t\t\tthis.controls.find('.arpeggio-box input').val(\n\t\t\t\tlinear2log(this.arpeggio.bpm, ARPEGGIO_MIN, ARPEGGIO_MAX));\n\t\t\tthis.controls.find('.btn-arpeggio-ud').html(ARPEGGIO_LABELS[this.arpeggio.mode]);\n\t\t\tthis.controls.find('.btn-arpeggio-oct').text(this.arpeggio.octave);\n\t\t\tthis.triggerArpeggioChange();\n\t\t}\n\t}\n\n\t// Simple event handlers\n\tnoteOn(midi: number): void {}\n\tnoteOff(midi: number): void {}\n\tpolyOn() {}\n\tpolyOff() {}\n\toctaveChanged(baseNote: number) {}\n\tarpeggioChanged(bpm: number, mode: string, octaves: number) {}\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/piano/piano.ts","import { Timer } from '../synth/timer';\n\nexport class Arpeggiator {\n\tmode: string;\n\toctaves: number;\n\t_bpm: number;\n\tnotes: NoteTable;\n\tnotect: number;\n\tbackward = false;\n\ttimer: Timer;\n\tnoteOnTime = 0.75;\n\n\tconstructor(ac: AudioContext) {\n\t\tthis.mode = '';\n\t\tthis.octaves = 1;\n\t\tthis.bpm = 60;\n\t\tthis.notect = 0;\n\t\tthis.notes = new NoteTable();\n\t\tthis.timer = new Timer(ac, this.bpm);\n\t}\n\n\tget bpm() { return this._bpm }\n\n\tset bpm(v) {\n\t\tthis._bpm = v;\n\t\tif (this.timer) this.timer.bpm = v;\n\t}\n\n\ttimerCB(time: number): void {\n\t\t// Return if disabled or no notes\n\t\tif (this.mode.length == 0) return;\n\t\tconst len = this.notes.length();\n\t\tif (len == 0) return;\n\t\t// Check note counter\n\t\tthis.wrapCounter(len);\n\t\t// Get current note and play it\n\t\tconst ndata = this.notes.get(this.notect);\n\t\tthis.noteOn(ndata.noteToPlay, ndata.velocity, time);\n\t\tthis.noteOff(ndata.noteToPlay, ndata.velocity,\n\t\t\ttime + this.timer.noteDuration * this.noteOnTime);\n\t\t// Update note counter\n\t\tif (this.mode == 'u')\n\t\t\tthis.notect++;\n\t\telse if (this.mode == 'd')\n\t\t\tthis.notect--;\n\t\telse if (this.mode == 'ud') {\n\t\t\tif (this.backward) this.notect--;\n\t\t\telse this.notect++;\n\t\t}\n\t}\n\n\twrapCounter(len: number) {\n\t\tif (this.notect >= len) {\n\t\t\tif (this.mode != 'ud')\n\t\t\t\tthis.notect = 0;\n\t\t\telse {\n\t\t\t\tthis.backward = true;\n\t\t\t\tthis.notect = len < 2 ? 0 : len - 2;\n\t\t\t}\n\t\t}\n\t\telse if (this.notect < 0) {\n\t\t\tif (this.mode != 'ud')\n\t\t\t\tthis.notect = len - 1;\n\t\t\telse {\n\t\t\t\tthis.backward = false;\n\t\t\t\tthis.notect = len < 2 ? 0 : 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tsendNoteOn(midi: number, velocity: number): void {\n\t\tif (this.mode.length == 0)\n\t\t\treturn this.noteOn(midi, velocity);\n\t\tconst shouldStart = this.notes.length() == 0;\n\t\tthis.notes.add(midi, midi, velocity);\n\t\tif (this.octaves > 1)\n\t\t\tthis.notes.add(midi, midi + 12, velocity);\n\t\tif (this.octaves > 2)\n\t\t\tthis.notes.add(midi, midi + 24, velocity);\n\t\tif (shouldStart)\n\t\t\tthis.timer.start(time => this.timerCB(time));\n\t}\n\n\tsendNoteOff(midi: number, velocity: number): void {\n\t\tif (this.mode.length == 0)\n\t\t\tthis.noteOff(midi, velocity);\n\t\tthis.notes.remove(midi);\n\t\tif (this.notes.length() == 0) {\n\t\t\tthis.timerCB(0);\n\t\t\tthis.timer.stop();\n\t\t\tthis.backward = false;\n\t\t\tthis.notect = 0;\n\t\t}\n\t}\n\n\t// Event handlers\n\tnoteOn(midi: number, velocity: number, time?: number): void {}\n\tnoteOff(midi: number, velocity: number, time?: number): void {}\n}\n\n\nclass NoteData {\n\tconstructor(public note: number,\n\t\tpublic noteToPlay: number, public velocity: number) {}\n}\n\nclass NoteTable {\n\tprivate notes: NoteData[] = [];\n\n\tlength(): number { return this.notes.length; }\n\n\tget(i: number): NoteData { return this.notes[i]; }\n\n\tadd(note: number, noteToPlay: number, velocity: number): void {\n\t\tconst ndata = new NoteData(note, noteToPlay, velocity);\n\t\tfor (let i = 0; i < this.notes.length; i++) {\n\t\t\tif (noteToPlay < this.notes[i].noteToPlay) {\n\t\t\t\tthis.notes.splice(i, 0, ndata);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.notes.push(ndata);\n\t}\n\n\tremove(note: number): void {\n\t\tthis.notes = this.notes.filter(ndata => ndata.note != note);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./ts/piano/arpeggiator.ts","import { SynthUI } from './synthUI';\nimport * as popups from '../utils/popups';\nimport * as file from '../utils/file';\nimport { focusable } from '../utils/modern';\nimport { Node } from './graph';\n\nconst MAX_PRESETS = 20;\n\n/**\n * Manages the presets box:\n * - Handles navigation through presets\n * - Handles preset loading & saving\n */\nexport class Presets {\n\n\tsynthUI: SynthUI;\n\tpresets: any[];\n\tpresetNum: number = 0;\n\n\tconstructor(synthUI: SynthUI) {\n\t\tthis.synthUI = synthUI;\n\t\tthis.registerListeners(synthUI.gr.canvas);\n\t\tthis.loadPresets();\n\t}\n\n\tloadPresets() {\n\t\tthis.presets = new Array(MAX_PRESETS);\n\t\tfor (let i = 0; i < MAX_PRESETS; i++)\n\t\t\tthis.presets[i] = this.getEmptyPreset();\n\t\t$.get('js/presets.json', data => {\n\t\t\tif (!(data instanceof Array)) return;\n\t\t\tfor (let i = 0; i < MAX_PRESETS; i++)\n\t\t\t\tif (data[i]) this.presets[i] = data[i];\n\t\t\tthis.preset2synth();\n\t\t});\n\t}\n\n\tgetEmptyPreset(): any {\n\t\treturn {\n\t\t\tname: '',\n\t\t\tnodes: [\n\t\t\t\t{ id: 0, x: 500, y: 180, name: 'Out', inputs: [], classes: 'node node-out' }\n\t\t\t],\n\t\t\tnodeData: [\n\t\t\t\t{ type: 'out', params: {} }\n\t\t\t]\n\t\t};\n\t}\n\n\tregisterListeners(elem: HTMLElement) {\n\t\t$('#save-but').click(_ => this.savePreset());\n\t\t$('#load-file').on('change', evt => this.loadPreset(evt));\n\t\t$('#prev-preset-but').click(_ => this.changePreset(this.presetNum - 1));\n\t\t$('#next-preset-but').click(_ => this.changePreset(this.presetNum + 1));\n\t\t$(focusable(elem)).keydown(evt => {\n\t\t\tif (evt.target.nodeName == 'INPUT' || popups.isOpen) return;\n\t\t\tif (evt.keyCode == 37) this.changePreset(this.presetNum - 1);\n\t\t\tif (evt.keyCode == 39) this.changePreset(this.presetNum + 1);\n\t\t});\n\t\t$('#preset-num').click(_ => this.togglePresetSelector());\n\t\tconst preSel = $('.preset-selector select');\n\t\tpreSel.change(_ => {\n\t\t\tlet val = preSel.val();\n\t\t\tif (!val) return;\n\t\t\tconst sel = val.toString().split(':')[0];\n\t\t\tthis.changePreset(parseInt(sel, 10) - 1);\n\t\t});\n\t}\n\n\ttogglePresetSelector() {\n\t\tconst seldiv = $('.preset-selector');\n\t\tseldiv.toggle();\n\t\tif (!seldiv.is(':visible')) return;\n\t\t// Fill select contents\n\t\tthis.synth2preset();\n\t\tconst sel = seldiv.find('select');\n\t\tsel.empty();\n\t\tsel.focus();\n\t\tlet i = 0;\n\t\tfor (const preset of this.presets) {\n\t\t\tconst selected = i == this.presetNum ? ' selected' : '';\n\t\t\ti++;\n\t\t\tif (preset.nodes.length > 1)\n\t\t\t\tsel.append(`<option${selected}>${i}: ${preset.name}</option>`);\n\t\t}\n\t}\n\n\tchangePreset(newNum: number) {\n\t\tif (newNum < 0) newNum = MAX_PRESETS - 1;\n\t\telse if (newNum >= MAX_PRESETS) newNum = 0;\n\t\tthis.synth2preset();\n\t\tthis.presetNum = newNum;\n\t\tthis.preset2synth();\n\t}\n\n\tsynth2preset() {\n\t\tconst json = this.synthUI.gr.toJSON();\n\t\tlet val = '' + $('#preset-name').val();\n\t\tjson.name = val.trim();\n\t\tjson.modulatorType = 'synth';\n\t\tthis.beforeSave(json);\n\t\tthis.presets[this.presetNum] = json;\n\t\treturn json;\n\t}\n\n\tpreset2synth() {\n\t\tconst preset = this.presets[this.presetNum];\n\t\tthis.afterLoad(preset);\n\t\t$('#preset-num').text(this.presetNum + 1);\n\t\t$('#preset-name').val(preset.name);\n\t\t$('#node-params').empty();\n\t\tthis.synthUI.gr.fromJSON(preset);\n\t\tthis.selectBestNode();\n\t}\n\n\tselectBestNode() {\n\t\ttype Predicate = (n: Node) => boolean;\n\t\tconst getFirstNode =\n\t\t\t(isGood: Predicate) => this.synthUI.gr.nodes.filter(isGood)[0];\n\t\tlet n = getFirstNode(n => n.data.type == 'Filter');\n\t\tif (!n) n = getFirstNode(n => n.data.type == 'ADSR');\n\t\tif (!n) n = getFirstNode(n => n.data.anode.numberOfInputs == 0);\n\t\tif (n) this.synthUI.gr.selectNode(n);\n\t}\n\n\tloadPreset(evt: JQuery.Event) {\n\t\tif (!evt) return;\n\t\tfile.uploadText(evt, data => {\n\t\t\ttry {\n\t\t\t\tconst json = JSON.parse(data);\n\t\t\t\tif (json.modulatorType != 'synth') throw 'Invalid file format';\n\t\t\t\tthis.presets[this.presetNum] = json;\n\t\t\t\tthis.preset2synth();\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t\tpopups.alert('Could not load synth: invalid file format', 'Load error');\n\t\t\t}\n\t\t});\n\t}\n\n\tsavePreset() {\n\t\tconst json = this.synth2preset();\n\t\tconst jsonData = JSON.stringify(json);\n\t\tif (file.browserSupportsDownload()) {\n\t\t\tif (json.name.length == 0) json.name = '' + this.presetNum;\n\t\t\tfile.download(json.name + '.json', jsonData);\n\t\t}\n\t\telse {\n\t\t\tpopups.prompt(\n\t\t\t\t'Copy the text below to the clipboard and save it to a local text file',\n\t\t\t\t'Save preset', jsonData, null);\n\t\t}\n\t}\n\n\t// Extension point to specify additional data to save, e.g. keyboard settings\n\tbeforeSave(json: any): void {}\n\t// Extension point to handle previously saved additional data\n\tafterLoad(json: any): void {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ts/synthUI/presets.ts"],"sourceRoot":""}